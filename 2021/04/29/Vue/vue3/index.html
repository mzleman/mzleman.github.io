

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Leman">
  <meta name="keywords" content="">
  <title>Vue3ç¬”è®° - Personal Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"mzleman.gitee.io","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Leman ğŸ˜€</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/profile/">
                <i class="iconfont icon-link-fill"></i>
                ç®€å†
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Vue3ç¬”è®°">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-04-29 15:54" pubdate>
        2021å¹´4æœˆ29æ—¥ ä¸‹åˆ
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      8.9k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      129
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Vue3ç¬”è®°</h1>
            
            <div class="markdown-body">
              <h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><h2 id="Composition-API-å¸¸ç”¨å†…å®¹"><a href="#Composition-API-å¸¸ç”¨å†…å®¹" class="headerlink" title="Composition API å¸¸ç”¨å†…å®¹"></a>Composition API å¸¸ç”¨å†…å®¹</h2><h3 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h3><p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li>æ–°çš„optionï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªé’©å­å‡½æ•°ã€‚</li>
<li>Vue3ä¸­ï¼Œæ‰€æœ‰çš„ç»„åˆAPIå‡½æ•°éƒ½åœ¨æ­¤ä½¿ç”¨, åªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li>å‡½æ•°å¦‚æœè¿”å›å¯¹è±¡, å¯¹è±¡ä¸­çš„<strong>å±æ€§</strong>æˆ–<strong>æ–¹æ³•</strong>, æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>æ‰§è¡Œæ—¶æœºï¼š</strong></p>
<ul>
<li>åœ¨beforeCreateä¹‹å‰æ‰§è¡Œ(ä¸€æ¬¡), æ­¤æ—¶ç»„ä»¶å®ä¾‹è¿˜æ²¡æœ‰åˆ›å»ºã€‚</li>
<li>ç”±äºç»„ä»¶å®ä¾‹æ²¡æœ‰åˆ›å»ºï¼Œsetupé’©å­çš„thisæ˜¯undefined, ä¸èƒ½é€šè¿‡thisæ¥è®¿é—®data/computed/methods / propsã€‚</li>
<li>å…¶å®æ‰€æœ‰çš„composition APIç›¸å…³å›è°ƒå‡½æ•°ä¸­ä¹Ÿéƒ½ä¸å¯ä»¥é€šè¿‡thisè®¿é—®ç»„ä»¶å®ä¾‹ã€‚</li>
</ul>
<p><strong>è¿”å›å€¼ï¼š</strong></p>
<ul>
<li><p>ä¸€èˆ¬éƒ½è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­åŒ…å«æ¨¡æ¿å¯ä»¥ä½¿ç”¨çš„æ•°æ®ä»¥åŠç»„ä»¶çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>è¿™é‡Œç»„ä»¶çš„æ–¹æ³•å¯èƒ½æ¦‚å¿µä¸å¤ªå‡†ç¡®ï¼Œä½†æ˜¯å¯ä»¥ç†è§£ä¸ºVue2ä¸­ç»„ä»¶çš„methodï¼Œå› ä¸ºVue3ä¸æ¨èå†ä½¿ç”¨methodå®šä¹‰ä¸€äº›ç»„ä»¶è¡Œä¸ºã€‚</p>
</blockquote>
</li>
<li><p>setupè¿”å›å€¼ä¸­çš„æ•°æ®ä¼šä¸dataä¸­å®šä¹‰çš„æ•°æ®åˆå¹¶ï¼Œå¹¶æŒ‚è½½åˆ°ç»„ä»¶å®ä¾‹ä¸Š â­ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚<code> setup</code>è¿”å› <code>&#123;foo: ...&#125;</code>ï¼Œ<code>data</code>è¿”å› <code>&#123;bar: ...&#125;</code>ï¼Œç»„ä»¶å®ä¾‹ä¸Šä¼šå…·æœ‰<code>foo</code>å’Œ<code>bar</code>å±æ€§ã€‚</p>
<p>â— å¦‚æœå­˜åœ¨åŒåç°è±¡ï¼Œsetupè¿”å›çš„æ•°æ®å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p>
<p>åœ¨dataä¸­å¯ä»¥è®¿é—®åˆ°setupä¸­å®šä¹‰çš„æ•°æ®ï¼Œæ„å‘³ç€dataå®šä¹‰çš„æ•°æ®å¯ä»¥ä¾èµ–ä¸setupå®šä¹‰çš„æ•°æ®ã€‚</p>
</blockquote>
</li>
<li><p>setupè¿”å›å€¼ä¸­çš„æ–¹æ³•ä¼šä¸methodä¸­å®šä¹‰çš„æ–¹æ³•åˆå¹¶ï¼Œå¹¶æŒ‚è½½åˆ°ç»„ä»¶å®ä¾‹ä¸Šâ­ã€‚</p>
<blockquote>
<p>åŒæ•°æ®çš„å®šä¹‰ï¼Œsetupä¸­å®šä¹‰çš„æ–¹æ³•å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p>
<p>åœ¨methodä¸­å¯ä»¥è®¿é—®åˆ°setupä¸­å®šä¹‰äº†çš„æ•°æ®å’Œæ–¹æ³•ï¼Œæ„å‘³ç€methodä¸­å¯ä»¥è°ƒç”¨setupä¸­å·²ç»å®šä¹‰çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ“ä½œsetupä¸­å®šä¹‰çš„æ•°æ®ã€‚</p>
</blockquote>
</li>
</ul>
<p><font color="red">å°½ç®¡setupå¯ä»¥å’Œdataã€methodåŒæ—¶ä½¿ç”¨ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚</font></p>
<h4 id="props-å‚æ•°"><a href="#props-å‚æ•°" class="headerlink" title="props å‚æ•°"></a>props å‚æ•°</h4><p>setupé’©å­å®é™…ä¸Šæ˜¯æœ‰å‚æ•°çš„ã€‚</p>
<p><code>setup</code> å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code>ã€‚æ­£å¦‚åœ¨ä¸€ä¸ªæ ‡å‡†ç»„ä»¶ä¸­æ‰€æœŸæœ›çš„é‚£æ ·ï¼Œ<code>setup</code> å‡½æ•°ä¸­çš„ <code>props</code> æ˜¯å“åº”å¼çš„ï¼Œå½“ä¼ å…¥æ–°çš„ prop æ—¶ï¼Œå®ƒå°†è¢«æ›´æ–°ã€‚</p>
<blockquote>
<p>è¯¥å‚æ•°ç±»ä¼¼äºVue2ä¸­çš„propsï¼Œä½†åŒºåˆ«åœ¨äºsetupä¸­çš„propsåªåŒ…å«é‚£äº›åœ¨<code>props option</code>ä¸­å®šä¹‰äº†ï¼Œä¸”è¢«çˆ¶ç»„ä»¶æ³¨å…¥äº†çš„æˆ–å…·æœ‰é»˜è®¤å€¼çš„propsã€‚</p>
<p>å³å½“ä¸€ä¸ªçˆ¶ç»„ä»¶æ²¡æœ‰å‘å­ç»„ä»¶æ³¨å…¥æŸä¸ªpropæ—¶ï¼Œä¸”å­ç»„ä»¶<code>props option</code>ä¸­æ²¡æœ‰ä¸ºè¯¥propå®šä¹‰é»˜è®¤å€¼ï¼Œåˆ™åœ¨å­ç»„ä»¶çš„setupä¸­ï¼Œpropså‚æ•°ä¸­ä¸å­˜åœ¨è¯¥propçš„å±æ€§å€¼ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// MyBook.vue  ğŸ‘ˆ ç®€å•çš„ä¾‹å­</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  props: &#123;           <span class="hljs-comment">// Vue3ä¸­ä»ç„¶æŒ‰ç…§æ—§æœ‰çš„æ–¹å¼å®šä¹‰å¤šä¸ªprop</span><br>    title: <span class="hljs-built_in">String</span><br>  &#125;,<br>  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params">props</span>)</span> &#123;     <span class="hljs-comment">// åœ¨setupä¸­è®¿é—®propsçš„æ•°æ®ï¼Œpropså®å‚æ˜¯ä¸€ä¸ªProxyå¯¹è±¡ã€‚</span><br>    <span class="hljs-built_in">console</span>.log(props.title)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h4 id="props-toRefs"><a href="#props-toRefs" class="headerlink" title="props toRefs"></a>props toRefs</h4><p>ä¸Šé¢æåˆ°äº†ï¼Œpropså®å‚æ˜¯ä¸€ä¸ªProxyå¯¹è±¡ï¼Œå¯¹å®ƒç›´æ¥è¿›è¡Œè§£æ„ï¼Œè§£æ„å‡ºçš„å†…å®¹ä¸å…·æœ‰å“åº”æ€§ã€‚</p>
<p>å¦‚æœéœ€è¦è§£æ„ propï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ <code>setup</code> å‡½æ•°ä¸­çš„ <code>toRefs</code> æ¥å®‰å…¨åœ°å®Œæˆæ­¤æ“ä½œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// MyBook.vue</span><br><br><span class="hljs-keyword">import</span> &#123; toRefs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params">props</span>)</span> &#123;<br>	<span class="hljs-keyword">const</span> &#123; title &#125; = toRefs(props)<br><br>	<span class="hljs-built_in">console</span>.log(title.value)<br>&#125;<br></code></pre></td></tr></table></figure>


<h4 id="context-å‚æ•°"><a href="#context-å‚æ•°" class="headerlink" title="context å‚æ•°"></a>context å‚æ•°</h4><p>ä¼ é€’ç»™ <code>setup</code> å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>context</code>ã€‚<code>context</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œå®ƒæš´éœ²ä¸‰ä¸ªç»„ä»¶çš„ propertyï¼š</p>
<ul>
<li><em>attrs</em>ï¼šç›¸å½“äºthis.$attrsï¼Œå³épropå’Œemitsçš„attributeã€‚</li>
<li><em>slots</em>ï¼šåŒ…å«æ‰€æœ‰ä¼ å…¥çš„æ’æ§½å†…å®¹çš„å¯¹è±¡, ç›¸å½“äº this.$slotsã€‚</li>
<li><em>emit</em>ï¼šç”¨æ¥åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äº this.$emitã€‚</li>
</ul>
<h4 id="setupä¸­å¯ä»¥è®¿é—®åˆ°çš„ç»„ä»¶å†…å®¹"><a href="#setupä¸­å¯ä»¥è®¿é—®åˆ°çš„ç»„ä»¶å†…å®¹" class="headerlink" title="setupä¸­å¯ä»¥è®¿é—®åˆ°çš„ç»„ä»¶å†…å®¹"></a>setupä¸­å¯ä»¥è®¿é—®åˆ°çš„ç»„ä»¶å†…å®¹</h4><p>æ‰§è¡Œ <code>setup</code> æ—¶ï¼Œç»„ä»¶å®ä¾‹å°šæœªè¢«åˆ›å»ºã€‚å› æ­¤ï¼Œä½ åªèƒ½è®¿é—®ä»¥ä¸‹ propertyï¼š</p>
<ul>
<li><code>props</code></li>
<li><code>attrs</code></li>
<li><code>slots</code></li>
<li><code>emit</code></li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œä½ <strong>å°†æ— æ³•è®¿é—®</strong>ä»¥ä¸‹ç»„ä»¶é€‰é¡¹ï¼š</p>
<ul>
<li><code>data</code></li>
<li><code>computed</code></li>
<li><code>methods</code></li>
</ul>
<h4 id="è¿”å›æ¸²æŸ“å‡½æ•°"><a href="#è¿”å›æ¸²æŸ“å‡½æ•°" class="headerlink" title="è¿”å›æ¸²æŸ“å‡½æ•°"></a>è¿”å›æ¸²æŸ“å‡½æ•°</h4><p><code>setup</code> è¿˜å¯ä»¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ç›´æ¥ä½¿ç”¨åœ¨åŒä¸€ä½œç”¨åŸŸä¸­å£°æ˜çš„å“åº”å¼çŠ¶æ€ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// MyBook.vue</span><br><br><span class="hljs-keyword">import</span> &#123; h, ref, reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">const</span> readersNumber = ref(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">const</span> book = reactive(&#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Vue 3 Guide&#x27;</span> &#125;)<br>    <span class="hljs-comment">// Please note that we need to explicitly expose ref value here</span><br>    <span class="hljs-comment">//                    ğŸ‘‡ æ³¨æ„è¿™é‡Œrefå¯¹è±¡ä¸ä¼šè‡ªåŠ¨å±•å¼€</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> h(<span class="hljs-string">&#x27;div&#x27;</span>, [readersNumber.value, book.title]) <br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>è‡³æ­¤ï¼Œsetupå¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ã€‚å…¶å®setupè¿˜å¯ä»¥è¿”å›ä¸€ä¸ªpromiseå®šä¹‰å¼‚æ­¥ç»„ä»¶ ï¼Ÿâ“</p>
</blockquote>
<h4 id="setupä¸­çš„this"><a href="#setupä¸­çš„this" class="headerlink" title="setupä¸­çš„this"></a>setupä¸­çš„this</h4><p>åœ¨setupæ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡æœ‰è¢«åˆ›å»ºï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿé€šè¿‡thisè®¿é—®ç»„ä»¶å®ä¾‹ã€‚</p>
<h3 id="é€šè¿‡refå®šä¹‰æ•°æ®å“åº”å¼å¼•ç”¨"><a href="#é€šè¿‡refå®šä¹‰æ•°æ®å“åº”å¼å¼•ç”¨" class="headerlink" title="é€šè¿‡refå®šä¹‰æ•°æ®å“åº”å¼å¼•ç”¨"></a>é€šè¿‡refå®šä¹‰æ•°æ®å“åº”å¼å¼•ç”¨</h3><p><strong>ä½œç”¨:</strong> refå‡½æ•°è¿”å›ä¸€ä¸ªæ•°æ®çš„å“åº”å¼å¼•ç”¨ã€‚</p>
<p>ï¼ˆä¸€èˆ¬ç”¨æ¥å¾—åˆ°ä¸€ä¸ªåŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”å¼å¼•ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥å¾—åˆ°å¼•ç”¨ç±»å‹æ•°æ®çš„å“åº”å¼å¼•ç”¨ï¼‰</p>
<p><strong>è¯­æ³•:</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; defineComponent, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineComponent(&#123;<br>    <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-keyword">const</span> name = ref(<span class="hljs-string">&#x27;mz&#x27;</span>);<br>        <span class="hljs-keyword">const</span> age = ref(<span class="hljs-number">24</span>);<br>        <span class="hljs-keyword">const</span> user = ref(&#123;<br>            name: <span class="hljs-string">&#x27;mz&#x27;</span>,<br>            age: <span class="hljs-number">24</span>,<br>        &#125;);<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li><p>refå‡½æ•°åŒ…è£¹ä¸€ä¸ªæ•°æ®ï¼Œä¼šè¿”å›ä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„å¼•ç”¨(reference)å¯¹è±¡ã€‚</p>
</li>
<li><p>åœ¨è„šæœ¬ä¸­ä¿®æ”¹å“åº”å¼å¼•ç”¨çš„valueå±æ€§å€¼ï¼Œå¦‚ï¼š <code>xxx.value = ...</code>ï¼Œè¿™ä¼šâ€œä¿®æ”¹æ•°æ®â€ï¼Œå¦‚æœæ•°æ®å¼•ç”¨è¢«è¿½è¸ªäº†ï¼Œä¿®æ”¹æ“ä½œè¿˜èƒ½å¤Ÿè§¦å‘è§†å›¾æ›´æ–°ã€‚</p>
</li>
<li><p>æ¨¡æ¿ä¸­ä½¿ç”¨æ•°æ®:ï¼šä¸éœ€è¦é€šè¿‡<code>.value</code>ï¼ˆrefå±•å¼€ï¼‰ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        &#123;&#123;name&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="é€šè¿‡refè·å–DOMå…ƒç´ -å­ç»„ä»¶å®ä¾‹"><a href="#é€šè¿‡refè·å–DOMå…ƒç´ -å­ç»„ä»¶å®ä¾‹" class="headerlink" title="é€šè¿‡refè·å–DOMå…ƒç´ /å­ç»„ä»¶å®ä¾‹"></a>é€šè¿‡refè·å–DOMå…ƒç´ /å­ç»„ä»¶å®ä¾‹</h3><p><strong>åŠŸèƒ½éœ€æ±‚:</strong> è®©è¾“å…¥æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;App&lt;&#x2F;h2&gt;<br>  &lt;input type&#x3D;&quot;text&quot;&gt;---<br>  &lt;input type&#x3D;&quot;text&quot; ref&#x3D;&quot;inputRef&quot;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import &#123; onMounted, ref &#125; from &#39;vue&#39;<br>&#x2F;* <br>refè·å–å…ƒç´ : åˆ©ç”¨refå‡½æ•°è·å–ç»„ä»¶ä¸­çš„æ ‡ç­¾å…ƒç´ <br>åŠŸèƒ½éœ€æ±‚: è®©è¾“å…¥æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹<br>*&#x2F;<br>export default &#123;<br>  setup() &#123;<br>    const inputRef &#x3D; ref&lt;HTMLElement|null&gt;(null);  &#x2F;&#x2F; ğŸ‘ˆ å˜é‡åä¸refå€¼ç›¸åŒ<br><br>    onMounted(() &#x3D;&gt; &#123;<br>      if (inputRef.value !&#x3D;&#x3D; null) &#123;<br>        inputRef.value.focus();   &#x2F;&#x2F; â­ valueå€¼ä¸ºrefæ ‡è®°çš„DOMå…ƒç´ <br>      &#125;<br>    &#125;)<br><br>    return &#123;<br>      inputRef  &#x2F;&#x2F; â— ä¸€å®šè¦å¯¼å‡ºä»¥åæ‰èƒ½åœ¨onMountedä¸­è®¿é—®åˆ°æ ‡è®°çš„å…ƒç´ <br>    &#125;<br>  &#125;,<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/composition-api-template-refs.html#v-for-%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95">é“¾æ¥ï¼šä¸v-forç»“åˆä½¿ç”¨</a></p>
<h3 id="é€šè¿‡reactiveå®šä¹‰æ•°æ®å“åº”å¼"><a href="#é€šè¿‡reactiveå®šä¹‰æ•°æ®å“åº”å¼" class="headerlink" title="é€šè¿‡reactiveå®šä¹‰æ•°æ®å“åº”å¼"></a>é€šè¿‡reactiveå®šä¹‰æ•°æ®å“åº”å¼</h3><p><strong>ä½œç”¨ï¼š</strong>å®šä¹‰å¤šä¸ªæ•°æ®çš„å“åº”å¼ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;name: &#123;&#123;state.name&#125;&#125;&lt;&#x2F;h2&gt;<br>  &lt;h2&gt;age: &#123;&#123;state.age&#125;&#125;&lt;&#x2F;h2&gt;<br>  &lt;h2&gt;wife: &#123;&#123;state.wife&#125;&#125;&lt;&#x2F;h2&gt;<br>  &lt;hr&gt;<br>  &lt;button @click&#x3D;&quot;update&quot;&gt;æ›´æ–°&lt;&#x2F;button&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>import &#123;<br>  reactive,<br>&#125; from &#39;vue&#39;<br>export default &#123;<br>  setup () &#123;<br>    &#x2F;* <br>    å®šä¹‰å“åº”å¼æ•°æ®å¯¹è±¡<br>    *&#x2F;<br>    const state &#x3D; reactive(&#123;<br>      name: &#39;tom&#39;,<br>      age: 25,<br>      wife: &#123;<br>        name: &#39;marry&#39;,<br>        age: 22<br>      &#125;,<br>    &#125;)<br>    console.log(state, state.wife)<br><br>    const update &#x3D; () &#x3D;&gt; &#123;<br>      state.name +&#x3D; &#39;--&#39;<br>      state.age +&#x3D; 1<br>      state.wife.name +&#x3D; &#39;++&#39;<br>      state.wife.age +&#x3D; 2<br>    &#125;<br><br>    return &#123;<br>      state,<br>      update,<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li>åœ¨setupä¸­ï¼Œä½¿ç”¨reactiveåŒ…è£¹å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªProxyå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯å“åº”å¼çš„ï¼ˆä»£ç†å¯¹è±¡ï¼‰ã€‚</li>
<li>åœ¨æ¨¡æ¿ä¸­å¯ä»¥ä½¿ç”¨ä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è¯»å–åˆ°æ•°æ®ã€‚</li>
<li>è„šæœ¬ä¸­é€šè¿‡ä»£ç†å¯¹è±¡ä¿®æ”¹æ•°æ®ï¼Œè¿™äº›ä¿®æ”¹ä¼šååº”åˆ°è§†å›¾ä¸Šã€‚</li>
<li>è¿™ç§å“åº”å¼æ˜¯â€œ æ·±å±‚ â€çš„ã€‚</li>
</ul>
<h3 id="refä¸reactiveçš„è”ç³»ä¸åŒºåˆ«"><a href="#refä¸reactiveçš„è”ç³»ä¸åŒºåˆ«" class="headerlink" title="refä¸reactiveçš„è”ç³»ä¸åŒºåˆ«"></a>refä¸reactiveçš„è”ç³»ä¸åŒºåˆ«</h3><p><strong>åŒºåˆ«:</strong></p>
<ol>
<li><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ç”¨<code>ref</code>å¤„ç†åŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”å¼ï¼›</p>
<p>ç”¨<code>reactive</code>å¤„ç†å¼•ç”¨ç±»å‹çš„å“åº”å¼ï¼Œè€Œä¸”ä½¿ç”¨<code>reactive</code>å®šä¹‰çš„å“åº”å¼æ˜¯â€œ æ·±å±‚ â€çš„ã€‚</p>
</li>
</ol>
<ol start="2">
<li><p>ä½¿ç”¨<code>ref()</code>åŒ…è£¹æ•°æ®ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª<code>RefImpl</code>å®ä¾‹ï¼›</p>
<p>ä½¿ç”¨<code>reactive()</code>åŒ…è£¹æ•°æ®ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªProxyå¯¹è±¡ï¼ˆä»£ç†å¯¹è±¡ï¼‰ã€‚</p>
</li>
</ol>
<ol start="3">
<li><p><code>ref</code>é€šè¿‡ç»™valueå±æ€§æ·»åŠ getter/setteræ¥å®ç°å¯¹æ•°æ®çš„åŠ«æŒï¼Œä¿®æ”¹<code>value</code>æ—¶ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼›</p>
<p><code>reactive</code>é€šè¿‡ä½¿ç”¨Proxyæ¥å®ç°å¯¹å¯¹è±¡å†…éƒ¨æ‰€æœ‰æ•°æ®çš„åŠ«æŒ, å¹¶é€šè¿‡Reflectæ“ä½œå¯¹è±¡å†…éƒ¨æ•°æ®ã€‚</p>
</li>
</ol>
<p><strong>è”ç³»:</strong></p>
<ol>
<li><p>éƒ½å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨<code>ref</code>å’Œ<code>reactive</code>è¿”å›çš„å†…å®¹ã€‚</p>
</li>
<li><p>ä½¿ç”¨<code>ref()</code>ä¹Ÿå¯ä»¥åŒ…è£¹å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œå½“<code>let objRef = ref(obj)</code>è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…éƒ¨åˆ¤æ–­å‡ºobjæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™<code>objRef.value</code>ä¸ºä¸€ä¸ª<code>reactive</code>å¯¹è±¡ã€‚å½“ä¿®æ”¹<code>objRef.value</code>æ—¶ï¼Œå¦‚æœæ–°çš„å€¼ä»ä¸ºä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œåˆ™ä¼šå°†æ–°çš„å€¼å†æ¬¡å°è£…æˆä¸€ä¸ª<code>reactive</code>å¯¹è±¡ã€‚</p>
<blockquote>
<p>åŸå› ï¼šæ“ä½œ<code>RefImpl</code>å¯¹è±¡çš„<code>value</code>å±æ€§ä¼šè¢«<code>getter/setter</code>æ‹¦æˆªã€‚</p>
</blockquote>
</li>
</ol>
<h3 id="ref-å±•å¼€"><a href="#ref-å±•å¼€" class="headerlink" title="ref å±•å¼€"></a>ref å±•å¼€</h3><p>æ‰€è°“â€œrefå±•å¼€â€ æ˜¯æŒ‡è®¿é—®refå¯¹è±¡å¼•ç”¨çš„å€¼æ—¶ï¼Œä¸éœ€è¦é€šè¿‡<code>.value</code>è®¿é—®ï¼Œè¿™æœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li><p>åœ¨æ¨¡æ¿ä¸­è®¿é—®ï¼Œå½“ ref ä½œä¸ºæ¸²æŸ“ä¸Šä¸‹æ–‡ (ä» <code>setup()</code>ä¸­è¿”å›çš„å¯¹è±¡) ä¸Šçš„ property è¿”å›å¹¶å¯ä»¥åœ¨æ¨¡æ¿ä¸­è¢«è®¿é—®æ—¶ï¼Œå®ƒå°†è‡ªåŠ¨å±•å¼€ä¸ºå†…éƒ¨å€¼ã€‚ä¸éœ€è¦åœ¨æ¨¡æ¿ä¸­è¿½åŠ  <code>.value</code>ã€‚</p>
</li>
<li><p>å½“refå¯¹è±¡ä½œä¸ºreactiveå¯¹è±¡çš„å±æ€§å€¼è¢«è®¿é—®æˆ–è€…æ›´æ”¹æ—¶ï¼Œä¸ºäº†ä½¿å…¶è¡Œä¸ºç±»ä¼¼äºè®¿é—®reactiveå¯¹è±¡çš„æ™®é€šçš„å±æ€§ï¼Œå®ƒä¼šè‡ªåŠ¨å±•å¼€å†…éƒ¨å€¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> count = ref(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">const</span> state = reactive(&#123;<br>  count<br>&#125;)<br><br><span class="hljs-built_in">console</span>.log(state.count) <span class="hljs-comment">// 0</span><br><br>state.count = <span class="hljs-number">1</span><br><span class="hljs-built_in">console</span>.log(count.value) <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure>
<p>å¦‚æœå°†æ–°çš„ ref èµ‹å€¼ç»™ç°æœ‰ ref çš„ propertyï¼Œå°†ä¼šæ›¿æ¢æ—§çš„ refï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> otherCount = ref(<span class="hljs-number">2</span>)<br><br>state.count = otherCount<br><span class="hljs-built_in">console</span>.log(state.count) <span class="hljs-comment">// 2</span><br><span class="hljs-built_in">console</span>.log(count.value) <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ä»…å½“</strong>reactiveå¯¹è±¡ä»£ç†çš„targetæ˜¯ä¸€ä¸ª<code>Plain Object</code>ä¸”refå¯¹è±¡ä¸ºå…¶æŸä¸ªå±æ€§å€¼æ—¶ï¼Œå¯¹refçš„è®¿é—®ä¼šå±•å¼€ã€‚</p>
<p>å½“reativeä»£ç†çš„ä¸å†æ˜¯<code>Plain Object</code>ï¼Œè€Œæ˜¯ä¸€ä¸ª<code>Array</code>æˆ–<code>Map</code>ç­‰å…¶ä»–åŸç”Ÿå®¹å™¨ï¼Œè®¿é—®refæ—¶ï¼Œä¸ä¼šè¿›è¡Œå±•å¼€ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> books = reactive([ref(<span class="hljs-string">&#x27;Vue 3 Guide&#x27;</span>)])<br><span class="hljs-comment">// è¿™é‡Œéœ€è¦ .value</span><br><span class="hljs-built_in">console</span>.log(books[<span class="hljs-number">0</span>].value)<br><br><span class="hljs-keyword">const</span> map = reactive(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">&#x27;count&#x27;</span>, ref(<span class="hljs-number">0</span>)]]))<br><span class="hljs-comment">// è¿™é‡Œéœ€è¦ .value</span><br><span class="hljs-built_in">console</span>.log(map.get(<span class="hljs-string">&#x27;count&#x27;</span>).value)<br></code></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h3 id="toRefs-å’Œ-toRef"><a href="#toRefs-å’Œ-toRef" class="headerlink" title="toRefs å’Œ toRef"></a>toRefs å’Œ toRef</h3><p><strong>ä¸€ã€toRefs</strong></p>
<p><strong>ä½œç”¨ï¼š</strong>è¯¥å‡½æ•°å¯ä»¥å°†ä¸€ä¸ªreactiveå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸ªå±æ€§å€¼éƒ½ä¸ºä¸€ä¸ªrefå¯¹è±¡ï¼Œå±æ€§åå¯¹åº”reactiveå¯¹è±¡ä¸­çš„æ¯ä¸ªå±æ€§ã€‚<font color='red'>å³å°†ä¸€ä¸ªreactiveå¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªrefï¼ŒåŒæ—¶ä¿®æ”¹æ¯ä¸ªrefçš„valueæ—¶ï¼Œä¼šä¿®æ”¹reactiveå¯¹è±¡çš„å±æ€§å€¼ã€‚</font></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h1&gt;App&lt;&#x2F;h1&gt;<br>  &lt;button @click&#x3D;&quot;update&quot;&gt;æ›´æ–°çˆ¶çº§ç»„ä»¶&lt;&#x2F;button&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import &#123;<br>  defineComponent,<br>  ref,<br>  toRefs,<br>  reactive,<br>&#125; from &#39;vue&#39;;<br>import HelloWorld from &#39;.&#x2F;components&#x2F;HelloWorld.vue&#39;;<br><br>export default defineComponent(&#123;<br>  name: &#39;App&#39;,<br>  setup() &#123;<br>    &#x2F;&#x2F; ä½¿ç”¨reactiveå®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®<br>    const info &#x3D; reactive(&#123;  <br>      name: &#39;mz&#39;,<br>      age: 24,<br>    &#125;);<br>    &#x2F;&#x2F; å°†reactiveå¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªref<br>      <br>    const &#123; name, age &#125; &#x3D; toRefs(info);<br>    const update &#x3D; () &#x3D;&gt; &#123;<br>      console.log(info);  &#x2F;&#x2F; ä¿®æ”¹ref.valueå‰ï¼Œè§‚å¯Ÿinfo<br>      name.value +&#x3D; &#39;â­&#39;;<br>      age.value +&#x3D; 1;<br>      console.log(name.value, age.value); <br>      console.log(info); &#x2F;&#x2F; ä¿®æ”¹ref.valueåï¼Œè§‚å¯Ÿinfo<br>    &#125;;<br>    return &#123;<br>      age,<br>      name,<br>      update,<br>    &#125;;<br>  &#125;,<br>&#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<p><strong>äºŒã€toRef</strong></p>
<p><code>toRef</code>å’Œ<code>toRefs</code>ä½œç”¨ç›¸åŒï¼Œåªä¸è¿‡æ˜¯åˆ›å»ºreactiveä»£ç†çš„æŒ‡å®šå±æ€§çš„refå¯¹è±¡ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> info = reactive(&#123;<br>    name: <span class="hljs-string">&#x27;mz&#x27;</span>,<br>    age: <span class="hljs-number">24</span>,<br>&#125;)<br><br><span class="hljs-keyword">const</span> &#123;name, age&#125; = toRefs(info); <span class="hljs-comment">// toRefs</span><br><span class="hljs-keyword">const</span> nameRef = toRef(info, <span class="hljs-string">&#x27;name&#x27;</span>); <span class="hljs-comment">// toRef</span><br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>ä¸toRefsä¸€æ ·ï¼Œä¿®æ”¹ç”±toRefç”Ÿæˆçš„refå¯¹è±¡çš„valueå±æ€§ï¼Œä¼šåŒæ—¶ä¿®æ”¹åŸreactiveä»£ç†çš„targetçš„ç›¸åº”å±æ€§å€¼ã€‚</p>
</blockquote>
<h3 id="computed-è®¡ç®—å±æ€§"><a href="#computed-è®¡ç®—å±æ€§" class="headerlink" title="computed è®¡ç®—å±æ€§"></a>computed è®¡ç®—å±æ€§</h3><p><code>computed</code>ä¹Ÿæ˜¯Vue3 Composition APIçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…è®¸ä¼ å…¥ä¸€ä¸ªgetteræˆ–ä¸€ç»„getter/setterã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>    import &#123; defineComponent, computed &#125; from &#39;vue&#39;;<br>	export default defineComponent(&#123;<br>      setup () &#123;<br>        const user &#x3D; reactive(&#123;<br>          firstName: &#39;A&#39;,<br>          lastName: &#39;B&#39;<br>        &#125;)<br><br>        &#x2F;&#x2F; åªæœ‰getterçš„è®¡ç®—å±æ€§<br>        const fullName1 &#x3D; computed(() &#x3D;&gt; &#123;<br>          console.log(&#39;fullName1&#39;)<br>          return user.firstName + &#39;-&#39; + user.lastName<br>        &#125;)<br><br>        &#x2F;&#x2F; æœ‰getterä¸setterçš„è®¡ç®—å±æ€§<br>        const fullName2 &#x3D; computed(&#123;<br>          get () &#123;<br>            console.log(&#39;fullName2 get&#39;)<br>            return user.firstName + &#39;-&#39; + user.lastName<br>          &#125;,<br><br>          set (value: string) &#123;<br>            console.log(&#39;fullName2 set&#39;)<br>            const names &#x3D; value.split(&#39;-&#39;)<br>            user.firstName &#x3D; names[0]<br>            user.lastName &#x3D; names[1]<br>          &#125;<br>        &#125;)<br>    &#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="watchEffect-å’Œ-watch-ç›‘è§†"><a href="#watchEffect-å’Œ-watch-ç›‘è§†" class="headerlink" title="watchEffect å’Œ watch ç›‘è§†"></a>watchEffect å’Œ watch ç›‘è§†</h3><h4 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h4><p><a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/reactivity-computed-watchers.html#watcheffect">é“¾æ¥</a></p>
<h4 id="watchç›‘å¬å•ä¸ªæ•°æ®"><a href="#watchç›‘å¬å•ä¸ªæ•°æ®" class="headerlink" title="watchç›‘å¬å•ä¸ªæ•°æ®"></a>watchç›‘å¬å•ä¸ªæ•°æ®</h4><p>ä¾¦å¬å™¨æ•°æ®æºå¯ä»¥æ˜¯è¿”å›å€¼çš„ getter å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ˜¯ <code>ref</code>ï¼š</p>
<ol>
<li><p>é¦–å…ˆå¼•å…¥ watch ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; ..., watch &#125; <span class="hljs-keyword">from</span> vue<br></code></pre></td></tr></table></figure></li>
<li><p>å‡½æ•°å¼è°ƒç”¨ï¼Œä¼ å…¥å‚æ•°ï¼š</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>target / getter</code>ï¼Œå¯ä»¥ä¸ºä¸€ä¸ªrefå¯¹è±¡ã€reactiveå¯¹è±¡æˆ–è€…æ˜¯ä¸€ä¸ªè¿”å›æŸä¸ªå€¼çš„getterå‡½æ•°ã€‚</p>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼š<code>(newVal, oldVal) =&gt; &#123;...&#125;</code>ï¼Œä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ï¼Œç”¨äºå¤„ç†newValå’ŒoldValçš„é€»è¾‘ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š<code>option</code>ï¼Œå¯é€‰çš„é…ç½®ã€‚deepå­—æ®µæŒ‡å®šæ˜¯å¦æ·±å±‚ç›‘è§†ï¼Œé»˜è®¤ä¸ºfalseï¼Œåªè·Ÿè¸ªä¸€å±‚å±æ€§çš„å˜åŒ–ï¼› immediateå­—æ®µæŒ‡å®šæ˜¯å¦åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡å›è°ƒï¼Œé»˜è®¤ä¸ºfalseã€‚</p>
<blockquote>
<p> targetå¯ä»¥ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><p>refå¯¹è±¡</p>
</li>
<li><p>reactiveå¯¹è±¡</p>
</li>
<li><p>getterå‡½æ•°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> info1 = reactive(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mz&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span> &#125;);<br><span class="hljs-keyword">let</span> info2 = ref(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mz&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span> &#125;);<br><span class="hljs-keyword">let</span> info3 = ref(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mz&#x27;</span>, <span class="hljs-attr">wife</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ley&#x27;</span> &#125; &#125;);<br>watch(<span class="hljs-function">() =&gt;</span> info1.name, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(newVal));<br>watch(<span class="hljs-function">() =&gt;</span> info2.value.name, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(newVal));<br>watch(<span class="hljs-function">() =&gt;</span> info3.value.wife, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(newVal), &#123; <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> &#125;);<br></code></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script lang&#x3D;&quot;ts&quot;&gt;<br><br>import &#123;<br>  defineComponent,<br>  ref,<br>  watch,<br>&#125; from &#39;vue&#39;;<br><br>export default defineComponent(&#123;<br>  name: &#39;HelloWorld&#39;,<br><br>  setup() &#123;<br>    const mz &#x3D; &#123;<br>      name: &#39;mz&#39;,<br>      age: 24,<br>      info: &#123;<br>        id: &#39;19970314&#39;,<br>        home: &#39;nj&#39;,<br>      &#125;,<br>    &#125;;<br>    let ley &#x3D; &#123;<br>      name: &#39;ley&#39;,<br>      age: 25,<br>      info: &#123;<br>        id: &#39;19960121&#39;,<br>        home: &#39;nanyang&#39;,<br>      &#125;,<br>    &#125;;<br><br>    let user &#x3D; ref(mz);<br><br>    const replace &#x3D; () &#x3D;&gt; &#123;<br>      user.value &#x3D; ley;<br>    &#125;;<br><br>    const update &#x3D; () &#x3D;&gt; &#123;<br>      user.value.info.id +&#x3D; &#39;.&#39;;<br>    &#125;;<br><br>    watch(user, (newVal, oldVal, validator) &#x3D;&gt; &#123;<br>      console.log(&#39;watch user&#39;);<br>      console.log(&#39;newVal:&#39;, newVal);<br>      console.log(&#39;oldVal&#39;, oldVal);<br>      console.log(validator);<br>    &#125;, &#123;<br>      deep: true,<br>    &#125;);<br><br>    return &#123;<br>      user,<br>      replace,<br>      update,<br>    &#125;;<br>  &#125;,<br>&#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>




<h4 id="watchç›‘å¬å¤šä¸ªæ•°æ®æº"><a href="#watchç›‘å¬å¤šä¸ªæ•°æ®æº" class="headerlink" title="watchç›‘å¬å¤šä¸ªæ•°æ®æº"></a>watchç›‘å¬å¤šä¸ªæ•°æ®æº</h4><p>Vue3ä¸­çš„watchè¿˜å¯ä»¥ä½¿ç”¨æ•°ç»„åŒæ—¶ä¾¦å¬å¤šä¸ªæºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">watch([fooRef, barRef], <span class="hljs-function">(<span class="hljs-params">[foo, bar], [prevFoo, prevBar]</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">/* ... */</span><br>&#125;)<br></code></pre></td></tr></table></figure>


<h4 id="watchå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°"><a href="#watchå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°" class="headerlink" title="watchå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°"></a>watchå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°</h4><p><code>watch</code> ä¸ <a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/reactivity-computed-watchers.html#watcheffect"><code>watchEffect</code></a>å…±äº«<a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/reactivity-computed-watchers.html#%E5%81%9C%E6%AD%A2%E4%BE%A6%E5%90%AC">åœæ­¢ä¾¦å¬</a>ï¼Œ<a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/reactivity-computed-watchers.html#%E6%B8%85%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8">æ¸…é™¤å‰¯ä½œç”¨</a> (ç›¸åº”åœ° <code>onInvalidate</code> ä¼šä½œä¸ºå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥)ã€<a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/reactivity-computed-watchers.html#%E5%89%AF%E4%BD%9C%E7%94%A8%E5%88%B7%E6%96%B0%E6%97%B6%E6%9C%BA">å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº</a>å’Œ<a target="_blank" rel="noopener" href="https://vue3js.cn/docs/zh/guide/reactivity-computed-watchers.html#%E4%BE%A6%E5%90%AC%E5%99%A8%E8%B0%83%E8%AF%95">ä¾¦å¬å™¨è°ƒè¯•</a>è¡Œä¸ºã€‚</p>
<h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­"></a>ç”Ÿå‘½å‘¨æœŸé’©å­</h3><h4 id="Vue3ä¸­çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Vue3ä¸­çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Vue3ä¸­çš„ç”Ÿå‘½å‘¨æœŸ"></a>Vue3ä¸­çš„ç”Ÿå‘½å‘¨æœŸ</h4><table>
<thead>
<tr>
<th>é€‰é¡¹å¼ API</th>
<th>Hook inside <code>setup</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>beforeCreate</code></td>
<td>Not needed*</td>
</tr>
<tr>
<td><code>created</code></td>
<td>Not needed*</td>
</tr>
<tr>
<td><code>beforeMount</code></td>
<td><code>onBeforeMount</code></td>
</tr>
<tr>
<td><code>mounted</code></td>
<td><code>onMounted</code></td>
</tr>
<tr>
<td><code>beforeUpdate</code></td>
<td><code>onBeforeUpdate</code></td>
</tr>
<tr>
<td><code>updated</code></td>
<td><code>onUpdated</code></td>
</tr>
<tr>
<td><code>beforeUnmount</code></td>
<td><code>onBeforeUnmount</code></td>
</tr>
<tr>
<td><code>unmounted</code></td>
<td><code>onUnmounted</code></td>
</tr>
<tr>
<td><code>errorCaptured</code></td>
<td><code>onErrorCaptured</code></td>
</tr>
<tr>
<td><code>renderTracked</code></td>
<td><code>onRenderTracked</code></td>
</tr>
<tr>
<td><code>renderTriggered</code></td>
<td><code>onRenderTriggered</code></td>
</tr>
</tbody></table>
<p><strong>ç›¸å¯¹äºVue2ï¼Œä¸¤ä¸ªæ”¹åäº†çš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ul>
<li><code>beforeDestroy</code> -&gt; <code>onBeforeUnmount</code></li>
<li><code>destroyed</code> -&gt; <code>onUnmounted</code></li>
</ul>
<p><strong>æ–°å¢çš„é’©å­å‡½æ•°</strong></p>
<p>Vue3æ–°å¢ä»¥ä¸‹è°ƒè¯•é’©å­å‡½æ•°ï¼š</p>
<ul>
<li><code>onRenderTracked</code></li>
<li><code>onRenderTriggered</code></li>
</ul>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„ï¼š</strong></p>
<ol>
<li><p>åœ¨Vue3ä¸­ä»ç„¶å¯ä»¥åƒä½¿ç”¨optionsé£æ ¼å®šä¹‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆå°½ç®¡å·²ç»ä¸æ¨èè¿™æ ·åšï¼‰ï¼Œä½†æ˜¯Vue2ä¸­çš„<code>beforeDestroy</code>å’Œ<code>destroyed</code>é’©å­å·²ç»åˆ†åˆ«æ”¹åä¸º<code>onBeforeUnmount</code>å’Œ<code>onUnmounted</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">beforeCreate</span>(<span class="hljs-params"></span>)</span> &#123;<br>    ...<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>    ...<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>å¯ä»¥åŒæ—¶ä½¿ç”¨Composition APIé£æ ¼ä»¥åŠOptionsé£æ ¼æ¥ä¸ºç»„ä»¶æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œå¤„äºåŒä¸€ç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå‡½æ•°ï¼Œåœ¨setupä¸­å®šä¹‰çš„ä¼šä¼˜å…ˆæŒ‰é¡ºåºæ‰§è¡Œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">beforeCreate</span>(<span class="hljs-params"></span>)</span> &#123;<br>    ...<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>    ...<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <br>&#125;<br><span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>    onMounted(cb1);<br>    onMounted(cb2);<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
</ol>
</blockquote>
<h4 id="ç»„åˆAPIé£æ ¼çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ³¨å†Œ"><a href="#ç»„åˆAPIé£æ ¼çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ³¨å†Œ" class="headerlink" title="ç»„åˆAPIé£æ ¼çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ³¨å†Œ"></a>ç»„åˆAPIé£æ ¼çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ³¨å†Œ</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<br>  defineComponent,<br>  ref,<br>  <span class="hljs-comment">// ä»¥ä¸‹ä¸ºä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸé’©å­</span><br>  onBeforeMount,<br>  onMounted,<br>  onBeforeUpdate,<br>  onUpdated,<br>  onBeforeUnmount,<br>  onUnmounted,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineComponent(&#123;<br>    <span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;setupä¹Ÿæ˜¯ä¸€ä¸ªé’©å­&#x27;</span>);<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;å®šä¹‰æ•°æ®ä¹‹å‰&#x27;</span>);<br>        <span class="hljs-keyword">const</span> data = ref(<span class="hljs-string">&#x27;foo&#x27;</span>);<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;å®šä¹‰æ•°æ®ä¹‹å&#x27;</span>);<br>        <span class="hljs-comment">// ğŸ‘‡ å®šä¹‰å…¶ä»–ç”Ÿå‘½å‘¨æœŸé’©å­</span><br>        <span class="hljs-comment">// â—  å¯ä»¥ä¸ºåŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ·»åŠ å¤šä¸ªå›è°ƒã€‚</span><br>        onBeforeMount(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onBeforeMount11111&#x27;</span>));<br>        onBeforeMount(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onBeforeMount22222&#x27;</span>));<br>        <br>        onMounted(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onMounted&#x27;</span>));<br>        onBeforeUpdate(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onBeforeUpdate&#x27;</span>));<br>        onUpdated(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onUpdated&#x27;</span>));<br>        onBeforeUnmount(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onBeforeUnmount&#x27;</span>));<br>        onUnmounted(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;child onUnmounted&#x27;</span>));<br>        <br>        <span class="hljs-keyword">return</span> &#123;<br>            data,<br>        &#125;<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>




<h3 id="è‡ªå®šä¹‰hookï¼ˆç»„åˆå¼å‡½æ•°ï¼‰"><a href="#è‡ªå®šä¹‰hookï¼ˆç»„åˆå¼å‡½æ•°ï¼‰" class="headerlink" title="è‡ªå®šä¹‰hookï¼ˆç»„åˆå¼å‡½æ•°ï¼‰"></a>è‡ªå®šä¹‰hookï¼ˆç»„åˆå¼å‡½æ•°ï¼‰</h3><p><strong>æ³¨æ„ï¼š</strong>Vue3ä¸­çš„è‡ªå®šä¹‰hookä¸æ˜¯ç±»ä¼¼äºç”Ÿå‘½å‘¨æœŸçš„æŠ€æœ¯ï¼Œè€Œæ˜¯ç±»ä¼¼äºVue2ä¸­çš„MixinæŠ€æœ¯ã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong>å°è£…å¯å¤ç”¨çš„åŠŸèƒ½å‡½æ•°ä¾›ç»„ä»¶ä½¿ç”¨ã€‚</p>
<h4 id="æ¡ˆä¾‹1"><a href="#æ¡ˆä¾‹1" class="headerlink" title="æ¡ˆä¾‹1"></a>æ¡ˆä¾‹1</h4><p>åŠŸèƒ½ï¼šæ”¶é›†ç”¨æˆ·é¼ æ ‡ç‚¹å‡»çš„é¡µé¢åæ ‡ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs typescript"># /hooks/useMousePosition.ts<br><span class="hljs-keyword">import</span> &#123;<br>  ref,<br>  Ref,<br>  onMounted,<br>  onUnmounted,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œæ”¶é›†ç”¨æˆ·é¼ æ ‡ç‚¹å‡»çš„é¡µé¢åæ ‡</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">interface</span> RefMousePosition &#123;<br>  x: Ref&lt;<span class="hljs-built_in">number</span>&gt;,<br>  y: Ref&lt;<span class="hljs-built_in">number</span>&gt;,<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useMousePosition</span>(<span class="hljs-params"></span>): <span class="hljs-title">RefMousePosition</span> </span>&#123;<br>  <span class="hljs-comment">// åˆå§‹åŒ–åæ ‡æ•°æ®</span><br>  <span class="hljs-keyword">const</span> x = ref(-<span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">const</span> y = ref(-<span class="hljs-number">1</span>);<br><br>  <span class="hljs-comment">// é¡µé¢ç‚¹å‡»äº‹ä»¶åæ ‡çš„å›è°ƒå‡½æ•°</span><br>  <span class="hljs-keyword">const</span> updatePosition = <span class="hljs-function">(<span class="hljs-params">e: MouseEvent</span>) =&gt;</span> &#123;<br>    x.value = e.pageX;<br>    y.value = e.pageY;<br>  &#125;;<br><br>  <span class="hljs-comment">// æŒ‚è½½åç»‘å®šç‚¹å‡»ç›‘å¬</span><br>  onMounted(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, updatePosition);<br>  &#125;);<br><br>  <span class="hljs-comment">// å¸è½½å‰è§£ç»‘ç‚¹å‡»ç›‘å¬</span><br>  onUnmounted(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">&#x27;click&#x27;</span>, updatePosition);<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123; x, y &#125;;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>  &lt;h2&gt;x: &#123;&#123;x&#125;&#125;, y: &#123;&#123;y&#125;&#125;&lt;&#x2F;h2&gt;<br>&lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br><br>import &#123;<br>  ref<br>&#125; from &quot;vue&quot;<br>&#x2F;* <br>åœ¨ç»„ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨è‡ªå®šä¹‰hook<br>è‡ªå®šä¹‰hookçš„ä½œç”¨ç±»ä¼¼äºvue2ä¸­çš„mixinæŠ€æœ¯<br>è‡ªå®šä¹‰Hookçš„ä¼˜åŠ¿: å¾ˆæ¸…æ¥šå¤ç”¨åŠŸèƒ½ä»£ç çš„æ¥æº, æ›´æ¸…æ¥šæ˜“æ‡‚<br>*&#x2F;<br>import useMousePosition from &#39;.&#x2F;hooks&#x2F;useMousePosition&#39;<br><br>export default &#123;<br>  setup() &#123;<br><br>    const &#123;x, y&#125; &#x3D; useMousePosition(); &#x2F;&#x2F; ğŸ‘ˆ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æŒ‚è½½ï¼Œè¿”å›ä¸¤ä¸ªå“åº”å¼æ•°æ®ã€‚<br><br>    return &#123;<br>      x,<br>      y,<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h4 id="æ¡ˆä¾‹2-1"><a href="#æ¡ˆä¾‹2-1" class="headerlink" title="æ¡ˆä¾‹2.1"></a>æ¡ˆä¾‹2.1</h4><p>åŠŸèƒ½ï¼šå°è£…å‘Ajaxè¯·æ±‚çš„hookå‡½æ•°ã€‚ä½¿ç”¨<code>reactive</code>å°è£…å“åº”ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs typescript"># hooks/useRequest.ts<br><span class="hljs-keyword">import</span> &#123;<br>  ref,<br>  Ref,<br>  UnwrapRef,<br>  reactive,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ä½¿ç”¨axioså‘é€å¼‚æ­¥ajaxè¯·æ±‚</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å®šä¹‰å‘å¤–æš´éœ²å“åº”çš„æ¥å£ï¼ˆä¸€ä¸ªå“åº”å¼æ³›å‹æ¥å£ï¼Œresultä¸ºæ³›å‹æˆå‘˜ï¼‰</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">interface</span> ReactiveResponse&lt;T&gt; &#123;<br>  result: T | <span class="hljs-literal">null</span>,<br>  loading: <span class="hljs-built_in">boolean</span>,<br>  errorMsg: <span class="hljs-built_in">string</span>,<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useUrlLoader</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">UnwrapRef</span>&lt;<span class="hljs-title">ReactiveResponse</span>&lt;<span class="hljs-title">T</span>&gt;&gt; </span>&#123;<br>  <span class="hljs-keyword">let</span> reactiveResponse = reactive&lt;ReactiveResponse&lt;T&gt;&gt;(&#123;<br>    result: <span class="hljs-literal">null</span>,<br>    loading: <span class="hljs-literal">true</span>,<br>    errorMsg: <span class="hljs-string">&#x27;&#x27;</span>,<br>  &#125;);<br><br>  axios.get(url)<br>    .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;<br>      reactiveResponse.loading = <span class="hljs-literal">false</span>;<br>      reactiveResponse.result = response.data;<br>    &#125;)<br>    .catch(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>      reactiveResponse.loading = <span class="hljs-literal">false</span>;<br>      reactiveResponse.errorMsg = e.message || <span class="hljs-string">&#x27;æœªçŸ¥é”™è¯¯&#x27;</span>;<br>    &#125;);<br><br>  <span class="hljs-keyword">return</span> reactiveResponse;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;hello world&lt;&#x2F;h2&gt;<br>  &lt;div&gt;&#123;&#123;responceUsers.result&#125;&#125;&lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>    import &#123; defineComponent&#125; from &#39;vue&#39;;<br>    defineComponent(&#123;<br>      name: &#39;HelloWorld&#39;,<br>      setup() &#123;<br>        interface User &#123;<br>          id: string,<br>          name: string,<br>          age: number<br>        &#125;<br><br>        let responceUsers &#x3D; useUrlLoader&lt;User[]&gt;(&#39;&#x2F;mock&#x2F;users.json&#39;);<br><br>        if (responceUsers.result !&#x3D;&#x3D; null) &#123;<br>          console.log(responceUsers.result); &#x2F;&#x2F; â­ useUrlLoaderåˆå§‹åŒ–æ—¶å°†resultèµ‹å€¼ä¸ºnull<br>        &#125;                                    &#x2F;&#x2F; â­ åªæœ‰åœ¨onBeforeUpdateä¸­æ‰èƒ½è®¿é—®åˆ°æœ€æ–°çš„result<br><br>        return &#123;<br>          responceUsers,<br>        &#125;;<br>      &#125;,<br>    &#125;);   <br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h4 id="æ¡ˆä¾‹2-2"><a href="#æ¡ˆä¾‹2-2" class="headerlink" title="æ¡ˆä¾‹2.2"></a>æ¡ˆä¾‹2.2</h4><p>åŠŸèƒ½ï¼šå°è£…å‘Ajaxè¯·æ±‚çš„hookå‡½æ•°ã€‚ä½¿ç”¨<code>ref</code>å°è£…å“åº”ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<br>  ref,<br>  Ref,<br>  UnwrapRef,<br>  <span class="hljs-comment">// reactive,</span><br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å®šä¹‰å‘å¤–æš´éœ²å“åº”çš„æ¥å£ã€‚</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">interface</span> RefResponse&lt;T&gt; &#123;<br>  result: Ref&lt;UnwrapRef&lt;T&gt; | <span class="hljs-literal">null</span>&gt;;<br>  loading: Ref&lt;<span class="hljs-built_in">boolean</span>&gt;;<br>  errorMsg: Ref&lt;<span class="hljs-built_in">string</span>&gt;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useUrlLoader</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">RefResponse</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br><br>  <span class="hljs-keyword">const</span> result = ref&lt;T | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);<br>  <span class="hljs-keyword">const</span> loading = ref(<span class="hljs-literal">true</span>);<br>  <span class="hljs-keyword">const</span> errorMsg = ref(<span class="hljs-string">&#x27;&#x27;</span>);<br><br>  axios.get(url)<br>    .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;<br>      loading.value = <span class="hljs-literal">false</span>;<br>      result.value = response.data;<br>    &#125;)<br>    .catch(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>      loading.value = <span class="hljs-literal">false</span>;<br>      errorMsg.value = e.message || <span class="hljs-string">&#x27;æœªçŸ¥é”™è¯¯&#x27;</span>;<br>    &#125;);<br><br>  <span class="hljs-keyword">return</span> &#123;<br>    loading,<br>    result,<br>    errorMsg,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>




<h2 id="Composition-API-å…¶ä»–å†…å®¹"><a href="#Composition-API-å…¶ä»–å†…å®¹" class="headerlink" title="Composition API å…¶ä»–å†…å®¹"></a>Composition API å…¶ä»–å†…å®¹</h2><h3 id="shallowReactive-ä¸-shallowRef"><a href="#shallowReactive-ä¸-shallowRef" class="headerlink" title="shallowReactive ä¸ shallowRef"></a>shallowReactive ä¸ shallowRef</h3><ul>
<li><code>shallowReactive</code> : åªå¤„ç†äº†å¯¹è±¡å†…æœ€å¤–å±‚å±æ€§çš„å“åº”å¼(ä¹Ÿå°±æ˜¯æµ…å“åº”å¼)</li>
<li><code>shallowRef</code>: åªå¤„ç†äº†valueçš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„reactiveå¤„ç†</li>
<li><strong>ä»€ä¹ˆæ—¶å€™ç”¨æµ…å“åº”å¼å‘¢?</strong><ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨refå’Œreactiveå³å¯</li>
<li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®, ç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– ===&gt; shallowReactive</li>
<li>å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®, åé¢ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ ===&gt; shallowRef</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;App&lt;&#x2F;h2&gt;<br><br>  &lt;h3&gt;m1: &#123;&#123;m1&#125;&#125;&lt;&#x2F;h3&gt;<br>  &lt;h3&gt;m2: &#123;&#123;m2&#125;&#125;&lt;&#x2F;h3&gt;<br>  &lt;h3&gt;m3: &#123;&#123;m3&#125;&#125;&lt;&#x2F;h3&gt;<br>  &lt;h3&gt;m4: &#123;&#123;m4&#125;&#125;&lt;&#x2F;h3&gt;<br><br>  &lt;button @click&#x3D;&quot;update&quot;&gt;æ›´æ–°&lt;&#x2F;button&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import &#123; reactive, ref, shallowReactive, shallowRef &#125; from &#39;vue&#39;<br>&#x2F;* <br>shallowReactiveä¸shallowRef<br>  shallowReactive: åªå¤„ç†äº†å¯¹è±¡å†…æœ€å¤–å±‚å±æ€§çš„å“åº”å¼(ä¹Ÿå°±æ˜¯æµ…å“åº”å¼)<br>  shallowRef: åªå¤„ç†äº†valueçš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„reactiveå¤„ç†<br>æ€»ç»“:<br>  reactiveä¸refå®ç°çš„æ˜¯æ·±åº¦å“åº”å¼, è€ŒshallowReactiveä¸shallowRefæ˜¯æµ…å“åº”å¼<br>  ä»€ä¹ˆæ—¶å€™ç”¨æµ…å“åº”å¼å‘¢?<br>    ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨refå’Œreactiveå³å¯,<br>    å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®, ç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– &#x3D;&#x3D;&#x3D;&gt; shallowReactive<br>    å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®, åé¢ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡æ¥æ›¿æ¢ &#x3D;&#x3D;&#x3D;&gt; shallowRef<br>*&#x2F;<br><br>export default &#123;<br><br>  setup () &#123;<br><br>    const m1 &#x3D; reactive(&#123;a: 1, b: &#123;c: 2&#125;&#125;)<br>    const m2 &#x3D; shallowReactive(&#123;a: 1, b: &#123;c: 2&#125;&#125;)<br><br>    const m3 &#x3D; ref(&#123;a: 1, b: &#123;c: 2&#125;&#125;)<br>    const m4 &#x3D; shallowRef(&#123;a: 1, b: &#123;c: 2&#125;&#125;)<br><br>    const update &#x3D; () &#x3D;&gt; &#123;<br>      &#x2F;&#x2F; m1.b.c +&#x3D; 1<br>      &#x2F;&#x2F; m2.b.c +&#x3D; 1<br><br>      &#x2F;&#x2F; m3.value.a +&#x3D; 1<br>      m4.value.a +&#x3D; 1<br>    &#125;<br><br>    return &#123;<br>      m1,<br>      m2,<br>      m3,<br>      m4,<br>      update,<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h3 id="readonly-å’Œ-shallowReadonly"><a href="#readonly-å’Œ-shallowReadonly" class="headerlink" title="readonly å’Œ shallowReadonly"></a>readonly å’Œ shallowReadonly</h3><p><strong>ä¸€ã€readonly</strong></p>
<p><code>readonly</code>æ˜¯ä¸€ä¸ªç»„åˆAPIä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå…è®¸ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¼ å…¥æ•°æ®çš„åªè¯»ä»£ç†ã€‚</p>
<blockquote>
<p>readonlyå®šä¹‰çš„åªè¯»ä»£ç†æ˜¯æ·±å±‚æ¬¡çš„ã€‚</p>
</blockquote>
<p>å‚æ•°å¯ä»¥æ˜¯ï¼š</p>
<ol>
<li>refå¯¹è±¡ï¼Œæ­¤æ—¶refå¯¹è±¡çš„valueå±æ€§å˜ä¸ºåªè¯»ï¼Œä¸”å¦‚æœvalueä¸ºProxyï¼Œé‚£ä¹ˆè¯¥Proxyå„å±‚åµŒå¥—å±æ€§ä¹Ÿå˜ä¸ºåªè¯»ã€‚</li>
<li>reactiveå¯¹è±¡ï¼Œæ­¤æ—¶reactiveå¯¹è±¡çš„å„å±‚åµŒå¥—å±æ€§éƒ½ä¸ºåªè¯»ã€‚</li>
<li>æ™®é€šJSå¯¹è±¡ï¼Œæ­¤æ—¶è¯¥å¯¹è±¡çš„å„å±‚åµŒå¥—å±æ€§éƒ½ä¸ºåªè¯»ã€‚</li>
</ol>
<p><strong>äºŒã€shallowReadonly</strong></p>
<p><code>shallowReadonly</code>å‡½æ•°çš„ç”¨æ³•å’Œ<code>readonly</code>å‡½æ•°ä¸€æ ·ï¼Œä½†è¿”å›çš„æ˜¯ä¸€ä¸ªæµ…åªè¯»ä»£ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;App&lt;&#x2F;h2&gt;<br>  &lt;h3&gt;&#123;&#123;state&#125;&#125;&lt;&#x2F;h3&gt;<br>  &lt;button @click&#x3D;&quot;update&quot;&gt;æ›´æ–°&lt;&#x2F;button&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import &#123; reactive, readonly, shallowReadonly &#125; from &#39;vue&#39;<br><br>export default &#123;<br><br>  setup () &#123;<br>      <br>    const state &#x3D; reactive(&#123;<br>      a: 1,<br>      b: &#123;<br>        c: 2<br>      &#125;<br>    &#125;)<br><br>    const rState1 &#x3D; readonly(state);<br>    const rState2 &#x3D; shallowReadonly(state);<br><br>    const update &#x3D; () &#x3D;&gt; &#123;<br>      rState1.a++ # error<br>      rState1.b.c++ # error<br><br>      rState2.a++ # error<br>      rState2.b.c++  &#x2F;&#x2F; ok<br>    &#125;<br>    <br>    return &#123;<br>      state,<br>      update<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h3 id="toRaw-å’Œ-markRaw"><a href="#toRaw-å’Œ-markRaw" class="headerlink" title="toRaw å’Œ markRaw"></a>toRaw å’Œ markRaw</h3><p><strong>ä¸€ã€toRaw</strong></p>
<p><code>toRaw</code>å‡½æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ªreactiveå¯¹è±¡æˆ–è€…ä¸€ä¸ªreadonlyä»£ç†ï¼Œç„¶åè¿”å›è¯¥ä»£ç†å¯¹è±¡æ‰€ä»£ç†çš„targetã€‚</p>
<p>ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ç§è¿˜åŸæ“ä½œï¼‰</p>
<ol>
<li><p>ä¼ å…¥reactiveä»£ç†ï¼Œè¿”å›targetåï¼Œ<strong>å¯ä»¥å¯¹targetè¿›è¡Œè¯»å†™ï¼Œä¸ä¼šè§¦å‘æ›´æ–°è§†å›¾</strong>ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; toRaw, reactive, &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">const</span> info = &#123;<br>    name: <span class="hljs-string">&#x27;mz&#x27;</span>,<br>    age: <span class="hljs-number">24</span>,<br>&#125;;<br><br><span class="hljs-keyword">const</span> infoReactive = reactive(info);<br><br><span class="hljs-keyword">const</span> infoToRaw = toRaw(infoReactive);<br><br><span class="hljs-built_in">console</span>.log(infoToRaw === info); <span class="hljs-comment">//è¿”å› true  â­è¯´æ˜toRawå‡½æ•°è¿”å›çš„æ˜¯reactiveå¯¹è±¡ä»£ç†çš„åŸæ•°æ®</span><br><br><span class="hljs-keyword">const</span> update = <span class="hljs-function">() =&gt;</span> &#123;<br>    infoToRaw.name = <span class="hljs-string">&#x27;ley&#x27;</span>;<br>    <span class="hljs-built_in">console</span>.log(infoToRaw);<br>    <span class="hljs-built_in">console</span>.log(infoReactive);<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
</ol>
<ol start="2">
<li><p>ä¼ å…¥readonlyä»£ç†ï¼Œå¯ä»¥å¾—åˆ°targetã€‚</p>
<ul>
<li>å¦‚æœtargetæ˜¯ä¸€ä¸ªreactiveä»£ç†ï¼Œåˆ™è¿”å›æ·±å±‚æ¬¡çš„targetï¼Œå³è¿”å›reactiveä»£ç†çš„targetã€‚</li>
<li>å¦‚æœtargetæ˜¯ä¸€ä¸ªrefï¼Œåˆ™è¿”å›refã€‚</li>
<li>å¦‚æœtargetæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> &#123;<br>  <span class="hljs-keyword">const</span> info = &#123;<br>    name: <span class="hljs-string">&#x27;mz&#x27;</span>,<br>    age: <span class="hljs-number">24</span>,<br>    more: &#123;<br>      foo: <span class="hljs-string">&#x27;foo&#x27;</span>,<br>      bar: <span class="hljs-string">&#x27;bar&#x27;</span>,<br>    &#125;,<br>  &#125;;<br>   <br>  <span class="hljs-keyword">const</span> infoReactive = reactive(info);<br>   <br>  <span class="hljs-keyword">const</span> infoReadonly = <span class="hljs-keyword">readonly</span>(infoReactive);<br>   <br>  <span class="hljs-keyword">const</span> infoToRaw = toRaw(infoReadonly);<br>   <br>  <span class="hljs-keyword">const</span> test1 = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(infoToRaw);  <span class="hljs-comment">// ğŸ‘ˆ æ‰§è¡Œtest1æ—¶ï¼ŒinfoToRawçš„å€¼ä¸ºinfoï¼Œè€Œä¸æ˜¯infoReactiveã€‚</span><br>    <span class="hljs-built_in">console</span>.log(infoToRaw === info);<br>  &#125;;<br>    <br>  <span class="hljs-keyword">return</span> &#123;<br>      infoReactive,<br>      test1,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>




</li>
</ol>
<ol start="3">
<li>ä¼ å…¥å…¶ä»–ç±»å‹çš„å‚æ•°ï¼Œåˆ™è¿”å›è¯¥å‚æ•°æœ¬èº«ã€‚</li>
</ol>
<blockquote>
<p><strong>å°ç»“</strong></p>
<ol>
<li><p><code>toRaw</code>å‡½æ•°å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªreactiveä»£ç†æˆ–readonlyä»£ç†ï¼Œåˆ™è¿”å›ä»£ç†çš„targetã€‚å¦‚æœä»£ç†çš„targetä»ç„¶æ˜¯ä¸€ä¸ªreactiveä»£ç†æˆ–readonlyä»£ç†ï¼Œåˆ™è¿”å›æ·±å±‚çš„targetï¼Œç›´åˆ°targetä¸å†ä¸ºä¸€ä¸ªProxyä¸ºæ­¢ï¼Œå¹¶è¿”å›è¯¥targetã€‚</p>
</li>
<li><p>å¦‚æœ<code>toRaw</code>å‡½æ•°ä¼ å…¥çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªreactiveä»£ç†æˆ–readonlyä»£ç†ï¼Œåˆ™è¿”å›å€¼ä¸ºå‚æ•°æœ¬èº«ã€‚</p>
</li>
</ol>
</blockquote>
<p><strong>äºŒã€markRaw</strong></p>
<p><code>markRaw</code>å‡½æ•°ç”¨äºå¯¹ä¸€ä¸ª<strong>å¼•ç”¨ç±»å‹æ•°æ®</strong>ï¼ˆä¾‹å¦‚Plain Objectæˆ–æ•°ç»„ï¼‰è¿›è¡Œæ ‡è®°ï¼Œå½“è¿™ä¸ªæ•°æ®é€šè¿‡refã€reactiveå˜ä¸ºå“åº”å¼æ•°æ®ï¼Œæˆ–è€…å°†è¯¥å¼•ç”¨ç±»å‹æ•°æ®èµ‹å€¼ç»™refçš„valueæˆ–è€…reactiveä»£ç†å¯¹è±¡çš„æŸä¸ªå±æ€§æ—¶ï¼Œä¿®æ”¹ref.valueæˆ–è€…é€šè¿‡reactiveä»£ç†ä¿®æ”¹è¯¥æ•°æ®ï¼Œ<strong>ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°</strong>ï¼ˆè¢«æ ‡è®°çš„æ•°æ®ä¸ä¼šè¢«å“åº”å¼åŒ–ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;MarkRawTest&lt;&#x2F;h2&gt;<br>  &lt;div&gt;<br>    stateReactive1: &#123;&#123; stateReactive1 &#125;&#125;<br>  &lt;&#x2F;div&gt;<br>  &lt;button @click&#x3D;&quot;update1&quot;&gt;æ›´æ–°stateReactive1&lt;&#x2F;button&gt;<br>  &lt;div&gt;<br>    stateReactive2ï¼š&#123;&#123; stateReactive2 &#125;&#125;<br>  &lt;&#x2F;div&gt;<br>  &lt;button @click&#x3D;&quot;update2&quot;&gt;æ›´æ–°stateReactive2.friends&lt;&#x2F;button&gt;<br>  &lt;button @click&#x3D;&quot;update3&quot;&gt;stateReactive2.friendsæ–°å¢æœ‹å‹&lt;&#x2F;button&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&#39;ts&#39;&gt;<br>import &#123;<br>  defineComponent,<br>  reactive,<br>  markRaw,<br>&#125; from &#39;vue&#39;;<br><br>export default defineComponent(&#123;<br>  name: &#39;MarkRawTest&#39;,<br>  setup() &#123;<br>    const state1 &#x3D; &#123;<br>      name: &#39;mz&#39;,<br>      age: 24,<br>      friends: [&#123;<br>        name: &#39;sxl&#39;,<br>        age: 24,<br>      &#125;],<br>    &#125;;<br>    markRaw(state1);<br><br>    const stateReactive1 &#x3D; reactive(state1);<br>    const update1 &#x3D; () &#x3D;&gt; &#123;<br>      stateReactive1.name &#x3D; &#39;ley&#39;;<br>      console.log(stateReactive1);<br>    &#125;;<br><br>    const state2: &#123;<br>      name: string,<br>      age: number,<br>      friends: any[],<br>    &#125; &#x3D; &#123;<br>      name: &#39;mz&#39;,<br>      age: 24,<br>      friends: [],<br>    &#125;;<br>    const stateReactive2 &#x3D; reactive(state2);<br>    &#x2F;&#x2F; ç»™state2.friendsèµ‹æ–°å€¼ï¼Œæ–°å€¼å·²ç»ç”¨markRawæ ‡è®°<br>    const update2 &#x3D; () &#x3D;&gt; &#123;<br>      let friends &#x3D; [&#39;foo&#39;, &#39;bar&#39;];<br>      markRaw(friends); &#x2F;&#x2F; ğŸ‘ˆ æ ‡è®°<br>      stateReactive2.friends &#x3D; friends; &#x2F;&#x2F; ğŸ‘ˆ è¿™é‡Œä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œå› ä¸ºåŸæ¥çš„æ•°æ®ï¼ˆç©ºæ•°ç»„[]ï¼‰æ²¡æœ‰è¢«markRawæ ‡è®°<br>    &#125;;<br>    &#x2F;&#x2F; æ–°å¢ä¸€ä¸ªæœ‹å‹åå­—<br>    const update3 &#x3D; () &#x3D;&gt; &#123;<br>      stateReactive2.friends.push(&#39;xxx&#39;); &#x2F;&#x2F; æ ‡è®°äº†çš„æ•°æ®ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä½†æ•°æ®ç¡®å®ä¼šå‘ç”Ÿå˜åŒ–<br>      console.log(stateReactive2);<br>    &#125;;<br><br>    return &#123;<br>      stateReactive1,<br>      update1,<br>      stateReactive2,<br>      update2,<br>      update3,<br>    &#125;;<br>  &#125;,<br>&#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h3 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h3><p><code>customRef</code>ç”¨äºåˆ›å»ºè‡ªå®šä¹‰refï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è‡ªå®šä¹‰refè¿›è¡Œæ˜¾ç¤ºçš„è·Ÿè¸ªï¼ŒåŒæ—¶ä¿®æ”¹è‡ªå®šä¹‰refçš„valueæ—¶ï¼Œå¯ä»¥æ§åˆ¶è§†å›¾æ›´æ–°çš„æ—¶æœºã€‚</p>
<blockquote>
<p>å³è‡ªå®šä¹‰refå¯¹è±¡çš„ getter/setter æ˜¯ç”±å¼€å‘è€…é€šè¿‡customRefå®šä¹‰çš„ã€‚</p>
</blockquote>
<p>æ¡ˆä¾‹ï¼šä½¿ç”¨ customRef å®ç°é˜²æŠ–ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;App&lt;&#x2F;h2&gt;<br>  &lt;input v-model&#x3D;&quot;keyword&quot; placeholder&#x3D;&quot;æœç´¢å…³é”®å­—&quot;&#x2F;&gt;<br>  &lt;p&gt;&#123;&#123; keyword &#125;&#125;&lt;&#x2F;p&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>&#x2F;*<br>customRef:<br>  åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶<br><br>éœ€æ±‚: <br>  ä½¿ç”¨ customRef å®ç° debounce çš„ç¤ºä¾‹<br>*&#x2F;<br><br>import &#123;<br>  ref,<br>  customRef<br>&#125; from &#39;vue&#39;;<br><br>export default &#123;<br><br>  setup () &#123;<br>    const keyword &#x3D; useDebouncedRef(&#39;&#39;, 500)<br>    console.log(keyword)<br>    return &#123;<br>      keyword<br>    &#125;<br>  &#125;,<br>&#125;<br><br>&#x2F;* <br>å®ç°å‡½æ•°é˜²æŠ–çš„è‡ªå®šä¹‰ref<br>*&#x2F;<br>function useDebouncedRef&lt;T&gt;(value: T, delay &#x3D; 200) &#123;<br>  let timeout: number<br>  return customRef((track, trigger) &#x3D;&gt; &#123;<br>    return &#123;<br>      get() &#123;<br>        &#x2F;&#x2F; å‘Šè¯‰Vueè¿½è¸ªæ•°æ®<br>        track()<br>        return value<br>      &#125;,<br>      set(newValue: T) &#123;<br>        clearTimeout(timeout)<br>        timeout &#x3D; setTimeout(() &#x3D;&gt; &#123;<br>          value &#x3D; newValue<br>          &#x2F;&#x2F; å‘Šè¯‰Vueå»è§¦å‘ç•Œé¢æ›´æ–°<br>          trigger()<br>        &#125;, delay)<br>      &#125;<br>    &#125;<br>  &#125;)<br>&#125;<br><br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h3 id="provide-å’Œ-inject"><a href="#provide-å’Œ-inject" class="headerlink" title="provide å’Œ inject"></a>provide å’Œ inject</h3><p><code>provide</code>å’Œ <code>inject</code>æä¾›ä¾èµ–æ³¨å…¥ï¼ŒåŠŸèƒ½ç±»ä¼¼ Vue2.x çš„ <code>provide/inject</code>ï¼Œå®ç°è·¨å±‚çº§ç»„ä»¶(ç¥–å­™)é—´é€šä¿¡ã€‚</p>
<p>Vue3ä¸­çš„injectå’Œprovideæ¯”Vue2ä¸­æ›´åŠ å¥½ç”¨ã€‚</p>
<h4 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h4><p><strong>ä¸€ã€çˆ¶çº§ç»„ä»¶provideæ•°æ®ï¼ˆå“åº”å¼/éå“åº”å¼ï¼‰</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h1&gt;çˆ¶ç»„ä»¶&lt;&#x2F;h1&gt;<br>  &lt;p&gt;å½“å‰é¢œè‰²: &#123;&#123;color&#125;&#125;&lt;&#x2F;p&gt;<br>  &lt;button @click&#x3D;&quot;color&#x3D;&#39;red&#39;&quot;&gt;çº¢&lt;&#x2F;button&gt;<br>  &lt;button @click&#x3D;&quot;color&#x3D;&#39;yellow&#39;&quot;&gt;é»„&lt;&#x2F;button&gt;<br>  &lt;button @click&#x3D;&quot;color&#x3D;&#39;blue&#39;&quot;&gt;è“&lt;&#x2F;button&gt;<br>  <br>  &lt;hr&gt;<br>  &lt;Son &#x2F;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import &#123; provide, ref &#125; from &#39;vue&#39;<br><br><br>import Son from &#39;.&#x2F;Son.vue&#39;<br>export default &#123;<br>  name: &#39;ProvideInject&#39;,<br>  components: &#123;<br>    Son<br>  &#125;,<br>  setup() &#123;<br>    const color &#x3D; ref(&#39;red&#39;)<br>    provide(&#39;color&#39;, color)<br>    return &#123;<br>      color<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Vue2.xä¸­ï¼Œå¦‚æœå­å­™ç»„ä»¶è·å–åˆ°çš„injectæ³¨å…¥æ˜¯å“åº”å¼çš„ï¼Œåˆ™çˆ¶ç»„ä»¶provideçš„å†…å®¹å¿…é¡»å¼•ç”¨dataä¸­çš„æ•°æ®ã€‚</p>
</blockquote>
<p><strong>äºŒã€å­å­™ç»„ä»¶è·å–inject</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue"># å­™å­ç»„ä»¶<br>&lt;template&gt;<br>  &lt;h3 :style&#x3D;&quot;&#123;color&#125;&quot;&gt;å­™å­ç»„ä»¶: &#123;&#123;color&#125;&#125;&lt;&#x2F;h3&gt;<br>  <br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import &#123; inject &#125; from &#39;vue&#39;<br>export default &#123;<br>  name: &#39;GrandSon&#39;,<br>  setup() &#123;<br>    const color &#x3D; inject(&#39;color&#39;); &#x2F;&#x2F; è·å–ç¥–å…ˆç»„ä»¶å®ä¾‹ä¸­çš„æ³¨å…¥ï¼Œå¹¶ç”±setupè¿”å›ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨<br>    return &#123;<br>      color<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue"># å­çº§ç»„ä»¶<br>&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;h2&gt;å­ç»„ä»¶&lt;&#x2F;h2&gt;<br>    &lt;hr&gt;<br>    &lt;GrandSon &#x2F;&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import GrandSon from &#39;.&#x2F;GrandSon.vue&#39;<br>export default &#123;<br>  name: &#39;Son&#39;,<br>  components: &#123;<br>    GrandSon<br>  &#125;,<br>&#125;<br>&lt;&#x2F;script&gt;<br><br></code></pre></td></tr></table></figure>


<h4 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h4><ol>
<li>å®šä¹‰çˆ¶çº§ç»„ä»¶</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;<br>    Inject and Provide Test<br>  &lt;&#x2F;h2&gt;<br>  &lt;hr&gt;<br>  &lt;son-1&#x2F;&gt;<br>  &lt;hr&gt;<br>  &lt;son-2&#x2F;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>import &#123;<br>  defineComponent,<br>  provide,<br>  ref,<br>  reactive,<br>&#125; from &#39;vue&#39;;<br><br>import Son1 from &#39;.&#x2F;Son1.vue&#39;;<br>import Son2 from &#39;.&#x2F;Son2.vue&#39;;<br><br>export default defineComponent(&#123;<br>  name: &#39;ProvideInjectTest&#39;,<br>  components: &#123;<br>    Son1,<br>    Son2,<br>  &#125;,<br>  setup() &#123;<br>    provide(&#39;color&#39;, &#39;red&#39;);   &#x2F;&#x2F; æä¾›ä¸€ä¸ªéå“åº”å¼çš„åŸºæœ¬ç±»å‹æ•°æ®<br>    provide(&#39;colorRef&#39;, ref(&#39;red&#39;)); &#x2F;&#x2F; æä¾›ä¸€ä¸ªå“åº”å¼çš„åŸºæœ¬ç±»å‹æ•°æ®<br>    provide(&#39;style&#39;, &#123; color: &#39;red&#39; &#125;); &#x2F;&#x2F; æä¾›ä¸€ä¸ªéå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®<br>    provide(&#39;styleReactive&#39;, reactive(&#123; color: &#39;red&#39; &#125;)); &#x2F;&#x2F; æä¾›ä¸€ä¸ªå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®<br>    return &#123;&#125;;<br>  &#125;,<br>&#125;);<br><br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<ol start="2">
<li>è‡ªå®šhookï¼Œåœ¨å­ç»„ä»¶ä¸­è·å–injectï¼Œå¹¶å®šä¹‰ç›¸åŒçš„æ–¹æ³•</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; inject &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useColorTest</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> color = inject(<span class="hljs-string">&#x27;color&#x27;</span>);<br>  <span class="hljs-keyword">const</span> style: <span class="hljs-built_in">any</span> = inject(<span class="hljs-string">&#x27;style&#x27;</span>);<br>  <span class="hljs-keyword">const</span> colorRef: <span class="hljs-built_in">any</span> = inject(<span class="hljs-string">&#x27;colorRef&#x27;</span>);<br>  <span class="hljs-keyword">const</span> styleReactive: <span class="hljs-built_in">any</span> = inject(<span class="hljs-string">&#x27;styleReactive&#x27;</span>);<br><br>  <span class="hljs-keyword">const</span> updateColor = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (color === <span class="hljs-string">&#x27;red&#x27;</span>) &#123;<br>      color = <span class="hljs-string">&#x27;black&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      color = <span class="hljs-string">&#x27;red&#x27;</span>;<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> updateStyle = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (style.color === <span class="hljs-string">&#x27;red&#x27;</span>) &#123;<br>      style.color = <span class="hljs-string">&#x27;black&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      style.color = <span class="hljs-string">&#x27;red&#x27;</span>;<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> updateColorRef = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (colorRef.value === <span class="hljs-string">&#x27;red&#x27;</span>) &#123;<br>      colorRef.value = <span class="hljs-string">&#x27;black&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      colorRef.value = <span class="hljs-string">&#x27;red&#x27;</span>;<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> updateStyleReactive = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (styleReactive.color === <span class="hljs-string">&#x27;red&#x27;</span>) &#123;<br>      styleReactive.color = <span class="hljs-string">&#x27;black&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      styleReactive.color = <span class="hljs-string">&#x27;red&#x27;</span>;<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> &#123;<br>    color,<br>    style,<br>    colorRef,<br>    styleReactive,<br>    updateColor,<br>    updateColorRef,<br>    updateStyle,<br>    updateStyleReactive,<br>  &#125;;<br>&#125;<br><br></code></pre></td></tr></table></figure>


<ol start="3">
<li>å®šä¹‰å­ç»„ä»¶1</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;container&quot; :style&#x3D;&quot;&#123; color &#125;&quot;&gt;<br>    Son1<br>  &lt;&#x2F;div&gt;<br>  &lt;ul&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateColor&quot;&gt;updateColor&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;&#123; color &#125;&quot;&gt;&#123;&#123; color &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateColorRef&quot;&gt;updateColorRef&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;&#123; color: colorRef &#125;&quot;&gt;&#123;&#123; colorRef &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateStyle&quot;&gt;updateStyle&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;style&quot;&gt;&#123;&#123; style &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateStyleReactive&quot;&gt;updateStyleReactive&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;styleReactive&quot;&gt;&#123;&#123; styleReactive &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>  &lt;&#x2F;ul&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import useColorTest from &#39;..&#x2F;hooks&#x2F;useColorTest&#39;;<br><br>export default &#123;<br>  name: &#39;Son1&#39;,<br>  setup() &#123;<br>    return &#123;<br>      ...useColorTest(),<br>    &#125;;<br>  &#125;,<br>&#125;;<br>&lt;&#x2F;script&gt;<br><br>&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;<br>&lt;&#x2F;style&gt;<br><br></code></pre></td></tr></table></figure>


<ol start="4">
<li>å®šä¹‰å­ç»„ä»¶2</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;container&quot; :style&#x3D;&quot;&#123; color &#125;&quot;&gt;<br>    Son2<br>  &lt;&#x2F;div&gt;<br>  &lt;ul&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateColor&quot;&gt;updateColor&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;&#123; color &#125;&quot;&gt;&#123;&#123; color &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateColorRef&quot;&gt;updateColorRef&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;&#123; color: colorRef &#125;&quot;&gt;&#123;&#123; colorRef &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateStyle&quot;&gt;updateStyle&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;style&quot;&gt;&#123;&#123; style &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>    &lt;li&gt;<br>      &lt;button @click&#x3D;&quot;updateStyleReactive&quot;&gt;updateStyleReactive&lt;&#x2F;button&gt;<br>      &lt;span :style&#x3D;&quot;styleReactive&quot;&gt;&#123;&#123; styleReactive &#125;&#125;&lt;&#x2F;span&gt;<br>    &lt;&#x2F;li&gt;<br>  &lt;&#x2F;ul&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import useColorTest from &#39;..&#x2F;hooks&#x2F;useColorTest&#39;;<br><br>export default &#123;<br>  name: &#39;Son2&#39;,<br>  setup() &#123;<br>    return &#123;<br>      ...useColorTest(),<br>    &#125;;<br>  &#125;,<br>&#125;;<br>&lt;&#x2F;script&gt;<br><br>&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;<br>&lt;&#x2F;style&gt;<br><br></code></pre></td></tr></table></figure>


<ol start="5">
<li>å°ç»“</li>
</ol>
<blockquote>
<ol>
<li>å½“å­ç»„ä»¶è·å–çš„injectå†…å®¹ä¸ºéå“åº”å¼çš„åŸºæœ¬ç±»å‹æ—¶ï¼Œä¸ä¼šå…·æœ‰å“åº”å¼æ•ˆæœï¼Œè¿™ä¸ªå†…å®¹ä¸€èˆ¬ä½œä¸ºåªè¯»æ•°æ®ã€‚</li>
<li>å½“å­ç»„ä»¶è·å–çš„injectä¸ºå“åº”å¼çš„åŸºæœ¬ç±»å‹æ•°æ®æ—¶ï¼ˆvalueä¸ºåŸºæœ¬ç±»å‹çš„refå¯¹è±¡ï¼‰ï¼Œåœ¨å­ç»„ä»¶å†…ä¿®æ”¹è¯¥refå¯¹è±¡çš„valueä¼šè§¦å‘å­ç»„ä»¶çš„è§†å›¾æ›´æ–°ï¼Œä¹Ÿä¼šå½±å“åˆ°å…¶ä»–å¼•ç”¨è¯¥refå¯¹è±¡çš„ç»„ä»¶ã€‚</li>
<li>å½“å­ç»„ä»¶è·å–çš„injectä¸ºéå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®æ—¶ï¼ˆå¦‚Plain Objectæˆ–Arrayï¼‰ï¼Œè¯¥æ•°æ®ä¸å…·æœ‰å“åº”å¼çš„æ•ˆæœï¼Œå³ä¿®æ”¹è¯¥å¼•ç”¨ç±»å‹æ•°æ®çš„å†…å®¹æ—¶ï¼Œä¸ä¼šç«‹åˆ»è§¦å‘è§†å›¾çš„æ›´æ–°ã€‚ä½†æ˜¯æ•°æ®ç¡®å®å‘ç”Ÿæ”¹å˜äº†ï¼Œæ­¤åï¼Œå½“ç»„ä»¶å› ä¸ºå…¶ä»–åŸå› æ›´æ–°è§†å›¾æ—¶ï¼Œèƒ½å¤Ÿåœ¨è§†å›¾ä¸­çœ‹åˆ°è¯¥æ•°æ®çš„æ›´æ–°ï¼ˆVue3 vDomæ›´æ–°ä¼špatchæ¨¡æ¿ä¸­çš„éå“åº”å¼å¼•ç”¨ç±»å‹æ•°æ®ï¼Œä½†éå“åº”å¼æ•°æ®ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼‰ã€‚</li>
<li>å½“å­ç»„ä»¶è·å–çš„injectä¸ºå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®æ—¶ï¼ˆreactiveä»£ç†ï¼‰ï¼Œä¿®æ”¹è¯¥æ•°æ®çš„å±æ€§ä¼šè§¦å‘å­ç»„ä»¶ä»¥åŠä¾èµ–è¯¥æ•°æ®çš„å…¶ä»–ç»„ä»¶çš„æ›´æ–°ã€‚</li>
</ol>
</blockquote>
<h4 id="æä¾›ä¿®æ”¹provideæ•°æ®çš„æ–¹æ³•"><a href="#æä¾›ä¿®æ”¹provideæ•°æ®çš„æ–¹æ³•" class="headerlink" title="æä¾›ä¿®æ”¹provideæ•°æ®çš„æ–¹æ³•"></a>æä¾›ä¿®æ”¹provideæ•°æ®çš„æ–¹æ³•</h4><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨æ³¨å…¥æ•°æ®çš„ç»„ä»¶å†…éƒ¨æ›´æ–°æ³¨å…¥çš„æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å»ºè®®æä¾›ä¸€ä¸ªæ–¹æ³•æ¥è´Ÿè´£æ”¹å˜å“åº”å¼ propertyã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- src&#x2F;components&#x2F;MyMap.vue --&gt;<br>&lt;template&gt;<br>  &lt;MyMarker &#x2F;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>import &#123; provide, reactive, ref &#125; from &#39;vue&#39;<br>import MyMarker from &#39;.&#x2F;MyMarker.vue<br><br>export default &#123;<br>  components: &#123;<br>    MyMarker<br>  &#125;,<br>  setup() &#123;<br>    const location &#x3D; ref(&#39;North Pole&#39;)<br>    const geolocation &#x3D; reactive(&#123;<br>      longitude: 90,<br>      latitude: 135<br>    &#125;)<br><br>    const updateLocation &#x3D; () &#x3D;&gt; &#123;<br>      location.value &#x3D; &#39;South Pole&#39;<br>    &#125;<br><br>    provide(&#39;location&#39;, location)<br>    provide(&#39;geolocation&#39;, geolocation)<br>    provide(&#39;updateLocation&#39;, updateLocation)<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- src&#x2F;components&#x2F;MyMarker.vue --&gt;<br>&lt;script&gt;<br>import &#123; inject &#125; from &#39;vue&#39;<br><br>export default &#123;<br>  setup() &#123;<br>    const userLocation &#x3D; inject(&#39;location&#39;, &#39;The Universe&#39;)<br>    const userGeolocation &#x3D; inject(&#39;geolocation&#39;)<br>    const updateUserLocation &#x3D; inject(&#39;updateLocation&#39;)<br><br>    return &#123;<br>      userLocation,<br>      userGeolocation,<br>      updateUserLocation<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<h4 id="å’ŒVue2-x-provide-injectçš„åŒºåˆ«"><a href="#å’ŒVue2-x-provide-injectçš„åŒºåˆ«" class="headerlink" title="å’ŒVue2.x provide/injectçš„åŒºåˆ«"></a>å’ŒVue2.x provide/injectçš„åŒºåˆ«</h4><p>a. Vue2ä¸­injectå†…å®¹ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œä¸è®ºè¯¥æ•°æ®æ˜¯å“åº”å¼çš„è¿˜æ˜¯éå“åº”å¼çš„ï¼Œéƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä½†ä¸ä¼šå½±å“å…¶ä»–ç»„ä»¶ï¼Œå³è¿™ä»½æ•°æ®æ˜¯å­ç»„ä»¶å®ä¾‹ç‹¬æœ‰çš„ã€‚</p>
<p>a. è€ŒVue3çš„å“åº”å¼åŸºæœ¬ç±»å‹æ•°æ®ä¸€èˆ¬ç”±refåŒ…è£¹ï¼Œä¿®æ”¹refå¯¹è±¡çš„valueå±æ€§æ—¶ï¼Œä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼ŒåŒæ—¶ä¼šå½±å“ä¾èµ–äºè¯¥refå¯¹è±¡çš„å…¶ä»–ç»„ä»¶ï¼Œå³è¿™ä»½æ•°æ®æ˜¯å…±äº«çš„ï¼›</p>
<p>a. æ­¤å¤–Vue3ä¸­ï¼Œéå“åº”å¼çš„åŸºæœ¬ç±»å‹injectæ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œä¸ä¼šè§¦å‘è¯•å›¾æ›´æ–°ï¼ŒåŒæ—¶åœ¨å­ç»„ä»¶ä¸‹ä¸€æ¬¡æ›´æ–°æ—¶ï¼Œæ¨¡æ¿ä¸­ä¾èµ–äºè¯¥æ³¨å…¥æ•°æ®çš„DOMå…ƒç´ ä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼ˆè¿˜æ˜¯ç¥–å…ˆç»„ä»¶provideçš„å€¼ï¼‰ã€‚</p>
<blockquote>
<p>è¿™é‡Œå¯ä»¥ç†è§£ä¸ºï¼š</p>
<p>Vue3ä¸­å­ç»„ä»¶æ›´æ–°æ—¶ï¼Œå¦‚æœæ¨¡æ¿ä¸­ä¾èµ–äºæ³¨å…¥çš„æ•°æ®ï¼ˆinjectçš„å†…å®¹ï¼‰ï¼Œåˆ™æ¯æ¬¡éƒ½ä¼šä»ç¥–å…ˆç»„ä»¶çš„provideä¸­å»è·å–ï¼Œè€Œè·Ÿå­ç»„ä»¶ä¹‹å‰çš„çŠ¶æ€æ— å…³ã€‚</p>
<p>Vue2ä¸­å­ç»„ä»¶æ›´æ–°æ—¶ï¼Œå¦‚æœæ¨¡æ¿ä¸­ä¾èµ–äºæ³¨å…¥çš„æ•°æ®ï¼ˆinjectçš„å†…å®¹ï¼‰ï¼Œæ–°çš„æ³¨å…¥æ•°æ®ä¸æ˜¯é‡æ–°åˆ°ç¥–å…ˆçš„provideä¸­å»è·å–ï¼Œè€Œæ˜¯åˆ°å­ç»„ä»¶å®ä¾‹ä¸Šè·å–ã€‚ğŸ‘ˆ è¿™æ˜æ˜¾æ²¡æœ‰Vue3é€»è¾‘æ­£ç¡®ã€‚</p>
</blockquote>
<p>b. Vue2ä¸­injectå†…å®¹ä¸ºéå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®æ—¶ï¼Œä¿®æ”¹è¯¥æ³¨å…¥æ•°æ®çš„å±æ€§å€¼ä¸ä¼šç«‹åˆ»è§¦å‘è§†å›¾æ›´æ–°ï¼Œåœ¨ä¸‹ä¸€æ¬¡å­ç»„ä»¶æ›´æ–°æ—¶ï¼Œæ¨¡æ¿ä¸­ä¾èµ–äºè¯¥å€¼çš„æ’å€¼è¯­æ³•å¤„ä¼šæ›´æ–°ï¼Œ<font color='red'>ä½†æ˜¯é€šè¿‡v-bindç»‘å®šçš„åœ°æ–¹ä¸ä¼šå‘ç”Ÿæ›´æ–°ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªVue2ä¸­æ²¡æœ‰å¤„ç†åˆ°çš„ç»†èŠ‚</font>ï¼ˆå¯èƒ½æ½œè—åœ¨æ¨¡æ¿ç¼–è¯‘æˆ–vNodeçš„prepatchçš„é€»è¾‘é‡Œï¼‰ã€‚</p>
<p>b. Vue3ä¸­injectå†…å®¹ä¸ºéå“åº”å¼çš„å¼•ç”¨ç±»å‹æ•°æ®æ—¶ï¼Œä¿®æ”¹è¯¥æ³¨å…¥æ•°æ®çš„å±æ€§å€¼ä¸ä¼šç«‹åˆ»è§¦å‘è§†å›¾æ›´æ–°ï¼Œåœ¨ä¸‹ä¸€æ¬¡å­ç»„ä»¶æ›´æ–°æ—¶ï¼Œæ¨¡æ¿ä¸­ä¾èµ–äºè¯¥å€¼çš„åœ°æ–¹éƒ½ä¼šæ›´æ–°ï¼ˆåŒ…æ‹¬v-bindç»‘å®šçš„å±æ€§å€¼ï¼‰ã€‚</p>
<blockquote>
<p>æ¨¡æ¿ä¸­ä¾èµ–éå“åº”å¼çš„å¼•ç”¨ç±»å‹injectï¼Œå½“è¯¥injectçš„å†…å®¹å‘ç”Ÿæ›´æ–°æ—¶ï¼Œä¸ä¼šç«‹åˆ»è§¦å‘è§†å›¾æ›´æ–°ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºinjectçš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹æ•°æ®çš„åœ°å€ï¼Œæ‰€ä»¥å°½ç®¡è¯¥å¼•ç”¨ç±»å‹å†…éƒ¨å¯èƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†injetcçš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒVueå“åº”å¼ç³»ç»Ÿä¸è®¤ä¸ºè¿™ä¸ªæ•°æ®æ›´æ–°äº†ã€‚</p>
<p>è€Œå½“ä¸‹ä¸€æ¬¡å­ç»„ä»¶æ›´æ–°æ—¶ï¼Œä¼šæ ¹æ®æ›´æ–°åçš„injectæ•°æ®å†…å®¹ï¼Œé‡æ–°ç”ŸæˆVNodeï¼Œä»è€Œè¿›è¡Œpatchã€‚</p>
</blockquote>
<p><strong>ç»¼ä¸Šï¼ŒVue3.0ä¸­çš„ provide/inject ä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼ŒåŒæ—¶å„ç§æƒ…å†µä¸‹çš„è¡¨ç°æ›´åŠ åˆç†ã€‚</strong></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Vue/">Vue</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/05/06/Web/front-end-optimization/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">å‰ç«¯æ€§èƒ½ä¼˜åŒ–</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/04/19/Webpack/webpack4/">
                        <span class="hidden-mobile">webpack4é…ç½®</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>



</body>
</html>
