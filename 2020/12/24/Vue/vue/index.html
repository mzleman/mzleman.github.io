

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Leman">
  <meta name="keywords" content="">
  <title>Vue.js笔记 - Personal Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"mzleman.gitee.io","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Leman 😀</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/profile/">
                <i class="iconfont icon-link-fill"></i>
                简历
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Vue.js笔记">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-12-24 15:54" pubdate>
        2020年12月24日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      16k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      228
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Vue.js笔记</h1>
            
            <div class="markdown-body">
              <h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><p>Vue是一个渐进式JavaScript框架。</p>
<p>高级功能和特点：</p>
<ul>
<li>解耦视图和数据</li>
<li>可复用的组件</li>
<li>前端路由技术</li>
<li>状态管理</li>
<li>虚拟DOM</li>
</ul>
<p><strong>Vue.js的Hello world</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>   <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.11&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        el:<span class="hljs-string">&quot;#app&quot;</span>,</span><br>        data:&#123;<br><span class="javascript">            message:<span class="hljs-string">&quot;Hello world&quot;</span></span><br>        &#125; <br>        &#125;);<br><span class="handlebars"><span class="xml">        <span class="hljs-comment">&lt;!-- 新建一个Vue对象，在构造函数中传入options对象--&gt;</span></span></span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><font size="4" color="red">Vue采用声明式编程，不同于jQuery以及原生JS操作DOM的命令式编程</font></p>
<p><img src="/2020/12/24/Vue/vue/image-20200811204642611.png" srcset="/img/loading.gif" alt="image-20200811204642611"> </p>
<h2 id="Vue中的MVVM"><a href="#Vue中的MVVM" class="headerlink" title="Vue中的MVVM"></a>Vue中的MVVM</h2><p><img src="/2020/12/24/Vue/vue/image-20200811163236900.png" srcset="/img/loading.gif" alt="image-20200811163236900"></p>
<h2 id="Options对象"><a href="#Options对象" class="headerlink" title="Options对象"></a>Options对象</h2><ul>
<li><p><strong>el：</strong></p>
<p>类型：string | HTMLElement</p>
<p>作用：决定Vue实例会管理哪一个DOM对象</p>
</li>
<li><p><strong>data：</strong></p>
<p>类型：Object | Function</p>
<p>作用：Vue实例对应的数据对象</p>
</li>
<li><p><strong>methods</strong>：</p>
<p>类型：｛key : Function｝</p>
<p>作用：定义属于Vue实例的一些方法，可以在其他地方调用，也可以在指令中使用。</p>
</li>
<li><p><strong>computed：</strong></p>
<p>计算属性</p>
<p>类型：{key : Function}</p>
<p>作用：定义一些计算属性值供使用。<font color="red">计算属性具有缓存机制，如果计算属性使用的数据没有被修改，则计算属性不会计算多次，当访问该计算属性时，直接从缓存中取值。</font></p>
<p>==由于缓存机制的存在，当页面中显示的内容只是需要对数据进行简单变换时，尽量使用计算属性，而不是使用函数计算==</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>书籍购物车的总价格:&#123;&#123;totalPrice&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">	<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">		el:<span class="hljs-string">&quot;h2&quot;</span>,</span><br>		data:&#123;<br>			books:[<br><span class="javascript">				&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;代码大全&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">20</span>&#125;,</span><br><span class="javascript">				&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;现代操作系统&#x27;</span>,<span class="hljs-attr">price</span>:<span class="hljs-number">50</span>&#125;</span><br>			]<br>		&#125;,<br>		computed:&#123;<br><span class="javascript">			totalPrice:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">        		<span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.books.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;</span><br>                    pre+=cur.price;<br><span class="javascript">                    <span class="hljs-keyword">return</span> pre;</span><br>                &#125;,0);<br>    		&#125;<br>            /*<br>            也可以使用ES6方法的简写<br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">totalPrice</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">            	<span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.books.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;</span><br>                    pre+=cur.price;<br><span class="javascript">                    <span class="hljs-keyword">return</span> pre;</span><br>                &#125;,0);<br>            &#125;<br>            */<br>		&#125;<br>	&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><font color='red'>computed中的计算属性底层的原理 可能 是使用了Proxy</font></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript">comuputed:&#123;<br>    <span class="hljs-comment">//totalPrice:handler</span><br>    totalPrice:&#123;<br>        get&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.books.reduce(<span class="hljs-function">(<span class="hljs-params">pre,cur</span>)=&gt;</span>&#123;<br>                    pre+=cur.price;<br>                    <span class="hljs-keyword">return</span> pre;<br>                   &#125;,<span class="hljs-number">0</span>);<br>        &#125;<br>        <span class="hljs-comment">//get:function()&#123;....&#125;</span><br>        <span class="hljs-comment">//还可以设置set方法</span><br>    &#125;<br>&#125;<span class="hljs-comment">//这种写法同样可以。</span><br></code></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li><p><strong>filters：</strong></p>
<p>类型：Function</p>
<p>作用：允许传入一个value，对该值进行过滤或附加处理，返回新的值。</p>
<p>使用： value | filterFunctionName </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;grade | assessment&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br>data:&#123;<br>	grade:&#x27;A&#x27;<br>&#125;<br>filters:&#123;<br>	assessment(value)&#123;<br>		if(value===&#x27;A&#x27;) return &#x27;优秀&#x27;;<br>		else   return &#x27;其他&#x27;;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果：</p>
<p><img src="/2020/12/24/Vue/vue/image-20200819182643832.png" srcset="/img/loading.gif" alt="image-20200819182643832"> </p>
</li>
<li><p><strong>components</strong>：</p>
<p>类型：Object</p>
<p>作用：定义局部组件</p>
</li>
<li><p><strong>watch：</strong></p>
<p>类型：Object</p>
<p>作用：监听data中的数据以及props中的通信属性的变化。</p>
</li>
<li><p><strong>生命周期函数</strong>：</p>
<p>如：beforeCreate、created、Mounted、Destroyed…..</p>
</li>
</ul>
<h2 id="Vue的生命周期"><a href="#Vue的生命周期" class="headerlink" title="Vue的生命周期"></a>Vue的生命周期</h2><p><img src="/2020/12/24/Vue/vue/lifecycle.png" srcset="/img/loading.gif"> </p>
<h2 id="Mustache语法"><a href="#Mustache语法" class="headerlink" title="Mustache语法"></a>Mustache语法</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;,Mazheng<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--Mustache语法不仅仅可以写变量，还可以写表达式--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;firstName + &#x27;&#x27; + lastName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--另一种写法,不会忽略语法变量之间的空格，会忽略语法变量两端的空格--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span> <br>    <br>    <br>    <span class="hljs-comment">&lt;!--数值表达式--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>总价：&#123;&#123;price * 2&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>


<h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><h3 id="文本指令"><a href="#文本指令" class="headerlink" title="文本指令"></a>文本指令</h3><ol>
<li><p><strong>v-once</strong> </p>
<p>布尔属性，数据渲染一次后就不再保持绑定，内容不会再随数据改变。</p>
</li>
<li><p><strong>v-html</strong></p>
<p>v-html=”==data==”，会将字符串类型的字面量、变量或表达式当做html内容进行渲染。</p>
<p>（覆盖标签内原有的内容）。</p>
</li>
<li><p>**v-text **</p>
<p>v-text=”==data==”，会将字符串类型的字面量、变量或表达式作为使用该指令的dom元素的文本（覆盖标签内原有的内容）。</p>
</li>
<li><p><strong>v-pre</strong></p>
<p>v-pre布尔指令，会将标签中包裹的内容原原本本的展示。（忽略mustache语法）</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-pre</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span>hahaha<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><span class="hljs-comment">&lt;!--会覆盖hahaha v-text不如mustache语法灵活--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>引入vue<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">	<span class="hljs-keyword">let</span> app = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">       el:<span class="hljs-string">&quot;#app&quot;</span>,</span><br>       data:&#123;<br><span class="handlebars"><span class="xml">           message:&quot;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>P标签<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>&quot;</span></span><br>       &#125; <br>    &#125;);<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="v-cloak指令"><a href="#v-cloak指令" class="headerlink" title="v-cloak指令"></a>v-cloak指令</h3><p>防止闪动</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[v-cloak]</span>&#123;<br>	<span class="hljs-attribute">display</span>:none;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span> <span class="hljs-attr">v-cloak</span>&gt;</span><br>	<br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--  在vue解析后会将v-cloak属性去掉  --&gt;</span><br></code></pre></td></tr></table></figure>


<h3 id="v-bind指令"><a href="#v-bind指令" class="headerlink" title="v-bind指令"></a>v-bind指令</h3><pre><code>v-bind指令用于将DOM元素的属性值与数据绑定。

语法糖 ==使用冒号代替v-bind==</code></pre>
<ol>
<li><p><strong>动态绑定a元素的href属性以及img元素的src属性</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html">div#app<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-bind:src</span>=<span class="hljs-string">&quot;imgURL&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span><br><span class="hljs-comment">&lt;!--语法糖写法--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imgURL&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;aHref&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-comment">&lt;!--语法糖写法--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;aHref&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>div#app<br><br>app=new Vue(&#123;<br>	el:&quot;#app&quot;,<br>	data:&#123;<br>		imgURL:https://XXXXX.img,<br>		aHref:https://www.baidu.com<br>	&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


</li>
</ol>
<ol start="2">
<li><p><strong>动态绑定HTML元素的class属性</strong></p>
<ul>
<li><p>对象写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-bind:class</span>=<span class="hljs-string">&quot;&#123;属性名1:boolean,属性名2:boolean&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--例：--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-bind:class</span>=<span class="hljs-string">&quot;&#123;active:isActive,line:isLine&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--与既有的class属性共存,v-bind使用语法糖写法--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive,line:isLine&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>👇<br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red active&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>  <span class="hljs-comment">&lt;!--isLine为false--&gt;</span><br><br><span class="hljs-comment">&lt;!--v-bind:class取函数返回值--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;getClasses()&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-comment">&lt;!--总之,v-bind绑定class的对象写法，属性值的形式为 &quot;Obeject&quot;  --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>        data:&#123;<br><span class="javascript">            isActive:<span class="hljs-literal">true</span>,</span><br><span class="javascript">            isLine:<span class="hljs-literal">false</span></span><br>        &#125;<br>        <br>        methods:&#123;<br>        	getClasses ()&#123;<br><span class="javascript">        		<span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">active</span>:<span class="hljs-built_in">this</span>.isActive,<span class="hljs-attr">line</span>:<span class="hljs-built_in">this</span>.isLine&#125;;<span class="hljs-comment">//返回一个对象</span></span><br>    		&#125;<br>    	&#125;<br>    &#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ol>
<ul>
<li><p>数组写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--语法--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>  <span class="hljs-comment">&lt;!--list为一个含有字符串类型元素的数组--&gt;</span><br><br><span class="hljs-comment">&lt;!--例子--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;[class1,class2,...classN]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;getClasses()&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>data:&#123;<br>	class1:&#x27;active&#x27;,<br>	class2:&#x27;red&#x27;<br>&#125;<br><br>methods:&#123;<br>	getClasses()&#123;<br>		return [this.class1,this.class2];<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
</ul>
<ol start="3">
<li><p><strong>动态绑定样式</strong></p>
<ul>
<li><p>对象写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">基本语法        </span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;css属性名:属性值(string类型)...&#125;&quot;</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">例：     css属性名只能使用驼峰命名法!!!!!!</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;color:&#x27;red&#x27;,fontSize:&#x27;16px&#x27;&#125;&quot;</span>&gt;</span>标题2<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;backgroundColor:backColor&#125;&quot;</span>&gt;</span><br>    <br>    new Vue(&#123;<br>    	el:&#x27;#app&#x27;,<br>    	data:&#123;<br>    		backColor:&#x27;#fff&#x27;	<br>    	&#125;<br>    &#125;)<br></code></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ol>
<ul>
<li><p>数组写法（是基于对象写法）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">基本语法        </span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[...Obejects]&quot;</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">例：     </span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[style1,style2]&quot;</span>&gt;</span>标题<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[...styles]&quot;</span>&gt;</span>标题<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>    <br><br>    new Vue(&#123;<br>    	el:&#x27;#app&#x27;,<br>    	data:&#123;<br>    		style1:&#123;backgroundColor:&#x27;#bfa&#x27;&#125;,<br>    		style2:&#123;color:&#x27;red&#x27;&#125;<br>			styles:[&#123;backgroundColor:&#x27;#bfa&#x27;&#125;,&#123;color:&#x27;red&#x27;&#125;]<br>    	&#125;<br>    &#125;)<br></code></pre></td></tr></table></figure>


</li>
</ul>
<hr>
<h3 id="v-on-事件监听"><a href="#v-on-事件监听" class="headerlink" title="v-on 事件监听"></a>v-on 事件监听</h3><p>   语法糖   ==用@代替v-on== </p>
<p>   <strong>基本使用</strong>：v-on:==事件名.修饰符== =”函数/单句表达式/Object”</p>
   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;count++&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;count--&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;decrease&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><br>new Vue(&#123;<br>	el:&quot;#app&quot;,<br>	data:&#123;<br>		count=0<br>	&#125;<br>	methods=&#123;<br>		add()&#123;<br>			this.count++;<br>		&#125;,<br>		decrease()&#123;<br>			this.count--;<br>		&#125;<br>	&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p>   <strong>事件响应函数的传参问题</strong></p>
   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <br>    <br>    <span class="hljs-comment">&lt;!--实参和形参匹配时的正常调用--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;printf&quot;</span>&gt;</span>没有实参和形参,当函数不带参数时，可省略括号<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;printf()&quot;</span>&gt;</span>没有实参和形参<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;y-printf(&quot;</span><span class="hljs-attr">hello</span>&quot;,&quot; <span class="hljs-attr">world</span>!&quot;)&quot;&gt;</span>处理两个参数<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--实参和形参不匹配时的处理策略--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;x-printf(123)&quot;</span>&gt;</span>有形参，输入实参，带括号调用<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>   <br>    <span class="hljs-comment">&lt;!--val=123--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;x-printf&quot;</span>&gt;</span>有形参，但不输入实参，且不带括号调用<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>   <br>    <span class="hljs-comment">&lt;!--val=$event,会把事件对象当做第一个参数传入--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;x-printf()&quot;</span>&gt;</span>有形参，但不输入实参，带括号调用<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>   <br>    <span class="hljs-comment">&lt;!--val=undefined--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;x-printf($event)&quot;</span>&gt;</span>有形参，输入实参$event，带括号调用<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <br>    <span class="hljs-comment">&lt;!--val=$event 强制输入事件对象--&gt;</span><br>       <br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><br>new Vue(&#123;<br>	el:&quot;#app&quot;,<br>	data:&#123;<br>		count=0<br>	&#125;<br>	methods=&#123;<br>		printf()&#123;<br>			console.log(&quot;hello world&quot;);<br>		&#125;,<br>		x-printf(val)&#123;<br>			console.log(val);<br>		&#125;<br>		y-printf(val,event)&#123;<br>			console.log(val,event);<br>		&#125;<br>	&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p>   <strong>修饰符</strong>：</p>
<ul>
<li><p><strong>.stop</strong>  取消事件冒泡</p>
<p>@click.stop=”==fun==”</p>
</li>
<li><p><strong>.prevent</strong> 取消默认行为</p>
<p>@click.prevent=”==fun==” 取消dom元素的默认行为</p>
</li>
<li><p>**.键盘键号   **</p>
<p>@keyup.enter=”==fun==” 指定当enter键松开时的行为</p>
<p>@keyup.13=”==fun==”      enter的代号为13</p>
</li>
<li><p>**.native **    监听组件根元素的原生事件</p>
</li>
<li><p>**.once **  只触发一次该事件</p>
<p>@click.once=”==fun==”</p>
</li>
</ul>
<hr>
<h3 id="条件判断指令"><a href="#条件判断指令" class="headerlink" title="条件判断指令"></a>条件判断指令</h3><p><strong>具有条件判断指令的标签，如果逻辑条件不符合，不会存在于DOM树中</strong> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;score&gt;=90&quot;</span>&gt;</span><br>    成绩：优秀<br><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;score&gt;=60&quot;</span>&gt;</span><br>    成绩：及格<br><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span>&gt;</span><br>    成绩：不及格<br><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>    成绩:&#123;&#123;grade&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><br>data:&#123;<br>	score:70<br>&#125;<br>computed:&#123;<br>	grade()&#123;<br>		if(this.score&gt;=90) return &quot;优秀&quot;;<br>		else if (this.score&gt;=60) return &quot;及格&quot;;<br>		else return &quot;不及格&quot;;<br>	&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="v-show指令"><a href="#v-show指令" class="headerlink" title="v-show指令"></a>v-show指令</h3><p>v-show=”false”时，标签存在于DOM树中，但会添加内联样式 display:none</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br></code></pre></td></tr></table></figure>
<ul>
<li><p>当需要在显示与隐藏之间切换很频繁时，使用v-show指令</p>
</li>
<li><p>当只有一次切换，或元素互斥存在时，使用v-if</p>
</li>
</ul>
<hr>
<h3 id="循环指令"><a href="#循环指令" class="headerlink" title="循环指令"></a>循环指令</h3><p>可以使用v-for指令遍历数组和JS普通对象。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--根据需要，在Vue里可以使用类似&quot;元祖&quot;的语法遍历数组的元素及索引--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in lis&quot;</span>&gt;</span>&#123;&#123; `$&#123;index&#125;.$&#123;item&#125;` &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--遍历对象的属性值、属性名及属性名的索引--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(val,key,index) in obj&quot;</span>&gt;</span>&#123;&#123; `$&#123;key&#125;:$&#123;val&#125;` &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><font color="red">在v-for绑定的数据可能存在动态修改的情况时（如动态增加删除一个元素），建议为标签添加一个key属性，key的属性值应能唯一标识数据中的各个元素。添加key属性可以提高dom动态渲染性能。</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in lis&quot;</span>  <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123;item.text&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br></code></pre></td></tr></table></figure>


<p>==Vue是响应式的，当数据变化时，Vue会检测到数据的变化，并反应到视图上。==</p>
<p>==我们常用v-for指令绑定数组数据，Vue中包含了一组观察数组变化的方法。==</p>
<p>==当调用数组某些方法改变元素时，会触发视图的更新==</p>
<pre><code>包括：所有改变数组自身的方法(pop,push,unshift,sort,reverse等等)

注意：使用下标改变数组元素的方法不会被Vue监听到，&lt;font color=&quot;red&quot;&gt;数据会发生改变，但视图不会发生改变。&lt;/font&gt;

❌  lis[0]=xxx;

✔  Vue.set(lis,&#39;0&#39;,xxx)    **使用Vue的set方法改变对象的属性值会被检测到，并反应到视图上**</code></pre>
<hr>
<h3 id="案例1"><a href="#案例1" class="headerlink" title="案例1"></a>案例1</h3><p>==要求：当点击一个li时，该li的color为红色，其他为默认颜色==</p>
<p><img src="/2020/12/24/Vue/vue/image-20200816153838359.png" srcset="/img/loading.gif" alt="image-20200816153838359"> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.11&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">        <span class="hljs-selector-class">.active</span>&#123;</span><br>            color: red;<br>        &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>  <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in lis&quot;</span> </span><br><span class="hljs-tag">             <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:currentIndex===index&#125;&quot;</span></span><br><span class="hljs-tag">             @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;beActive(index)&quot;</span></span><br><span class="hljs-tag">         &gt;</span><br>         &#123;&#123;`$&#123;index&#125;.$&#123;item&#125;`&#125;&#125;<br>         <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            data:&#123;<br><span class="javascript">                lis:[<span class="hljs-string">&#x27;mazheng&#x27;</span>,<span class="hljs-string">&#x27;ley&#x27;</span>],</span><br><span class="javascript">                currentIndex:<span class="hljs-number">0</span>         <span class="hljs-comment">//使用currentIndex记录上次点击的元素索引</span></span><br>            &#125;,<br>            methods:&#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">beActive</span>(<span class="hljs-params">index</span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">this</span>.currentIndex=index;</span><br>                &#125;<br>            &#125;<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="案例2"><a href="#案例2" class="headerlink" title="案例2"></a>案例2</h3><p><img src="/2020/12/24/Vue/vue/image-20200816171940331.png" srcset="/img/loading.gif" alt="image-20200816171940331"> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.11&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>        table&#123;<br>            width: 600px;<br>            border-collapse: collapse;<br>        &#125;<br>        th,td&#123;<br><span class="css">            <span class="hljs-selector-tag">padding</span><span class="hljs-selector-pseudo">:5px</span> 10<span class="hljs-selector-tag">px</span>;</span><br>            text-align: left;<br>            border: 1px black solid;<br>        &#125;<br>        th&#123;<br>            background-color: silver;<br>        &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>书籍名称<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>出版日期<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>价格<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>购买数量<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>操作<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item,index) in books&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123;index+1&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>《&#123;&#123;item.title&#125;&#125;》<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123;item.releaseDate&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span> &#123;&#123;item.price | showPrice&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-comment">&lt;!--当书籍数量小于等于1时，按钮不可用--&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">&quot;item.num &lt;= 1&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;decOne(index)&quot;</span>&gt;</span><br>                            -<br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                        &#123;&#123;item.num&#125;&#125;<br>                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>  @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addOne(index)&quot;</span>&gt;</span><br>                            +<br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;removeBook(index)&quot;</span>&gt;</span><br>                            移除<br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            data:&#123;<br>                books:[<br>                    &#123;<br><span class="javascript">                        title:<span class="hljs-string">&#x27;算法导论&#x27;</span>,</span><br><span class="javascript">                        releaseDate:<span class="hljs-string">&#x27;2006-06&#x27;</span>,</span><br>                        price:85,<br>                        num:1<br>                    &#125;,<br>                    &#123;<br><span class="javascript">                        title:<span class="hljs-string">&#x27;UNIX编程艺术&#x27;</span>,</span><br><span class="javascript">                        releaseDate:<span class="hljs-string">&#x27;2006-02&#x27;</span>,</span><br>                        price:59,<br>                        num:1<br>                    &#125;,<br>                    &#123;<br><span class="javascript">                        title:<span class="hljs-string">&#x27;代码大全&#x27;</span>,</span><br><span class="javascript">                        releaseDate:<span class="hljs-string">&#x27;2008-10&#x27;</span>,</span><br>                        price:59,<br>                        num:1<br>                    &#125;<br>                ]<br>            &#125;,<br><span class="javascript">            filters:&#123;  <span class="hljs-comment">//过滤器。跟计算属性类似，但是调用的方法不太一样</span></span><br><span class="handlebars"><span class="xml">                //<span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span> </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.price</span> | showPrice&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>     使用&quot; | &quot;调用过滤器,左边为参数</span></span><br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">showPrice</span>(<span class="hljs-params">price</span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-string">`￥<span class="hljs-subst">$&#123;price.toFixed(<span class="hljs-number">2</span>)&#125;</span>`</span>;</span><br>                &#125;<br>            &#125;,<br>            methods:&#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">addOne</span>(<span class="hljs-params">index</span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">this</span>.books[index].num+=<span class="hljs-number">1</span>;</span><br>                &#125;,<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">decOne</span>(<span class="hljs-params">index</span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">this</span>.books[index].num-=<span class="hljs-number">1</span>;</span><br>                &#125;,<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">removeBook</span>(<span class="hljs-params">index</span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">this</span>.books.splice(index,<span class="hljs-number">1</span>);</span><br>                &#125;<br>            &#125;<br>        &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="v-model-指令"><a href="#v-model-指令" class="headerlink" title="v-model 指令"></a>v-model 指令</h3><p>实现表单元素的双向绑定。绑定的数据主要用于自定义的ajax请求，也可以供其他功能使用。</p>
<p>如果表单元素仍然使用表单提交请求，则请求发送的仍然是表单元素的value值，跟v-model绑定的数据并无关系。</p>
<p>==1.与文本类表单元素结合使用==</p>
<p>将input的value和message变量进行绑定。文本框改变value，message的值也随之改变。改变message的值，文本框中的内容也随之改变。（双向绑定）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">//只使用v-model绑定数据，但不使用name标识表单元素，这种表单元素不会被表单提交（因为没有name属性）<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br><br>data:&#123;<br>	message:&#x27;&#x27;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>原理</strong></p>
<p>v-model其实是一个语法糖，它的背后本质是包含两个操作：</p>
<ol>
<li><p>监听表单元素的特征事件，根据情况更新绑定的数据</p>
</li>
<li><p>监测数据的变化，更新表单元素的属性值 如value checked…（属性值的改变会体现到视图上）。</p>
<p> 例如：</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">//使用两个命令的组合实现input标签的v-model的功能<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;message&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;message=$event.target.value&quot;</span>&gt;</span><br><br>data:&#123;<br>	message:&#x27;&#x27;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><u>textarea标签与input标签类似可以使用v-model指令实现上述功能</u></p>
<p>==2.与单选按钮结合使用==</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--应当为每个单选按钮设置value属性--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;radioVal&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;radioVal&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--这类没有name属性的radio不会随表单提交--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>data:&#123;<br><span class="javascript">	radioVal:<span class="hljs-number">0</span>   <span class="hljs-comment">// 初始值为0，代表默认第一个按钮选中。数字、字符串都可以。</span></span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


<p>==3.与checkbox结合使用==</p>
<ul>
<li><p>单个复选框，宜使用v-model绑定一个bool类型的变量</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;isChecked&quot;</span>&gt;</span><br>//当选中时，isChecked值会为true,不选中时为false<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>data:&#123;<br><span class="javascript">	isChecked=<span class="hljs-literal">false</span>   <span class="hljs-comment">//isChecked默认值设为false，代表默认不选中</span></span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
<li><p>多个复选框（绑定同一个数据），宜使用v-model绑定一个<strong>空数组,**或</strong>具有初始值的数组**。</p>
<p><font color="red">（可以为数组指定初始元素，以表示默认选中的复选框，但初始元素的值应出自默认选中复选框的value。因为checkbox取消选中时只会删除数组中的响应value，而不会删除不存在于所有复选框value中的其他值。即初始化数组时，初始元素若不存在于所有value中，则会始终存在于绑定的数组里）</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;basketball&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;balls&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;football&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;balls&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;badminton&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;balls&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>    data:&#123;<br><span class="javascript">        balls:[<span class="hljs-string">&#x27;basketball&#x27;</span>] <span class="hljs-comment">//默认选中第一个复选框</span></span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in origins&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;balls&quot;</span>&gt;</span> &#123;&#123;item&#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>    data:&#123;<br>        balls:[],<br><span class="javascript">        origins:[<span class="hljs-string">&#x27;basketball&#x27;</span>,<span class="hljs-string">&#x27;football&#x27;</span>,<span class="hljs-string">&#x27;badminton&#x27;</span>]<span class="hljs-comment">//从后台获取</span></span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ul>
<p><u>checkbox标签中使用v-model属性，会使checked属性失效。复选框是否<strong>默认</strong>选中，只与v-model绑定的数据有关。</u></p>
<p>==4.与select标签结合使用==</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--单选select--&gt;</span> 类似于radio button<br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ball&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value:</span>&quot;<span class="hljs-attr">basketball</span>&quot;&gt;</span>篮球<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value:</span>&quot;<span class="hljs-attr">football</span>&quot;&gt;</span>足球<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value:</span>&quot;<span class="hljs-attr">badminton</span>&quot;&gt;</span>羽毛球<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>    data:&#123;<br><span class="javascript">        ball:<span class="hljs-string">&quot;basketball&quot;</span></span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--多选select,添加multiple布尔属性--&gt;</span> 类似于checkbox<br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;balls&quot;</span> <span class="hljs-attr">multiple</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value:</span>&quot;<span class="hljs-attr">basketball</span>&quot;&gt;</span>篮球<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value:</span>&quot;<span class="hljs-attr">football</span>&quot;&gt;</span>足球<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value:</span>&quot;<span class="hljs-attr">badminton</span>&quot;&gt;</span>羽毛球<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>    data:&#123;<br><span class="javascript">        balls:[<span class="hljs-string">&#x27;basketball&#x27;</span>]</span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


<p><strong>修饰符</strong></p>
<ol>
<li><p>lazy修饰符，常与input text标签使用</p>
<p>作用：让标签在失去焦点或在input中敲回车时才更新数据</p>
<p>（默认情况下，v-model是在input事件发生时立刻更新数据，lazy可以减少更新次数）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.lazy</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ol>
<ol start="2">
<li><p>number修饰符，常与input text标签使用</p>
<p>作用：获取input text标签内的value，转为number类型后再更新数据，即v-model绑定的数据会是number类型</p>
<p>（input text的value永远是string类型）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;marks&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ol>
<ol start="3">
<li><p>trim修饰符，常与input Text标签使用</p>
<p>作用：获取input text的value，去除首尾的空格后再更新数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.trim</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ol>
<hr>
<h2 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h2><p><img src="/2020/12/24/Vue/vue/image-20200817190948735.png" srcset="/img/loading.gif" alt="image-20200817190948735"></p>
<p><img src="/2020/12/24/Vue/vue/image-20200818104015488.png" srcset="/img/loading.gif" alt="image-20200818104015488">  </p>
<h3 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h3><p><img src="/2020/12/24/Vue/vue/image-20200818104048034.png" srcset="/img/loading.gif" alt="image-20200818104048034">  </p>
<p>全局组件可以在多个不同的Vue实例中使用。但<font color="red">Vue实例才是根组件</font>，因为全局组件必须在Vue实例中才能使用。</p>
<ol>
<li><p><strong>调用Vue.extend()方法<font color="red">创建组件构造器</font></strong></p>
<p>👇</p>
<ol start="2">
<li><strong>调用Vue.component()方法<font color="red">注册组件</font></strong></li>
</ol>
<p>👇</p>
<ol start="3">
<li><strong>在Vue实例或其他组件内<font color="red">使用组件</font></strong></li>
</ol>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--全局组件的demo--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span>   <span class="hljs-comment">&lt;!--在Vue实例中使用全局组件--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span>  <span class="hljs-comment">&lt;!--再次使用--&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>        <br><span class="javascript">        <span class="hljs-comment">//---------------------------------------------------------</span></span><br>        <br><span class="javascript"> 		<span class="hljs-comment">//创建组件构造器对象</span></span><br>        <br><span class="javascript">        <span class="hljs-keyword">let</span> template=<span class="hljs-string">`</span></span><br><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>P element<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="javascript">            &lt;<span class="hljs-regexp">/div&gt;   `;               /</span><span class="hljs-regexp">/创建组件模板</span></span><br><span class="javascript">        <span class="hljs-keyword">let</span> option=&#123;                 <span class="hljs-comment">//创建extendOptions对象</span></span><br>            template:template<br>        &#125;<br><span class="javascript">        <span class="hljs-keyword">let</span> cpnC=Vue.extend(option);  <span class="hljs-comment">//传入该对象，创建组件构造器</span></span><br>        <br><span class="javascript">        <span class="hljs-comment">//----------------------------------------------------------</span></span><br>        <br><span class="javascript">        <span class="hljs-comment">//注册全局组件，注册后cpn标签就可以在vue的实例以及各个组件内使用了</span></span><br>        <br><span class="javascript">        Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>,cpnC);<span class="hljs-comment">//注册全局组件。第一个参数是组件标签名，第二个参数是组件构造器</span></span><br>        <br><span class="javascript">        <span class="hljs-comment">//----------------------------------------------------------</span></span><br>        <br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span></span><br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html">  <span class="hljs-comment">&lt;!--注册全局组件的简写方式--&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      <span class="hljs-keyword">let</span> template=<span class="hljs-string">`</span></span><br><span class="handlebars"><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> P element <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="javascript">          &lt;<span class="hljs-regexp">/div&gt;   `;               /</span><span class="hljs-regexp">/创建组件模板</span></span><br><span class="javascript">      <span class="hljs-keyword">let</span> option=&#123;                 <span class="hljs-comment">//创建extendOptions对象</span></span><br>          template:template<br>      &#125;<br>      <br><span class="javascript">Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>,option); <span class="hljs-comment">//将extendOptions对象直接传入，而不是组件构造器对象</span></span><br>      <br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure>




<h3 id="局部组件"><a href="#局部组件" class="headerlink" title="局部组件"></a>局部组件</h3><ol>
<li><p>创建模板</p>
<p>👇</p>
</li>
<li><p>创建extendOptions对象</p>
<p>👇</p>
</li>
<li><p>在Vue实例或父组件中注册</p>
<p>👇</p>
</li>
<li><p>在Vue实例或父组件中使用</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--局部组件的demo--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span>   <span class="hljs-comment">&lt;!--在Vue实例中使用局部组件--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span>  <span class="hljs-comment">&lt;!--再次使用--&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> template=<span class="hljs-string">`</span></span><br><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>P element<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="javascript">            &lt;<span class="hljs-regexp">/div&gt;   `;               /</span><span class="hljs-regexp">/创建组件模板</span></span><br><span class="javascript">        <span class="hljs-keyword">let</span> option=&#123;                 <span class="hljs-comment">//创建extendOptions对象</span></span><br>            template:template<br>        &#125;;<br>        <br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span></span><br>            components:&#123;<br><span class="javascript">            	cpn:option            <span class="hljs-comment">//在components属性中注册组件</span></span><br>        	&#125;<br>        &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>




<h3 id="父组件与子组件"><a href="#父组件与子组件" class="headerlink" title="父组件与子组件"></a>父组件与子组件</h3><p><font color="red">子组件本质上就是局部组件</font></p>
<p><font color="red">祖先组件和后代组件之间不能越级使用，除非后代组件在祖先组件中注册过</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cpn1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn1</span>&gt;</span> <span class="hljs-comment">&lt;!--父组件的使用--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>    <br><span class="javascript">	<span class="hljs-comment">//创建子组件的构造器对象</span></span><br><span class="javascript">	<span class="hljs-keyword">let</span> temp2=<span class="hljs-string">`</span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>子组件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>`;</span></span><br><span class="javascript">    <span class="hljs-keyword">let</span> cpn2=Vue.extend(&#123;</span><br>        template:temp2<br>    &#125;);<br>    <br><span class="javascript">	<span class="hljs-comment">//创建子组件的构造器对象</span></span><br><span class="javascript">    <span class="hljs-keyword">let</span> temp1=<span class="hljs-string">`</span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>父组件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">cpn2</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn2</span>&gt;</span>  <span class="hljs-comment">&lt;!--子组件的使用--&gt;</span>  </span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   `;        </span></span><br><span class="javascript">    <span class="hljs-keyword">let</span> cpn1=Vue.extend(&#123;</span><br>        template:temp1,<br>        components:&#123;<br>            cpn2<br>        &#125;<br>    &#125;);<br><br><br><span class="javascript">    <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>        components:&#123;<br><span class="javascript">            cpn1     <span class="hljs-comment">//挂载cpn1父组件</span></span><br>        &#125;<br>    &#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--使用传入extendOptions直接注册组件--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">let</span> cpn1=&#123;</span><br>        template:`<br><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>父组件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">cpn2</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn2</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>`,</span></span><br>        components:&#123;<br>            cpn2:&#123;<br>                template:`<br><span class="handlebars"><span class="xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>子组件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>`</span></span><br>            &#125;<br>        &#125;<br>    &#125;;<br>    <br><span class="javascript">    <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>        components:&#123;<br>            cpn1<br>        &#125;<br>    &#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


<h3 id="模板的抽离"><a href="#模板的抽离" class="headerlink" title="模板的抽离"></a>模板的抽离</h3><ol>
<li><p>第一种写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/x-template&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp1&quot;</span>&gt;</span><br><span class="handlebars"><span class="xml">	<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">		<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>我是组件的模板<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">//注册组件</span></span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>,&#123;</span><br><span class="javascript">        template:<span class="hljs-string">&#x27;#temp1&#x27;</span>    <span class="hljs-comment">//使用id选择器</span></span><br>    &#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ol>
<ol start="2">
<li><p>第二种写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp2&quot;</span>&gt;</span><br>    	<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>我是组件的模板<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">//注册组件</span></span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>,&#123;</span><br><span class="javascript">        template:<span class="hljs-string">&#x27;#temp2&#x27;</span>    <span class="hljs-comment">//使用id选择器</span></span><br>    &#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="组件的data"><a href="#组件的data" class="headerlink" title="组件的data"></a>组件的data</h3><p>组件拥有自己的数据，组件中<strong>不能直接访问</strong>父级组件以及子组件的数据。</p>
<p>组件的extendOptions中的data属性的属性值必须是Function，这个Function是一个工厂函数，返回一个对象，对象中包含组件自己的数据。</p>
<p>（利用工厂函数的特点，即每次返回一个新的包含数据的对象，来防止相同组件数据相互干扰）</p>
<p><img src="/2020/12/24/Vue/vue/image-20200818150856104.png" srcset="/img/loading.gif" alt="image-20200818150856104"> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp2&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-comment">//注册组件</span></span><br><span class="javascript">        Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>, &#123;</span><br><span class="javascript">            template: <span class="hljs-string">&#x27;#temp2&#x27;</span>,   <span class="hljs-comment">//使用id选择器</span></span><br><span class="javascript">            data: <span class="hljs-function">() =&gt;</span> (&#123;  <span class="hljs-comment">//用小括号把返回的对象扩起来，防止解析成代码块</span></span><br><span class="javascript">                message: <span class="hljs-string">&#x27;hello world&#x27;</span></span><br>            &#125;)<br>        &#125;)<br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            data:&#123;<br><span class="javascript">                message:<span class="hljs-string">&#x27;hello Vue&#x27;</span></span><br>            &#125;<br>        &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>


<h3 id="父子组件之间的通信"><a href="#父子组件之间的通信" class="headerlink" title="父子组件之间的通信"></a>父子组件之间的通信</h3><p>==<font size="4">一、父传子：在子组件props属性挂载通信属性</font>== </p>
<p>子组件的props属性挂载通信属性，父组件使用子组件时，在子组件标签中使用v-bind为通信属性绑定父组件的数据，在子组件中通信属性的同名变量就获取到了父组件传来的数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span> <span class="hljs-attr">:message-c</span>=<span class="hljs-string">&quot;message&quot;</span> <span class="hljs-attr">:today</span>=<span class="hljs-string">&quot;time&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span>  <span class="hljs-comment">&lt;!--   驼峰命名法→连字符   --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123;today&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;console.log(messageC)&quot;</span>&gt;</span>通信<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">//注册组件</span></span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>, &#123;</span><br><span class="javascript">        template: <span class="hljs-string">&#x27;#temp&#x27;</span>,   <span class="hljs-comment">//使用id选择器</span></span><br><span class="javascript">        data: <span class="hljs-function">() =&gt;</span> (&#123;</span><br>            <br>        &#125;),<br><span class="javascript">        props:[<span class="hljs-string">&#x27;messageC&#x27;</span>,<span class="hljs-string">&#x27;today&#x27;</span>]</span><br>    &#125;)<br><span class="javascript">    <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>        data:&#123;<br><span class="javascript">            message:<span class="hljs-string">&#x27;hello Vue&#x27;</span>,</span><br><span class="javascript">            time:<span class="hljs-string">&#x27;2020-08-18&#x27;</span></span><br>        &#125;<br>    &#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><font color="red">由于dom标签中不区分大小写，当props挂载的通信属性名有大写字母时，应注意：</font></p>
<ol>
<li><p>使用驼峰命名法时（第一个字符小写，后面单词首字母大写），v-bind绑定的组件标签属性的属性名使用<strong>连字符写法</strong>。例如，上面的demo中 messageC   ,在绑定该属性时使用了  v-bind:message-c 。若子组件属性标签中绑定”messageC”，则默认传的通信属性实际为 “messagec”。</p>
</li>
<li><p>若通信属性第一个字母大写，则v-bind绑定的子元素标签属性名第一个字母大小写都可以。</p>
</li>
</ol>
<p><u>归纳：通信属性名第一个字母不要大写，尽量使用一个单词命名通信属性。若使用驼峰命名法，v-bind绑定时在大写字母前使用连字符。</u></p>
<p><strong>props属性的写法</strong></p>
<ol>
<li><p>数组写法</p>
<p>由于数组写法功能没有对象写法强大，所以较少使用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">props:[&#x27;messageC&#x27;,&#x27;today&#x27;]<br></code></pre></td></tr></table></figure></li>
<li><p>对象写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//指定通信属性的类型  type</span><br>props:&#123;<br>    messageC: <span class="hljs-built_in">String</span>,<br>    today: <span class="hljs-built_in">String</span>,<br>    age: <span class="hljs-built_in">Number</span>,<br>    books: [<span class="hljs-built_in">Array</span>, <span class="hljs-built_in">String</span>], <span class="hljs-comment">//指定Array或String类型</span><br>    owner: <span class="hljs-built_in">Object</span><br>&#125;<br><br><span class="hljs-comment">//指定默认值  default 当指定Object以及Array类型的默认值时，default应是一个工厂函数返回默认值</span><br><span class="hljs-comment">//要想子组件在一开始时使用default中的默认值，则父组件传来的数据初始值应为undefinded</span><br>props:&#123;<br>    messageC:&#123;<br>        type: <span class="hljs-built_in">String</span>,<br>        <span class="hljs-keyword">default</span>: <span class="hljs-string">&#x27;hello wolrd&#x27;</span><br>    &#125;<br>    books:&#123;<br>        type: [<span class="hljs-built_in">Array</span>, <span class="hljs-built_in">String</span>]<br>        <span class="hljs-function"><span class="hljs-title">default</span>(<span class="hljs-params"></span>)</span>&#123;<br>            <span class="hljs-keyword">return</span> [];<br>        &#125;<br>    &#125;<br>    owner:&#123;<br>        type: <span class="hljs-built_in">Object</span>,<br>        <span class="hljs-function"><span class="hljs-title">default</span>(<span class="hljs-params"></span>)</span>&#123;<br>            <span class="hljs-keyword">return</span> &#123;&#125;;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//指定必须传入 required</span><br>props:&#123;<br>    books:&#123;<br>        type: <span class="hljs-built_in">Array</span>,<br>        <span class="hljs-function"><span class="hljs-title">default</span>(<span class="hljs-params"></span>)</span>&#123;<br>            <span class="hljs-keyword">return</span> [];<br>        &#125;<br>        required: <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//自定义验证函数 validator</span><br><br></code></pre></td></tr></table></figure>



</li>
</ol>
<ul>
<li><p><strong>props属性挂载的通信属性（变量），从设计的初衷来看，应该是只读属性。</strong></p>
<p><strong>所以在组件里避免有代码可以修改通信属性的值。</strong></p>
</li>
<li><p><strong>通信属性的值和父组件的数据是动态绑定的，一旦父组件数据发生改变，会立刻传递给子组件。</strong></p>
</li>
</ul>
<p>==<font size="4">二、子传父：发射（emit）自定义事件</font>== </p>
<p>1.子组件监听DOM事件（如click），在事件响应函数中处理逻辑，然后发射自定义事件并传入通信数据。</p>
<p>👇</p>
<p>2.父组件在子组件的标签内监听自定义事件并接收通信数据。自定义事件的响应函数不需要传参。</p>
<p><font color="red">（虽然没有使用括号调用，但自定义事件的响应函数不会像dom事件一样默认传入事件对象，因为自定义事件没有事件对象。）</font></p>
<p><font color="red" size="5">注意：由于dom标签无法识别大小写，在没有使用Vue cli的情况下，自定义事件名不允许出现大写字母。例如 不允许出现”clickLi”这种事件名</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span> @<span class="hljs-attr">clickli</span>=<span class="hljs-string">&quot;getClick&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span>  <span class="hljs-comment">&lt;!--  父组件监听子组件的自定义事件clickli   --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in categories&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;myClick(item.id,item.name)&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!--事件响应函数--&gt;</span><br>            &#123;&#123;item.name&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">//注册组件</span></span><br><span class="javascript">    Vue.component(<span class="hljs-string">&#x27;cpn&#x27;</span>, &#123;</span><br><span class="javascript">        template: <span class="hljs-string">&#x27;#temp&#x27;</span>,   </span><br><span class="javascript">        data: <span class="hljs-function">() =&gt;</span> (&#123;</span><br>            categories:[<br>                &#123;<br>                    id:1,<br><span class="javascript">                    name:<span class="hljs-string">&#x27;mz&#x27;</span></span><br>                &#125;,<br>                &#123;<br>                    id:2,<br><span class="javascript">                    name:<span class="hljs-string">&#x27;ley&#x27;</span></span><br>                &#125;<br>            ]<br>        &#125;),<br>        methods:&#123;<br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">myClick</span>(<span class="hljs-params">id,name</span>)</span>&#123;</span><br><span class="javascript">                <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;clickli&#x27;</span>,id,name);  <span class="hljs-comment">//发生自定义事件，这里传入了两个通信数据id和name。</span></span><br>            &#125;<br>        &#125;<br>    &#125;)<br><span class="javascript">    <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">        el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>        data:&#123;<br><span class="javascript">            message:<span class="hljs-string">&#x27;hello Vue&#x27;</span>,</span><br><span class="javascript">            time:<span class="hljs-string">&#x27;2020-08-18&#x27;</span></span><br>        &#125;,<br>        methods:&#123;<br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">getClick</span>(<span class="hljs-params">id,name</span>)</span>&#123;</span><br><span class="javascript">                <span class="hljs-built_in">console</span>.log(id,name);</span><br>            &#125;<br>        &#125;<br>        <br>    &#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>




<h3 id="案例3"><a href="#案例3" class="headerlink" title="案例3"></a>案例3</h3><p>实现父子组件之间的双向通信。</p>
<p>在父组件的输入框输入要传递的数据，在子组件的文本框显示。</p>
<p>在子组件的输入框输入要传递的数据，在父组件的文本框显示。</p>
<p>在子组件的watch属性中定义要监听的数据的同名函数，以监听子组件数据的变化，并发送给父组件。</p>
<p><img src="/2020/12/24/Vue/vue/image-20200819181030339.png" srcset="/img/loading.gif" alt="image-20200819181030339"> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>父组件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>            向子传递输入框：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;today&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            子组件传来的数据：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">readonly</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ctoday&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;child&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span> <span class="hljs-attr">:today</span>=<span class="hljs-string">&quot;today&quot;</span> @<span class="hljs-attr">cinput</span>=<span class="hljs-string">&quot;getCtoday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>子组件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>                向父传递输入框：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.lazy</span>=<span class="hljs-string">&quot;inputDate&quot;</span>&gt;</span> <span class="hljs-comment">&lt;!--懒监听--&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                父组件传来的数据：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">readonly</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;today&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            data:&#123;<br><span class="javascript">                today:<span class="hljs-string">&#x27;2020-08-19&#x27;</span>,</span><br><span class="javascript">                ctoday:<span class="hljs-string">&#x27;&#x27;</span>,</span><br>            &#125;,<br>            methods:&#123;<br><span class="javascript">                <span class="hljs-function"><span class="hljs-title">getCtoday</span>(<span class="hljs-params">value</span>)</span>&#123;</span><br><span class="javascript">                    <span class="hljs-built_in">this</span>.ctoday=value;</span><br>                &#125;<br>            &#125;,<br>            components:&#123;<br>                cpn:&#123;<br><span class="javascript">                    template:<span class="hljs-string">&#x27;#temp&#x27;</span>,</span><br><span class="javascript">                    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">                        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">                            inputDate:<span class="hljs-string">&#x27;&#x27;</span></span><br>                        &#125;<br>                    &#125;,<br>                    props:&#123;<br>                        today:&#123;<br><span class="javascript">                            type:<span class="hljs-built_in">String</span></span><br>                        &#125;<br>                    &#125;,<br>                    watch:&#123;<br><span class="javascript">                        <span class="hljs-comment">//在watch中定义inputDate的同名函数，监听该数据的变化，处理逻辑</span></span><br><span class="javascript">                        <span class="hljs-function"><span class="hljs-title">inputDate</span>(<span class="hljs-params">newValue,oldValue</span>)</span>&#123; </span><br><span class="javascript">                            <span class="hljs-built_in">console</span>.log(oldValue,<span class="hljs-string">&#x27;=&gt;&#x27;</span>,newValue);</span><br><span class="javascript">                            <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;cinput&#x27;</span>,newValue);</span><br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>


<h3 id="父子组件之间的直接访问"><a href="#父子组件之间的直接访问" class="headerlink" title="父子组件之间的直接访问"></a>父子组件之间的直接访问</h3><p>==一、父组件直接访问子组件==</p>
<p>在父组件中，可以通过this.$children或this.$refs拿到所有子组件。</p>
<ul>
<li><p>$children属性是一个数组，可以像this.$children[index]的型式通过下标拿到子组件对象。（不常用）</p>
</li>
<li><p>$refs属性是一个对象，子组件标签中设置ref属性标识自己，父组件可以通过this.$refs[ref]的形式获取特定的子组件对象。（更常用）</p>
</li>
</ul>
<p>可访问到的子组件内容：几乎所有内容（数据、方法）。</p>
<p>==二、子组件直接访问父组件==</p>
<p>在子组件中，可以通过this.$parent拿到父组件对象。</p>
<p>同时可以使用this.$root直接拿到Vue实例对象。（Vue实例是根组件）</p>
<p>由于组件之间耦合度不应该太高，所以很少在子组件中访问父组件。</p>
<h3 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h3><p><strong>基本使用</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>按钮<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cpn&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>以下是一个插槽<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>插槽默认内容<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<ul>
<li><p>在组件的模板中留下slot标签标识插槽</p>
</li>
<li><p>插槽中可以留有默认内容</p>
</li>
<li><p>使用时在组件标签内为插槽填充内容</p>
</li>
</ul>
<p><strong>具名插槽</strong></p>
<p>定义：具有name属性的slot标签。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"> <br><br></code></pre></td></tr></table></figure>
<p>使用方法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span> <br>    	<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!----&gt;</span><br>            左插槽的div<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!----&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!----&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;left&quot;</span>&gt;</span>左插槽的span<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>


<ul>
<li>为组件的各个插槽标签填写name属性，标识具名插槽。</li>
<li>在使用组件时，在组件标签内为插槽填充内容，各个内容（html标签）的slot属性标明要往哪个插槽添加内容。</li>
<li>可以为同一个插槽添加多条内容（标签），具有相同slot属性的内容会全部添加到同一个插槽中。</li>
<li>如果添加的内容（标签）没有slot属性，则添加到所有不具名的插槽中。</li>
</ul>
<p><strong>作用域插槽</strong></p>
<p>应用情景：在父组件中为子组件的插槽中添加内容，但内容中需要访问子组件的内容。</p>
<p>旧版Vue方法：</p>
<ol>
<li><p>子组件模板中在作用域插槽绑定子组件数据，语法为 :data1=”==子组件数据1==” :data2=”==子组件数据2==”。data1、data2可以改各种任意名字，前面使用v-bind，代表作用域插槽中的变量名。</p>
</li>
<li><p>要想使用作用域插槽，必须使用template标签来替换插槽中的内容。</p>
</li>
<li><p>template标签中为slot-slope属性赋值，值为作用域对象变量名，之后便可以使用该对象拿到作用域插槽中的子组件数据。</p>
<template  slot="s1" slot-scope="s1scope">
    <span></span>
    <span></span>
</template>



</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;s1&quot;</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">&quot;s1scope&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;s1scope.lans.join(&#x27;-&#x27;)&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;s1&quot;</span> <span class="hljs-attr">:lans</span>=<span class="hljs-string">&quot;languages&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;lan in languages&quot;</span>&gt;</span><br>                    &#123;&#123;lan&#125;&#125;<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            components:&#123;<br>                cpn:&#123;<br><span class="javascript">                    template:<span class="hljs-string">&#x27;#temp&#x27;</span>,</span><br><span class="javascript">                    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">                        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">                            languages:[<span class="hljs-string">&#x27;C#&#x27;</span>,<span class="hljs-string">&#x27;Java&#x27;</span>,<span class="hljs-string">&#x27;Go&#x27;</span>]</span><br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>


<p>新版Vue的写法：</p>
<p>使用v-slot指令代替原本的slot属性+slot-scope属性。</p>
<p>v-slot:==插槽的name===”==作用域对象变量名==”</p>
<template  v-slot:s1="s1scope">
    <span></span>
    <span></span>
</template>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">cpn</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:s1</span>=<span class="hljs-string">&quot;s1scope&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;s1scope.lans.join(&#x27;-&#x27;)&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">cpn</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;temp&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;s1&quot;</span> <span class="hljs-attr">:lans</span>=<span class="hljs-string">&quot;languages&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;lan in languages&quot;</span>&gt;</span><br>                    &#123;&#123;lan&#125;&#125;<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-keyword">let</span> app=<span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">            el:<span class="hljs-string">&#x27;#app&#x27;</span>,</span><br>            components:&#123;<br>                cpn:&#123;<br><span class="javascript">                    template:<span class="hljs-string">&#x27;#temp&#x27;</span>,</span><br><span class="javascript">                    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;</span><br><span class="javascript">                        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">                            languages:[<span class="hljs-string">&#x27;C#&#x27;</span>,<span class="hljs-string">&#x27;Java&#x27;</span>,<span class="hljs-string">&#x27;Go&#x27;</span>]</span><br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>


<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>At its core,webpack is a static module bundler for modern JavaScript applications.</p>
<p>webpack是一个现代的JS应用的静态模块打包工具。</p>
<p><strong>核心：让我们可能进行模块化开发，并帮助处理模块间的依赖关系。</strong></p>
<p>而且不仅仅是js文件，css、图片、json等等在webpack中都可以被当做模块来使用。</p>
<p>支持AMD、CMD、CommonJS以及ES6模块化规范。</p>
<h3 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h3><ul>
<li><p>依赖于Node环境。Node版本&gt;8.9。</p>
</li>
<li><p>全局安装webpack </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install webpack@3.6.0 -g<br></code></pre></td></tr></table></figure></li>
<li><p>局部安装（开发时依赖）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install webpack@3.6.0 --save-dev<br></code></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h3><ol>
<li><p>在项目目录新建文件夹</p>
<p>dist    发布</p>
<p>src     源码</p>
</li>
<li><pre><code class="bash">webpack ./src/main.js ./dist/bundle.js
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs awk"><br>   根据main.js中的依赖，去打包所有需要的模块。<br><br><br><br>------<br><br><span class="hljs-comment">### webpack.config.js与package.json</span><br><br><br><br>**webpack的配置**<br><br>需求：设置默认的入口文件，执行webpack命令时打包该文件。<br><br>```javascript<br><span class="hljs-regexp">//</span>webpack.config.js  配置webpack的文件<br><br>const NodePath=require(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br>module.exports=&#123;<br>    entry:<span class="hljs-string">&#x27;./src/main.js&#x27;</span>,<span class="hljs-regexp">//</span>默认的入口文件，路径可以是相对路径<br>    output:&#123;<br>        path:NodePath.join(__dirname,<span class="hljs-string">&#x27;dist&#x27;</span>),<span class="hljs-regexp">//</span>输出文件的目录，必须使用绝对路径<br>        filename:<span class="hljs-string">&#x27;bundle.js&#x27;</span><span class="hljs-regexp">//</span>输出的文件名<br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure>

</code></pre>
</li>
</ol>
<p><strong>将webpack命令与npm命令绑定映射</strong></p>
<p><img src="/2020/12/24/Vue/vue/image-20200827231027114.png" srcset="/img/loading.gif" alt="image-20200827231027114"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run build<br></code></pre></td></tr></table></figure>
<p>相当于执行了 webpack指令，同时只有这样配置并使用该指令，才会优先使用局部（本地）中的webpack。（node_modules的bin目录下的控制台指令）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">webpack<br></code></pre></td></tr></table></figure>




<h2 id="Vue-CLI"><a href="#Vue-CLI" class="headerlink" title="Vue CLI"></a>Vue CLI</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol>
<li>依赖于Node环境，并全局安装webpack</li>
<li>npm intsall -g @vue/cli</li>
</ol>
<p>以上是安装脚手架3的步骤，如果需要兼容脚手架2的语法，需要额外执行第三条：</p>
<ol start="3">
<li>npm install -g @vue/cli-init</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#测试</span><br>vue --version<br></code></pre></td></tr></table></figure>


<h3 id="使用cli2初始化一个项目"><a href="#使用cli2初始化一个项目" class="headerlink" title="使用cli2初始化一个项目"></a>使用cli2初始化一个项目</h3><ol>
<li><pre><code class="dos">vue init webpack $项目名称   👉会在当前目录创建同名文件夹
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>![image<span class="hljs-number">-20200828201856002</span>](./image<span class="hljs-number">-20200828201856002.</span>png)<br><br><br><br>### 使用cli3初始化一个项目<br><br><span class="hljs-number">1.</span> ```dos<br>   vue create $项目名称<br></code></pre></td></tr></table></figure>
![image-20200922221753466](./image-20200922221753466.png)




</code></pre>
</li>
</ol>
<hr>
<h2 id="Vue-router-前端路由"><a href="#Vue-router-前端路由" class="headerlink" title="Vue-router 前端路由"></a>Vue-router 前端路由</h2><h3 id="前端路由原理"><a href="#前端路由原理" class="headerlink" title="前端路由原理"></a>前端路由原理</h3><p>路由的概念来源于服务端，在服务端中路由描述的是 URL 与处理函数之间的映射关系。</p>
<p>在 Web 前端单页应用 SPA(Single Page Application)中，路由描述的是 URL 与 UI 之间的映射关系，这种映射是单向的，即 URL 变化引起 UI 更新（无需刷新页面）。</p>
<p>后端渲染阶段</p>
<p>👇   +ajax</p>
<p>前后端分离阶段</p>
<p>👇   +前端路由</p>
<p>SPA 单页面富应用阶段</p>
<p><strong>如何实现前端路由？</strong></p>
<p>要实现前端路由，需要解决两个核心：</p>
<ul>
<li>如何改变 URL 却不引起页面刷新？</li>
<li>如何检测 URL 变化了？</li>
</ul>
<p>下面分别使用 hash 和 history 两种实现方式回答上面的两个核心问题。</p>
<ol>
<li><h5 id="hash实现"><a href="#hash实现" class="headerlink" title="hash实现"></a>hash实现</h5><ul>
<li>hash 是 URL 中 hash (#) 及后面的那部分，常用作锚点在页面内进行导航，改变 URL 中的 hash 部分不会引起页面刷新。</li>
<li>通过 hashchange 事件监听 URL 的变化，改变 URL 的方式只有这几种：通过浏览器前进后退改变 URL、通过<code>&lt;a&gt;</code>标签改变 URL、通过window.location改变URL，这几种情况改变 URL 都会触发 hashchange 事件</li>
</ul>
</li>
<li><h5 id="history-实现"><a href="#history-实现" class="headerlink" title="history 实现"></a>history 实现</h5><ul>
<li>history 提供了 pushState 和 replaceState 两个方法，这两个方法改变 URL 的 path 部分不会引起页面刷新。</li>
<li>history 提供类似 hashchange 事件的 popstate 事件，但 popstate 事件有些不同：通过浏览器前进后退改变 URL 时会触发 popstate 事件，通过pushState/replaceState或<code>&lt;a&gt;</code>标签改变 URL 不会触发 popstate 事件。好在我们可以拦截 pushState/replaceState的调用和<code>&lt;a&gt;</code>标签的点击事件来检测 URL 变化，所以监听 URL 变化可以实现，只是没有 hashchange 那么方便。</li>
</ul>
</li>
</ol>
<p>==参考资料：==[<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lguow/p/10921564.html]">https://www.cnblogs.com/lguow/p/10921564.html]</a></p>
<hr>
<h3 id="vue-router-安装与基本使用"><a href="#vue-router-安装与基本使用" class="headerlink" title="vue-router 安装与基本使用"></a>vue-router 安装与基本使用</h3><p><img src="/2020/12/24/Vue/vue/image-20200829225840412.png" srcset="/img/loading.gif" alt="image-20200829225840412"></p>
<p>目录结构：</p>
<p>project</p>
<p>—components目录</p>
<p>——Home.vue    //组件</p>
<p>——About.vue   //组件</p>
<p>—router目录</p>
<p>——index.js    //路由配置文件</p>
<p>—main.js</p>
<p>—App.vue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># main.js<br><br><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span>   <span class="hljs-comment">//根组件</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router/index.js&#x27;</span>  <span class="hljs-comment">//可省略index.js</span><br><br>Vue.config.productionTip=<span class="hljs-literal">false</span>;<br><br><span class="hljs-keyword">new</span> Vue(&#123;<br>    el:<span class="hljs-string">&#x27;#app&#x27;</span>,<br>    router:router,  <span class="hljs-comment">//挂载路由</span><br>    render:<span class="hljs-function">(<span class="hljs-params">h</span>)=&gt;</span>h(App)<br>&#125;)<br><br></code></pre></td></tr></table></figure>


<p><img src="/2020/12/24/Vue/vue/image-20200829231314899.png" srcset="/img/loading.gif" alt="image-20200829231314899"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># index.js<br><br><span class="hljs-comment">//事先准备好Home和About两个组件</span><br><br><span class="hljs-comment">/*路由组件与路由的映射 </span><br><span class="hljs-comment">	/home  👉  Home.vue</span><br><span class="hljs-comment">	/about 👉  About.vue</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> VueRouter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span> <br><br><span class="hljs-keyword">import</span> Home <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../components/Home.vue&#x27;</span><br><span class="hljs-keyword">import</span> About <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../components/About.vue&#x27;</span><br><br><br><span class="hljs-comment">// 1.通过Vue.use(插件)，安装插件</span><br>Vue.use(VueRouter);<br><br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/home&#x27;</span>,<br>        component:Home<br>    &#125;,<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/about&#x27;</span>,<br>        component:About<br>    &#125;<br>]<br><br><span class="hljs-keyword">const</span> router=<span class="hljs-keyword">new</span> VueRouter(&#123;<br>    routes:routes,<br>    mode:<span class="hljs-string">&#x27;hash&#x27;</span><br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue"># App.vue<br><br>&lt;template&gt;<br>	&lt;div id&#x3D;&quot;app&quot;&gt;<br>        <br>        &#x2F;&#x2F;router-link是由vue-router注册的全局组件，控制前端路由。默认会渲染为一个a标签<br>        &lt;router-link to&#x3D;&quot;&#x2F;home&quot;&gt;&lt;&#x2F;router-link&gt;    <br>        &lt;router-link to&#x3D;&quot;&#x2F;about&quot;&gt;&lt;&#x2F;router-link&gt;<br>        <br>        &#x2F;&#x2F;router-view是占位组件，可显示前端路由绑定的组件<br>        &lt;router-view&gt;&lt;&#x2F;router-view&gt;<br>        <br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>    import router from &#39;.&#x2F;router&#x2F;index.js&#39;   &#x2F;&#x2F; 导入路由，index.js可以省略<br>    <br>    export default &#123;<br>        name:&#39;App&#39;,<br>    &#125;<br>&lt;&#x2F;script&gt;<br><br>&lt;style&gt;<br>    <br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>
<p><img src="/2020/12/24/Vue/vue/image-20200830144015434.png" srcset="/img/loading.gif" alt="image-20200830144015434"></p>
<h3 id="默认路由（路由重定向）"><a href="#默认路由（路由重定向）" class="headerlink" title="默认路由（路由重定向）"></a>默认路由（路由重定向）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># router目录下的index.js<br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/&#x27;</span>,<br>        redirect:<span class="hljs-string">&#x27;/home&#x27;</span>    <span class="hljs-comment">//   根目录重定向到&#x27;/home&#x27;</span><br>    &#125;,<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/home&#x27;</span>,<br>        component:Home<br>    &#125;,<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/about&#x27;</span>,<br>        component:About<br>    &#125;<br>];<br><br><span class="hljs-keyword">const</span> router=<span class="hljs-keyword">new</span> VueRouter(&#123;<br>    routes:routes,<br>    mode:<span class="hljs-string">&#x27;hash&#x27;</span><br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure>


<h3 id="hash与HTMl5的history模式"><a href="#hash与HTMl5的history模式" class="headerlink" title="hash与HTMl5的history模式"></a>hash与HTMl5的history模式</h3><p>在不刷新页面的前提下，改变URL有两种方式：</p>
<p>1.改变url的hash（锚点），本质上是改变location对象的hash属性。（location.hash=xxx）</p>
<p>2.使用HTML5的history模式中的API。</p>
<pre><code>BOM中使用栈结构保存访问资源的历史记录，并使用一个指针指向当前的URL。</code></pre>
<ul>
<li>history.pushState( { } , ‘’ ,’home’)    ==’/home’ 压栈==</li>
<li>history.back( )              ==指针下移==</li>
<li>history.forward( )         ==指针上移==</li>
<li>history.go(n)                 ==指针跳转==</li>
<li>history.replaceState({ },’’, ‘home’)      ==’/home’ 替换栈顶==</li>
</ul>
<h3 id="在vue-router中使用history模式"><a href="#在vue-router中使用history模式" class="headerlink" title="在vue-router中使用history模式"></a>在vue-router中使用history模式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"># router目录下的index.js<br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/&#x27;</span>,<br>        redirect:<span class="hljs-string">&#x27;/home&#x27;</span>    <br>    &#125;,<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/home&#x27;</span>,<br>        component:Home<br>    &#125;,<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/about&#x27;</span>,<br>        component:About<br>    &#125;<br>];<br><br><span class="hljs-keyword">const</span> router=<span class="hljs-keyword">new</span> VueRouter(&#123;<br>    routes:routes,<br>    mode:<span class="hljs-string">&#x27;history&#x27;</span>                    <span class="hljs-comment">//在创建路由对象时，配置history模式。默认值为&#x27;hash&#x27;</span><br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure>




<h3 id="router-link的属性"><a href="#router-link的属性" class="headerlink" title="router-link的属性"></a>router-link的属性</h3><ol>
<li><p><strong>to属性</strong></p>
<p>用于声明式前端路由跳转，to属性指定跳转的绝对path、query以及hash。</p>
<p>&lt;router-link ==to===”/home”&gt;     &lt;/ router-link&gt;</p>
</li>
</ol>
<ol start="2">
<li><p><strong>tag属性</strong></p>
<p>用于指定router-link标签最终被渲染成的dom标签类型，默认情况下会被渲染成a标签。</p>
<p>&lt;router-link to=”/home” ==tag===”button”&gt;   &lt;/ router-link&gt;</p>
</li>
<li><p><strong>replace布尔属性</strong></p>
<p>在url跳转时使用history.replace方法，替换BOM历史记录栈结构的栈顶记录。</p>
<p>&lt;router-link to=”/home” tag=”button” ==replace==&gt;   &lt;/ router-link&gt;</p>
</li>
<li><p><strong>active-class属性</strong></p>
<p>用于指定router-link渲染出的标签在活跃（被点击）时的class属性值。默认为router-link-active。</p>
<p><img src="/2020/12/24/Vue/vue/image-20200830165640888.png" srcset="/img/loading.gif" alt="image-20200830165640888"></p>
<p>👇</p>
<p>&lt;router-link to=”/home” tag=”button” ==active-class=”active”==&gt;   &lt;/ router-link&gt;</p>
<p><img src="/2020/12/24/Vue/vue/image-20200830165558560.png" srcset="/img/loading.gif" alt="image-20200830165558560"></p>
</li>
</ol>
<p>   <em>在路由对象中全局修改所有router-link的active-class：</em></p>
   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> router=<span class="hljs-keyword">new</span> VueRouter(&#123;<br>    routes,<br>    mode:<span class="hljs-string">&#x27;history&#x27;</span>,<br>    linkActiveClass:<span class="hljs-string">&#x27;active&#x27;</span>  <span class="hljs-comment">//修改linkActiveClass属性</span><br>&#125;)<br></code></pre></td></tr></table></figure>


<h3 id="router和-route"><a href="#router和-route" class="headerlink" title="$router和$route"></a>$router和$route</h3><p><strong>一、区别</strong></p>
<p><code>this.$router</code>是VueRouter的实例。</p>
<p>当导航到不同url，可以使用<code>this.$router.push</code>方法，这个方法则会向history栈里面添加一条记录，当点击浏览器回退按钮或者<code>this.$router.back()</code>就会回退之前的url。</p>
<p><code>this.$route</code>相当于当前激活的路由对象，包含当前url解析得到的数据，可以从对象里获取一些数据，如name,path,query,params等。</p>
<p><strong>二、联系</strong></p>
<p><code>$router</code>和<code>$route</code>是Vue原型对象上的属性，而所有组件都是Vue类的实例，所以我们能通过组件的隐式原型链访问到这两个属性。</p>
<p><strong>三、常见使用</strong></p>
<p><code>this.$router</code></p>
<ol>
<li><p>push方法</p>
<p>push方法其实和<code>&lt;router-link :to=&quot;...&quot;&gt;</code>是等同的，会向 history 栈添加一个新的记录，当我们点击浏览器的返回按钮时可以看到之前的页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$router.push(path)<br></code></pre></td></tr></table></figure></li>
<li><p>go方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//页面路由跳转 前进或者后退</span><br><span class="hljs-built_in">this</span>.$router.go(n)<br></code></pre></td></tr></table></figure></li>
<li><p>replace方法</p>
<p>push方法会向 history 栈添加一个新的记录，而replace方法是替换当前的记录，并置为history栈顶。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$router.replace(path)<br></code></pre></td></tr></table></figure>


</li>
</ol>
<p><code>this.$route</code></p>
<p>$route对象表示当前的路由信息，包含了当前 URL 解析得到的信息。包含当前的路径，参数，query对象等。</p>
<ol>
<li><p>$route.path<br>   字符串，对应当前路由的路径，总是解析为绝对路径，如 “/foo/bar”。</p>
</li>
<li><p>$route.params<br>   一个 key/value 对象，包含了 动态片段 和 全匹配片段，<br>   如果没有路由参数，就是一个空对象。</p>
</li>
<li><p>$route.query<br>   一个 key/value 对象，表示 URL 查询参数。<br>   例如，对于路径 /foo?user=1，则有 $route.query.user == 1，<br>   如果没有查询参数，则是个空对象。</p>
</li>
<li><p>$route.hash<br>   当前路由的 hash 值 (不带 #) ，如果没有 hash 值，则为空字符串。锚点</p>
</li>
<li><p>$route.fullPath<br>   完成解析后的 URL，包含查询参数和 hash 的完整路径。</p>
</li>
<li><p>$route.matched<br>   数组，包含当前匹配的路径中所包含的所有片段所对应的配置参数对象。</p>
</li>
<li><p>$route.name  当前路径名字</p>
</li>
<li><p>$route.meta 路由元信息</p>
</li>
</ol>
<h3 id="编程式前端路由跳转"><a href="#编程式前端路由跳转" class="headerlink" title="编程式前端路由跳转"></a>编程式前端路由跳转</h3><p>即通过代码调用api跳转路由。</p>
<p>而在router-link标签中通过to属性跳转路由称作声明式前端路由跳转，其本质还是调用了$router.push方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue"># App.vue<br><br>&lt;template&gt;<br>	&lt;div id&#x3D;&quot;app&quot;&gt;<br>        <br>        &lt;button @click&#x3D;&quot;clickhome&quot;&gt;去主页&lt;&#x2F;button&gt;  &#x2F;&#x2F;使用按钮而不是router-link<br>        &lt;router-view&gt;&lt;&#x2F;router-view&gt;<br>        <br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>    import router from &#39;.&#x2F;router&#x2F;index.js&#39;   &#x2F;&#x2F; 导入路由，index.js可以省略<br>    <br>    export default &#123;<br>        name:&#39;App&#39;,<br>        router:router,<br>        methods:&#123;<br>            clickHome()&#123;<br>                &#x2F;&#x2F;调用组件的$router的push方法跳转路由<br>                &#x2F;&#x2F;相当于执行了history.pushState(&#39;&#x2F;home&#39;)<br>                &#x2F;&#x2F;相应的还有$router.replace(path)方法<br>                this.$router.push(&#39;&#x2F;home&#39;);    <br>                &#x2F;&#x2F;this.$router.replace(&#39;&#x2F;home&#39;);<br>            &#125;<br>        &#125;<br>    &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>


<p><strong>Vue官方解析</strong></p>
<p><code>router.push(location, onComplete?, onAbort?)</code></p>
<p><strong>注意</strong>：在 Vue 实例内部，你可以通过 <code>$router</code> 访问路由实例。因此你可以调用 <code>this.$router.push</code>。</p>
<p>想要导航到不同的 URL，则使用 <code>router.push</code> 方法。这个方法会向 history 栈添加一个新的记录，所以，当用户点击浏览器后退按钮时，则回到之前的 URL。</p>
<p>当你点击 <code>&lt;router-link&gt;</code> 时，这个方法会在内部调用，所以说，点击 <code>&lt;router-link :to=&quot;...&quot;&gt;</code> 等同于调用 <code>router.push(...)</code>。</p>
<table>
<thead>
<tr>
<th>声明式</th>
<th>编程式</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;router-link :to=&quot;...&quot;&gt;</code></td>
<td><code>router.push(...)</code></td>
</tr>
</tbody></table>
<p>push/replace方法的参数可以是一个字符串路径，或者一个描述地址的对象。例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 字符串</span><br>router.push(<span class="hljs-string">&#x27;home&#x27;</span>)<br><br><span class="hljs-comment">// 对象</span><br>router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;home&#x27;</span> &#125;)<br><br><span class="hljs-comment">// 命名的路由</span><br>router.push(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;123&#x27;</span> &#125;&#125;)<br><br><span class="hljs-comment">// 带查询参数，变成 /register?plan=private</span><br>router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;register&#x27;</span>, <span class="hljs-attr">query</span>: &#123; <span class="hljs-attr">plan</span>: <span class="hljs-string">&#x27;private&#x27;</span> &#125;&#125;)<br></code></pre></td></tr></table></figure>
<p><strong>注意</strong>：如果提供了 <code>path</code>，<code>params</code> 会被忽略，上述例子中的 <code>query</code> 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 <code>name</code> 或手写完整的带有参数的 <code>path</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> userId = <span class="hljs-string">&#x27;123&#x27;</span><br>router.push(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-attr">params</span>: &#123; userId &#125;&#125;) <span class="hljs-comment">// -&gt; /user/123</span><br>router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">`/user/<span class="hljs-subst">$&#123;userId&#125;</span>`</span> &#125;) <span class="hljs-comment">// -&gt; /user/123</span><br><span class="hljs-comment">// 这里的 params 不生效</span><br>router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-attr">params</span>: &#123; userId &#125;&#125;) <span class="hljs-comment">// -&gt; /user</span><br></code></pre></td></tr></table></figure>


<p><strong>注意：</strong>push方法中的<code>path</code>可以是相对路径。例如：</p>
<ol>
<li><p>若当前<code>path</code>为<code>/user</code>,则使用<code>$router.push(&#39;./user/mz&#39;)</code>可以跳转到<code>/user/mz</code>。</p>
<p>原因是<code>/user</code>的当前目录仍然为==根目录 /== 。</p>
</li>
<li><p>若当前path为<code>/user/</code>,则使用<code>$router.push(&#39;./mz&#39;)</code>就能跳转到<code>/user/mz</code></p>
</li>
</ol>
<p>同样的规则也适用于 <code>router-link</code> 组件的 <code>to</code> 属性。</p>
<p><strong>注意</strong>： 如果目的地和当前路由相同，只有参数发生了改变 (比如从一个用户资料到另一个 <code>/users/1</code> -&gt; <code>/users/2</code>)，你需要使用 <a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%93%8D%E5%BA%94%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%98%E5%8C%96"><code>beforeRouteUpdate</code></a> 来响应这个变化 (比如抓取用户信息)。</p>
<p><strong>坑</strong>🕳：</p>
<p><font color='red'>在vue-router中，使用$router.push/replace时会检查是否重复跳转至当前所在路由，如果是，则会抛出异常，但不影响功能使用</font></p>
<p>解决方法：</p>
<p>方法1.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"># 在router目录下的index.js (路由文件最后加载以下代码片段)<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    let router = new VueRouter(&#123;...&#125;)</span><br><span class="hljs-comment">    ....</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> originalPush = VueRouter.prototype.push; <span class="hljs-comment">//解决push方法的bug</span><br>VueRouter.prototype.push = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span> (<span class="hljs-params">location</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> originalPush.call(<span class="hljs-built_in">this</span>, location).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> err)<br>&#125;;<br><br><span class="hljs-keyword">const</span> originalReplace = VueRouter.prototype.replace;  <span class="hljs-comment">//解决replace方法的bug</span><br>VueRouter.prototype.replace = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span> (<span class="hljs-params">location</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> originalReplace.call(<span class="hljs-built_in">this</span>, location).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> err)<br>&#125;;<br><br><span class="hljs-comment">// export default router</span><br></code></pre></td></tr></table></figure>
<p>方法2.</p>
<pre><code>下载指定版本的vue-router  </code></pre>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">npm</span> i vue-router@<span class="hljs-number">3</span>.<span class="hljs-number">0</span> --save<br></code></pre></td></tr></table></figure>




<p>[<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43202608/article/details/98884620?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1%5D">https://blog.csdn.net/weixin_43202608/article/details/98884620?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1]</a></p>
<h3 id="动态路由与路由参数"><a href="#动态路由与路由参数" class="headerlink" title="动态路由与路由参数"></a>动态路由与路由参数</h3><p>==（以动态二级路由为例）==</p>
<p>动态路由的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"># router👉index.js<br><br><span class="hljs-keyword">import</span> User <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;xxx&#x27;</span>  <span class="hljs-comment">//导入User组件</span><br><span class="hljs-keyword">import</span> Login <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;xxx&#x27;</span><br><br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>    	path:<span class="hljs-string">&#x27;/user&#x27;</span>,<br>        component:Login,<br>        children:[<br>            &#123;<br>                name:<span class="hljs-string">&#x27;userInfo1&#x27;</span>,<br>                path:<span class="hljs-string">&#x27;:userId&#x27;</span>,<br>                component:User<br>            &#125;<br>        ]<br>    &#125;,<br>    <br>    &#123;<br>        name:<span class="hljs-string">&#x27;userInfo2&#x27;</span><br>        path:<span class="hljs-string">&#x27;/user/:userId&#x27;</span>, <span class="hljs-comment">//二级路由，只有当userId占位处不为空串时，才匹配该条路由</span><br>        component:User<br>    &#125;<br>]<br></code></pre></td></tr></table></figure>
<p>一级路由组件向二级路由传递参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue"># Login.vue<br><br>&lt;template&gt;<br>	&lt;div class&#x3D;&quot;login&quot;&gt;<br>        <br>        &lt;!-- 指定跳转的完整绝对路径 --&gt;<br>        &lt;router-link :to&#x3D;&quot;&#96;&#x2F;user&#x2F;$&#123;userId&#125;&#96;&quot;&gt;登录1&lt;&#x2F;router-link&gt;<br>        &lt;!--相当于👇--&gt;<br>        &lt;router-link :to&#x3D;&quot;&#123;path:&#96;&#x2F;user&#x2F;$&#123;userId&#125;&#96;&#125;&quot;&gt;登录1&lt;&#x2F;router-link&gt;<br>        <br>        <br>        &lt;!-- 指定跳转到名为userInfo2的路由，并设置参数 --&gt;<br>        &lt;router-link :to&#x3D;&quot;&#123;name:&#39;userInfo&#39;,params:&#123;userId&#125;&#125;&quot;&gt;登录2&lt;&#x2F;router-link&gt;<br>        <br>        &lt;router-view&gt;&lt;&#x2F;router-view&gt;<br>        <br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        name:&#39;login&#39;,<br>        data()&#123;<br>            return &#123;<br>                userId:&#39;mzleman&#39;<br>            &#125;<br>        &#125;<br>    &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>
<p>二级路由组件获取路由参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue"># User.vue<br><br>&lt;template&gt;<br>	&lt;div class&#x3D;&quot;user&quot;&gt;<br>        &lt;div&gt;头像&lt;&#x2F;div&gt;<br>        &lt;!-- 获取当前路由中的参数  $route.params  --&gt;<br>        &lt;h2&gt;id:&lt;span&gt;&#123;&#123;$route.params.userId&#125;&#125;&lt;&#x2F;span&gt;  <br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        name:&#39;login&#39;,<br>        data()&#123;<br>            return &#123;<br>                userId:&#39;mzleman&#39;<br>            &#125;<br>        &#125;<br>    &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>




<h3 id="路由嵌套"><a href="#路由嵌套" class="headerlink" title="路由嵌套"></a>路由嵌套</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"># router👉index.js<br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;xxx.vue&#x27;</span><br><span class="hljs-keyword">import</span> Home <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;xxx.vue&#x27;</span><br><span class="hljs-keyword">import</span> User <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;xxx.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>        name:<span class="hljs-string">&#x27;root&#x27;</span>,<br>        path:<span class="hljs-string">&#x27;/&#x27;</span>,<br>        component:App,<br>        <span class="hljs-comment">//开始嵌套</span><br>        children:[                 <span class="hljs-comment">//在路由配置对象中的children属性，可以设置子路由</span><br>            &#123;<br>                <span class="hljs-comment">//   -&gt; /home</span><br>                name:<span class="hljs-string">&#x27;homepage&#x27;</span>,<br>                path:<span class="hljs-string">&#x27;home&#x27;</span>,       <span class="hljs-comment">//子路由配置中，路径使用相对路径 </span><br>                component:Home<br>            &#125;,<br>            &#123;<br>                <span class="hljs-comment">//   -&gt; /user/...</span><br>                name:<span class="hljs-string">&#x27;userinfo&#x27;</span>,      <span class="hljs-comment">//为路由设置name属性 唯一标识该条路由</span><br>                path:<span class="hljs-string">&#x27;user/:userId&#x27;</span>,  <span class="hljs-comment">// 子路由配置中，使用动态路由</span><br>                component:User<br>            &#125;<br>        ]<br>    &#125;<br>]<br></code></pre></td></tr></table></figure>
<p><code>路由的嵌套只是用一种结构化的方式配置前端路由信息，将逻辑上有层次关系的路由放在一起，但相应的路由组件不存在绝对的层次化渲染关系。</code></p>
<p><code>子路由对应的component如何显示，只与该路由是在哪一个组件中跳转有关，子路由组件在该组件中的router-view中显示。</code></p>
<p><font color='red'>为了避免组件渲染后的层次关系混乱，父级路由对应的组件与子路由对应的组件也应该具有相应的父子关系。</font></p>
<h3 id="路由组件懒加载"><a href="#路由组件懒加载" class="headerlink" title="路由组件懒加载"></a>路由组件懒加载</h3><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html">https://router.vuejs.org/zh/guide/advanced/lazy-loading.html</a></p>
<p>在Vue Cli的默认配置情况下，所有的开发组件vue文件 (包括main.js)会被打包到一个app.js中，这就使得该js文件十分庞大。</p>
<p>(除了app.js会被第一时间请求外，还有第三方包的打包文件vendor.js以及模块化底层支撑的文件manifest.js会被第一时间请求至前端)</p>
<p>在使用组件懒加载后，每个懒加载的组件会被单独打包到一个js文件中（而不是app.js），浏览器会根据前端路由，按需向服务器请求组件的js打包文件。</p>
<p><img src="/2020/12/24/Vue/vue/image-20200901110233735.png" srcset="/img/loading.gif" alt="image-20200901110233735"></p>
<p><img src="/2020/12/24/Vue/vue/image-20200901110610641.png" srcset="/img/loading.gif" alt="image-20200901110610641"></p>
<p><strong>基本语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"># router👉index.js<br><span class="hljs-keyword">import</span> VueRouter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br><span class="hljs-keyword">const</span> Home=<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../components/Home.vue&#x27;</span>)<br><br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/home&#x27;</span>,<br>        component:Home<br>    &#125;<br>]<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> VueRouter(&#123;<br>    routes,<br>    mode:<span class="hljs-string">&#x27;history&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure>




<h3 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h3><p>参考资料：<a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html">https://router.vuejs.org/zh/guide/advanced/navigation-guards.html</a></p>
<p><strong>一、全局导航守卫（钩子）</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"># router 👉 index.js<br><br><span class="hljs-keyword">const</span> routes=[<br>    &#123;<br>        path:<span class="hljs-string">&#x27;/&#x27;</span>,<br>        component:Index,<br>        meta:&#123;    <span class="hljs-comment">//在元数据meta中保存一些路由信息</span><br>            title:<span class="hljs-string">&#x27;首页&#x27;</span><br>        &#125;<br>        children:[<br>            &#123;<br>                path:<span class="hljs-string">&#x27;home&#x27;</span>,<br>                component:Home,<br>                meta:&#123;<br>                    title:<span class="hljs-string">&#x27;主页&#x27;</span><br>                &#125;<br>            &#125;<br>        ]<br>        <br>    &#125;<br>];<br><br><span class="hljs-keyword">let</span> router=<span class="hljs-keyword">new</span> VueRouter(&#123;<br>    routes,<br>    mode:<span class="hljs-string">&#x27;history&#x27;</span><br>&#125;);<br><br><span class="hljs-comment">/* beforeEach方法加载前置守卫 */</span><br>router.beforeEach( guard:<span class="hljs-built_in">Function</span> );  <span class="hljs-comment">//钩子（守卫）的用法类似于中间件，可挂载多个钩子</span><br><br><span class="hljs-comment">/*afterEach方法加载后置钩子*/</span><br>router.afterEach(hook:<span class="hljs-built_in">Function</span>);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure>
<p><strong>注意：</strong> 前置钩子（守卫）要传入三个参数，分别为：</p>
<ol>
<li><p>to：Route对象 ，将要跳转到的下一个活跃路由</p>
</li>
<li><p>from： Route对象，当前的活跃路由，即$route对象</p>
</li>
<li><p>next ：Function  下一个钩子函数，必须使在钩子内调用一下 next( )</p>
<pre><code>后置钩子要传入两个参数，分别为to  和from。</code></pre>
</li>
</ol>
<p>​      </p>
<p><strong>案例：在跳转到各条路由时更新标签页的标题</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>)=&gt;</span>&#123;<br>    <br>    <span class="hljs-built_in">console</span>.log(to);<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">from</span>);<br>    <br>    <span class="hljs-built_in">document</span>.title=to.meta.title;<br>   <br>    <span class="hljs-comment">//document.title=to.matched[0].meta.title </span><br>   <span class="hljs-comment">//matched是一个数组，保存了所有匹配的路由</span><br>    <br>    next();<br>&#125;);<br></code></pre></td></tr></table></figure>


<p><strong>二、路由独享守卫</strong></p>
<p>你可以在路由配置上直接定义 <code>beforeEnter</code> 守卫：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter(&#123;<br>  routes: [<br>    &#123;<br>      path: <span class="hljs-string">&#x27;/foo&#x27;</span>,<br>      component: Foo,<br>      beforeEnter: <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>        <span class="hljs-comment">// ...</span><br>      &#125;<br>    &#125;<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这些守卫与全局前置守卫的方法参数是一样的。</p>
<p><strong>三、组件内的守卫</strong></p>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E7%BB%84%E4%BB%B6%E5%86%85%E7%9A%84%E5%AE%88%E5%8D%AB">https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E7%BB%84%E4%BB%B6%E5%86%85%E7%9A%84%E5%AE%88%E5%8D%AB</a></p>
<p><strong>四、完整的导航解析流程</strong></p>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AF%BC%E8%88%AA%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B">https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AF%BC%E8%88%AA%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B</a></p>
<h3 id="keep-alive包裹router-view"><a href="#keep-alive包裹router-view" class="headerlink" title="keep-alive包裹router-view"></a>keep-alive包裹router-view</h3><p><code>keep-alive是Vue内置的一个组件，可以使被包含的组件保留状态，或避免重新渲染（维持生命周期）。</code></p>
<p>使用keep-alive包裹一个需要反复使用的一个组件，可以避免组件在不活跃时被销毁，在活跃时被新建。同时该组件会具有新的生命周期函数actived和deactived。</p>
<p><strong>案例：组件在失活时记录组件状态，组件重新活跃时返回至上一状态</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue"># Home.vue<br># &lt;keep-alive&gt;标签包裹了Home.vue的父级组件中的&lt;router-view&gt;<br><br>&lt;template&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        name:&#39;Home&#39;,<br>        data()&#123;<br>            return &#123;<br>                path:&#39;&#x2F;home&#39;<br>            &#125;<br>        &#125;,<br>        actived()&#123;<br>            this.$router.replace(this.path);   &#x2F;&#x2F;返回至失活前的状态<br>        &#125;,<br>        beforeRouteLeave(to,from,next)&#123;         &#x2F;&#x2F;组件内的后置勾子<br>            this.path&#x3D;this.$route.path;<br>            next();<br>        &#125;<br>    &#125;<br>&lt;&#x2F;script&gt;    <br></code></pre></td></tr></table></figure>


<p><strong>keep-alive标签的exclude和include属性</strong></p>
<p>keep-alive标签可以利用exclude与include属性指定排除或包含哪些组件的生命周期会被维持，属性值为逗号分隔的字符串，对应组件定义时的name属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;router-link to&#x3D;&quot;&#x2F;home&quot;&gt;&lt;&#x2F;router-link&gt;<br>&lt;keep-alive exclude&#x3D;&quot;Profile,User&quot;&gt;<br>    &lt;router-view&#x2F;&gt;<br>&lt;&#x2F;keep-alive&gt;<br></code></pre></td></tr></table></figure>




<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><p> <img src="/2020/12/24/Vue/vue/image-20200926103349466.png" srcset="/img/loading.gif" alt="image-20200926103349466"></p>
<p><img src="/2020/12/24/Vue/vue/image-20200926103508601.png" srcset="/img/loading.gif" alt="image-20200926103508601"></p>
<blockquote>
<p>在Vuex中保存的状态（数据）是响应式的。</p>
</blockquote>
<p><strong>应用场景👇</strong></p>
<p><img src="/2020/12/24/Vue/vue/image-20200926103551896.png" srcset="/img/loading.gif" alt="image-20200926103551896"></p>
<p><strong>单个组件的状态管理:</strong></p>
<p><img src="/2020/12/24/Vue/vue/image-20200926104012022.png" srcset="/img/loading.gif" alt="image-20200926104012022"></p>
<blockquote>
<p>Vue已经帮我们做好了单个页面的状态管理，即组件的数据是比较独立的，可以通过各种Action的回调函数去修改State（数据），并通过响应式去更新View。</p>
<p>但如果是多个界面（组件）的状态管理就可能需要Vuex。</p>
</blockquote>
<p><strong>Vuex的基本思想：</strong></p>
<p><img src="/2020/12/24/Vue/vue/image-20200926104500158.png" srcset="/img/loading.gif" alt="image-20200926104500158"></p>
<p><img src="/2020/12/24/Vue/vue/image-20200926104627320.png" srcset="/img/loading.gif" alt="image-20200926104627320"></p>
<h3 id="什么情况下应该使用Vuex？"><a href="#什么情况下应该使用Vuex？" class="headerlink" title="什么情况下应该使用Vuex？"></a>什么情况下应该使用Vuex？</h3><p>Vuex 可以帮助我们管理共享状态，并附带了更多的概念和框架。这需要对短期和长期效益进行权衡。</p>
<p>如果不打算开发大型单页应用，应用够简单，最好不要使用 Vuex。一个简单的 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/state-management.html#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E8%B5%B7%E6%AD%A5%E4%BD%BF%E7%94%A8">store 模式</a>就足够了。但是，如果需要构建一个中大型单页应用，就要考虑如何更好地在组件外部管理状态，Vuex 是不错的选择。</p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install vuex --save<br></code></pre></td></tr></table></figure>
<p>在 Vue 的单页面应用中使用，需要使用<code>Vue.use(Vuex)</code>调用插件。</p>
<p>之后新建一个Vuex.Store实例，将其注入到Vue根实例中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br>Vue.use(Vuex)<br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>  state: &#123;<br>    count: <span class="hljs-number">0</span><br>  &#125;,<br>  getter: &#123;<br>    doneTodos: <span class="hljs-function">(<span class="hljs-params">state, getters</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> state.todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.done)<br>    &#125;<br>  &#125;,<br>  mutations: &#123;<br>    increment (state, payload) &#123;<br>      state.count++<br>    &#125;<br>  &#125;,<br>  actions: &#123;<br>    <span class="hljs-function"><span class="hljs-title">addCount</span>(<span class="hljs-params">context</span>)</span> &#123;<br>      <span class="hljs-comment">// 可以包含异步操作</span><br>      <span class="hljs-comment">// context 是一个与 store 实例具有相同方法和属性的 context 对象</span><br>    &#125;<br>  &#125;<br>&#125;)<br><span class="hljs-comment">// 注入到根实例</span><br><span class="hljs-keyword">new</span> Vue(&#123;<br>  el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>  <span class="hljs-comment">// 把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件</span><br>  store,<br>  template: <span class="hljs-string">&#x27;&lt;App/&gt;&#x27;</span>,<br>  components: &#123; App &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后通过mutations改变状态：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;increment&#x27;</span>)<br></code></pre></td></tr></table></figure>


<blockquote>
<p>在项目中使用Vuex，常常在src目录下创建store文件夹统一管理Vuex的单一状态树的内容。</p>
</blockquote>
<hr>
<h3 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h3><p><code>State，Getter，Mutation，Action，Module，</code></p>
<p><strong>Vuex 主要有四部分：</strong></p>
<ol>
<li>state：包含了<code>store</code>中存储的各个状态。</li>
<li>getter: 类似于 Vue 中的计算属性，根据其他 getter 或 state 计算返回值。</li>
<li>mutation: 一组方法，是改变<code>store</code>中状态的执行者，<strong>只能是同步操作</strong>。</li>
<li>action: 一组方法，其中可以<strong>包含异步操作</strong>,但只允许通过提交mutations修改状态。</li>
</ol>
<hr>
<h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3><p>Vuex 使用 <code>state</code> 来存储应用中需要共享的状态。</p>
<p>在根组件（Vue实例）以及子组件中使用<code>this.$store.state</code>访问共享状态。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs vue">&#x2F;&#x2F; Cpn.vue<br>&#x2F;*<br>	const store &#x3D; new Vuex.Store(&#123;<br>  		state: &#123;<br>    		count: 0,<br>			obj: &#123;name: &#39;mz&#39;, age: 23&#125;<br>		&#125;<br>	&#125;)<br>	<br>*&#x2F;<br><br>&lt;template&gt;<br>	&lt;div&gt;<br>        &lt;h2&gt; &#123;&#123;count&#125;&#125; &lt;&#x2F;h2&gt; <br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>	export default &#123;<br>        name: &#39;Cpn&#39;,<br>        computed: &#123;<br>            count()&#123;<br>                return this.$store.state.count  &#x2F;&#x2F; 访问state中的count<br>            &#125;<br>        &#125;<br>    &#125;<br>&lt;&#x2F;script&gt;<br><br>&lt;style&gt;&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>在state初始化时就已经定义的数据以及数据的属性才会被添加到响应式系统。</p>
<p>( 在Vue中所有需要响应式的数据都是这样 )</p>
<p>所以通过this.$store.state.obj[‘xxx’]的方式为数据添加额外的属性值时，虽然数据确实变化了，但不会更新View。</p>
<p>此时，需要通过Vue.set方法来修改状态的属性，可以确保数据是响应式的。</p>
<p>Vue.set(obj, propName, value)</p>
<p>删除状态的属性需要通过Vue.delete方法实现响应式。</p>
<p>Vue.delete(obj, propName)</p>
</blockquote>
<hr>
<h3 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h3><p>类似于 Vue 中的 计算属性（可以认为是 store 的计算属性），getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。</p>
<p>getter 方法接受<code>state</code>作为其第一个参数，<code>state</code>参数即Store对象中的state：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>  state: &#123;<br>    todos: [<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;...&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;...&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> &#125;<br>    ]<br>  &#125;,<br>  getters: &#123;<br>    doneTodos: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> state.todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.done)<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p>getter 方法接受<code>getters</code>作为其第二个参数，<code>getters</code>参数即Store对象中的getters：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>  state: &#123;<br>    todos: [<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;...&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;,<br>      &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;...&#x27;</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> &#125;<br>    ]<br>  &#125;,<br>  getters: &#123;<br>    doneTodos: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> state.todos.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.done);<br>    &#125;,<br>    doneTodosCount: <span class="hljs-function">(<span class="hljs-params">state, getters</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> getters.doneTodos.length;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p><strong>在组件中访问getters：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">computed: &#123;<br>    <span class="hljs-function"><span class="hljs-title">cpnDoneTodos</span>(<span class="hljs-params"></span>)</span>&#123;<br>		<span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$store.getters.doneTodos;<br>	&#125;,<br>	<span class="hljs-function"><span class="hljs-title">cpnDoneTodosCount</span>(<span class="hljs-params"></span>)</span>&#123;<br>		<span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$store.getters.doneTodosCount;	<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p><strong>getter方法返回一个函数，实现给getter传参：</strong></p>
<p>这种做法在对 store 里的数组进行查询时非常有用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">getters: &#123;<br>  <span class="hljs-comment">// ...</span><br>  getTodoById: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> state.todos.find(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === id)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在组件中为getter返回的函数传参：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$store.getters.getTodoById(<span class="hljs-number">2</span>) <span class="hljs-comment">// -&gt; &#123; id: 2, text: &#x27;...&#x27;, done: false &#125;</span><br></code></pre></td></tr></table></figure>
<hr>
<h3 id="mutations"><a href="#mutations" class="headerlink" title="mutations"></a>mutations</h3><p>在Vuex中约定必须通过mutation修改状态，不允许通过<code>$store.state.xxx = xxx</code>的形式直接修改。（虽然这样没什么可怕的后果，只是通过mutation修改能保存修改日志与状态快照）</p>
<blockquote>
<p><code>state</code>和<code>getter</code>都是状态值本身，<code>mutations</code>才是改变状态的执行者。</p>
<p><strong>注意：<code>mutations</code>只能是同步地更改状态。</strong></p>
</blockquote>
<p>Vuex 中的 mutation 非常类似于事件：每个 mutation 都有一个字符串的 <strong>事件类型 (type)</strong> 和 一个 **回调函数 (handler)**。这个回调函数就是我们实际进行状态更改的地方，并且它会接受 state 作为第一个参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>  state: &#123;<br>    count: <span class="hljs-number">1</span><br>  &#125;,<br>  mutations: &#123;<br>    increment (state) &#123;<br>      <span class="hljs-comment">// 变更状态</span><br>      state.count++<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p>在组件中提交mutation，并执行回调函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;increment&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p><code>commit</code>方法中第一个参数可以是<code>事件类型名(String)</code>；</p>
<p>第二个参数是传递的<code>载荷</code>，可以作为实参传递给mutation的回调函数，第二个参数<code>是可选的</code>。</p>
<blockquote>
<p>提交mutation时，不可以像发送action一样能够获取mutation回调函数的返回值。</p>
<p>即在mutation的回调函数中返回值是无意义的。</p>
</blockquote>
<p><strong>规范地提交mutation并传参：</strong></p>
<p>在规范中，mutation的回调函数支持传入第二个参数payload，作为载荷。载荷中可以保存向mutation回调函数传递的实参。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ...</span><br>mutations: &#123;<br>    <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state, payload</span>)</span> &#123;<br>        state.count += payload.n <span class="hljs-comment">//要求payload是一个对象，其中n为传递的加数</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 推荐的形式1：提交mutation的事件类型，传递载荷，触发回调函数</span><br><span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;increment&#x27;</span>, &#123;<span class="hljs-attr">n</span>: <span class="hljs-number">1</span>&#125;); 👉 传递的实参的值： &#123;<span class="hljs-attr">n</span>: <span class="hljs-number">1</span>&#125;<br><br><span class="hljs-comment">// 推荐的形式2：使用对象风格的提交方式，传递参数名与值   </span><br><span class="hljs-built_in">this</span>.$store.commit(&#123;<br>    type: <span class="hljs-string">&#x27;increment&#x27;</span>, 👉 传递的实参的值： &#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;increment&#x27;</span>, <span class="hljs-attr">n</span>: <span class="hljs-number">1</span>&#125;<br>    n: <span class="hljs-number">1</span><br>&#125;);<br></code></pre></td></tr></table></figure>


<p><strong>向提交简单参数：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ...</span><br>mutations: &#123;<br>    <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state, n</span>)</span> &#123;<br>        state.count += n <span class="hljs-comment">//要求payload是一个对象，其中n为传递的加数</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 不能再通过对象风格来传递参数</span><br><span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;increment&#x27;</span>, <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure>


<blockquote>
<p>总结： 在向mutation传递参数时，需要回调函数与提交方式的配合。</p>
</blockquote>
<hr>
<h3 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h3><p>想要<strong>异步地更改状态</strong>，就需要使用<code>action</code>。<code>action</code>并不直接改变<code>state</code>，而是发起<code>mutation</code>。</p>
<blockquote>
<p>action既可以异步地提交mutation，也可以同步提交，但更主要的是利用它来异步修改状态</p>
</blockquote>
<p><strong>注册一个简单的 action：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>  state: &#123;<br>    count: <span class="hljs-number">0</span><br>  &#125;,<br>  mutations: &#123;<br>    increment (state) &#123;<br>      state.count++<br>    &#125;<br>  &#125;,<br>  actions: &#123;<br>    <span class="hljs-function"><span class="hljs-title">asyncIncrement</span>(<span class="hljs-params">context</span>)</span> &#123;<br>      <span class="hljs-built_in">setTimeout</span>( <span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> &#123;<br>          context.commit(<span class="hljs-string">&#x27;increment&#x27;</span>)<br>      &#125;, <span class="hljs-number">1000</span>);<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>


<p><strong>发起简单的action：</strong></p>
<p>发起<code>action</code>的方法形式和发起<code>mutation</code>一样，只是换了个名字<code>dispatch</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$store.dispatch(<span class="hljs-string">&#x27;asyncIncrement&#x27;</span>)<br></code></pre></td></tr></table></figure>


<p><strong>Actions 支持同样的载荷方式和对象方式<code>进行分发</code>并<code>传递参数</code>：</strong></p>
<p>Action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用 <code>context.commit</code> 提交一个 mutation，或者通过 <code>context.state</code> 和 <code>context.getters</code> 来获取 state 和 getters。当我们在之后介绍到 <code>Modules</code> 时，你就知道 context 对象为什么不是 store 实例本身了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ...</span><br>	mutations:&#123;<br>      <span class="hljs-function"><span class="hljs-title">increment</span>(<span class="hljs-params">state, payload</span>)</span>&#123;<br>          state.count += payload.n<br>      &#125;  <br>    &#125;,<br>	actions: &#123;<br>      <span class="hljs-function"><span class="hljs-title">asyncIncrement</span>(<span class="hljs-params">context, payload</span>)</span> &#123;<br>         <span class="hljs-built_in">setTimeout</span>( <span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> &#123;<br>            context.commit(<span class="hljs-string">&#x27;increment&#x27;</span>, payload)  <span class="hljs-comment">// 实参的类型要与mutation中的形参一致</span><br>         &#125;, <span class="hljs-number">1000</span>);<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 推荐使用载荷的方式向action传参</span><br><span class="hljs-built_in">this</span>.$store.dispatch(<span class="hljs-string">&#x27;asyncIncrement&#x27;</span>, &#123;<span class="hljs-attr">n</span>: <span class="hljs-number">1</span>&#125;)<br><br><span class="hljs-comment">// 不建议使用下面这种对象风格的方式，因为payload形参的type不再是mutation的type，需要进行调整</span><br><span class="hljs-built_in">this</span>.$store.dispatch(&#123;<br>    type: <span class="hljs-string">&#x27;asyncIncrement&#x27;</span>,<br>    n: <span class="hljs-number">1</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<blockquote>
<p>可见，向action或mutation传参，以载荷的方式更直观，同时能避免差错。</p>
</blockquote>
<p><strong>对context进行解构：</strong></p>
<p>实践中，我们会经常用到 ES2015 的 <a target="_blank" rel="noopener" href="https://github.com/lukehoban/es6features#destructuring">参数解构</a> 来简化代码（特别是我们需要调用 <code>commit</code> 很多次的时候）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">actions: &#123;<br>  increment (&#123; commit &#125;) &#123;<br>    commit(<span class="hljs-string">&#x27;increment&#x27;</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>context具有store 实例的相同方法和属性，包括commit, dispatch, getters, state。</p>
<p>此外还具有rootGetters以及rootState；</p>
<p>这些属性和方法都可以进行解构获取。</p>
<p><img src="/2020/12/24/Vue/vue/image-20200926153828952.png" srcset="/img/loading.gif" alt="image-20200926153828952"> </p>
</blockquote>
<h4 id="Action处理异步的正确使用方式"><a href="#Action处理异步的正确使用方式" class="headerlink" title="Action处理异步的正确使用方式"></a>Action处理异步的正确使用方式</h4><p>想要使用<code>action</code>处理异步工作很简单，只需要将异步操作放到<code>action</code>中执行（如上面代码中的<code>setTimeout</code>）。</p>
<p>要想在异步操作完成后继续进行相应的流程操作，有两种方式:</p>
<ol>
<li><p>在action中返回一个Promise</p>
<p><code>store.dispatch</code>返回相应<code>action</code>的执行结果，而当action的处理函数返回的是一个Promise实例时，就可以写成：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$store.dispatch(<span class="hljs-string">&#x27;actionA&#x27;</span>).then(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;)<br></code></pre></td></tr></table></figure>


</li>
</ol>
<p>   在另外一个 action 中也可以：</p>
   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">actions: &#123;<br>  <span class="hljs-comment">// ...</span><br>  actionB (&#123; dispatch, commit &#125;) &#123;<br>    <span class="hljs-keyword">return</span> dispatch(<span class="hljs-string">&#x27;actionA&#x27;</span>).then(<span class="hljs-function">() =&gt;</span> &#123;<br>      commit(<span class="hljs-string">&#x27;someOtherMutation&#x27;</span>)<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<ol start="2">
<li><p>利用<code>async/await</code> 进行组合action。代码更加简洁。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 假设 getData() 和 getOtherData() 返回的是 Promise</span><br><br>actions: &#123;<br>  <span class="hljs-keyword">async</span> actionA (&#123; commit &#125;) &#123;<br>    commit(<span class="hljs-string">&#x27;gotData&#x27;</span>, <span class="hljs-keyword">await</span> getData())<br>  &#125;,<br>  <span class="hljs-keyword">async</span> actionB (&#123; dispatch, commit &#125;) &#123;<br>    <span class="hljs-keyword">await</span> dispatch(<span class="hljs-string">&#x27;actionA&#x27;</span>) <span class="hljs-comment">// 等待 actionA 完成</span><br>    commit(<span class="hljs-string">&#x27;gotOtherData&#x27;</span>, <span class="hljs-keyword">await</span> getOtherData())<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>一个 <code>$store.dispatch</code> 在不同模块中可以触发多个 action 函数。在这种情况下，只有当所有触发函数完成后，返回的 Promise 才会执行。</p>
</blockquote>
</li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Vue/">Vue</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/12/24/JavaScript/js-string/">
                        <span class="hidden-mobile">JS字符串常用方法</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
